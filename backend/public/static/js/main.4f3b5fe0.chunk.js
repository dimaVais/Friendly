(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{141:function(e,t,a){e.exports=a(243)},146:function(e,t,a){},179:function(e,t,a){e.exports=a.p+"static/media/hero1.8b5847e5.jpg"},180:function(e,t,a){e.exports=a.p+"static/media/about1.679fdfa6.png"},181:function(e,t,a){e.exports=a.p+"static/media/about2.18fa0a8f.png"},182:function(e,t,a){e.exports=a.p+"static/media/about3.3f0198c1.png"},188:function(e,t,a){var n={"./cat.png":189,"./dog.png":190,"./farm.png":191,"./other.png":192};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id=188},189:function(e,t,a){e.exports=a.p+"static/media/cat.269e723b.png"},190:function(e,t,a){e.exports=a.p+"static/media/dog.1afb1629.png"},191:function(e,t,a){e.exports=a.p+"static/media/farm.976d3f34.png"},192:function(e,t,a){e.exports=a.p+"static/media/other.6672fc57.png"},208:function(e,t,a){e.exports=a.p+"static/media/logo.9b0c6cc2.png"},209:function(e,t,a){e.exports=a.p+"static/media/logo-with-title.85dfceb8.png"},210:function(e,t,a){e.exports=a.p+"static/media/insta.e77ccb90.png"},239:function(e,t){},243:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),c=a.n(s),o=(a(146),a(9)),i=a(10),l=a(12),u=a(11),p=a(25),m=a(15),d=a(1),h=a.n(d),f=a(4),v=a(124),g=a.n(v).a.create({withCredentials:!0}),b=function(e,t){return w(e,"GET",t)},E=function(e,t){return w(e,"POST",t)},y=function(e,t){return w(e,"PUT",t)},O=function(e,t){return w(e,"DELETE",t)};function w(e){return j.apply(this,arguments)}function j(){return(j=Object(f.a)(h.a.mark((function e(t){var a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"get",n=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,g({url:"".concat("/api").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var x=a(125),C={query:function(e){return S.apply(this,arguments)},getPetById:function(e){return k.apply(this,arguments)},save:function(e){return N.apply(this,arguments)},remove:function(e){return I.apply(this,arguments)}};function S(){return(S=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,b("".concat("/pet").concat(""),{params:t});case 3:return a=e.sent,n=_(a,t),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/pet","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=7;break}return e.next=3,y("".concat("/pet","/").concat(t._id),t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.next=9,E("".concat("/pet"),t);case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("/pet","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){if(!t)return e;var a=e;if(t.txt){t.txt=t.txt.trim(" "),t.txt=t.txt.trim(",");var n=t.txt.split(" ");(n.length=1)&&(n=t.txt.split(",")),n.forEach((function(e){a=a.filter((function(t){if(t.name.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)||t.gender.toLowerCase().includes(e)||t.size.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.shop.fullName.toLowerCase().includes(e))return t}))}))}if(a=a.filter((function(e){return e.type.toLowerCase().includes(t.type)})),t.distance.range){var r={lat:t.distance.lat,lng:t.distance.lon};a=a.filter((function(e){var a={lat:e.location.lat,lng:e.location.lng},n=x.SphericalUtil.computeDistanceBetween(r,a)/1e3;return console.log("distanceFromUser",n),n<=t.distance.range}))}return a}function U(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.query(e);case 2:n=t.sent,a({type:"LOAD_PETS",pets:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function R(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_PET",petToSave:n}):a({type:"ADD_PET",petToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function D(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.remove(e);case 2:a({type:"REMOVE_PET",petId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function A(e){return function(t){t({type:"SET_FILTER",filterBy:e})}}var T=a(16),P=a(14),M=a(43),B=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isClearShown:!1},e.onInputChange=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.target.value),n=a.target.value,e.setState({isClearShown:""!==n}),t.next=5,e.setState({txt:n});case 5:if(n||"hero"===e.state.parent){t.next=8;break}return t.next=8,e.onSearch();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.keyPress=function(t){13==t.keyCode&&e.onSearch()},e.onClear=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({txt:""}),e.props.setFilter({txt:""},(function(){return e.props.loadPets()})),e.setState({isClearShown:!1});case 3:case"end":return t.stop()}}),t)}))),e.onSearch=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter({txt:e.state.txt},(function(){return e.props.loadPets()}));case 2:console.log(e.props),"hero"===e.state.parent&&e.props.history.push("/pet");case 4:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({txt:this.props.filterBy.txt});case 2:return e.next=4,this.setState({parent:this.props.parent});case 4:this.setState({isClearShown:""!==this.state.txt}),this.props&&console.log(this.props);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.setState({txt:this.props.filterBy.txt}),this.setState({isClearShown:""!==this.state.txt}))}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"search-container flex"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"search",type:"text",name:"search",value:this.state.txt,autoComplete:"off",placeholder:"Find a friend (i.e. small, cat, puppy)",onChange:function(t){return e.onInputChange(t)},onKeyDown:this.keyPress}),r.a.createElement(T.a,{className:"search-icon",icon:P.o}),r.a.createElement(T.a,{className:this.state.isClearShown?"clear-icon":"clear-icon hidden",onClick:this.onClear,icon:P.r})),r.a.createElement("div",{className:"btn-search",onClick:this.onSearch},"Search"))}}]),a}(n.Component),L={setFilter:A,loadPets:U},F=Object(p.f)(Object(m.b)((function(e){return{filterBy:e.petReducer.filterBy}}),L)(B)),H=a(126),G=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(H.Parallax,{className:"hero-container",bgImage:a(179),bgImageAlt:"the cat",strength:800},r.a.createElement("div",{className:"hero-container full"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("h1",{className:"hero-heading-up"},r.a.createElement("span",{className:"span"},"Friendly.")," Adopt a ",r.a.createElement("span",{className:"span"},"pet")," "),r.a.createElement("h1",{className:"hero-heading"},"Discover your next best friend"),r.a.createElement(F,{parent:"hero"}),r.a.createElement("section",{className:"category-container"}))))}}]),n}(n.Component),z=a(23),q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"about-main-container full"},r.a.createElement("div",{className:"about-left"},r.a.createElement("div",{className:"about-headings"},r.a.createElement("h1",null,"Friendly connects adoption centers to potential adopters")),r.a.createElement("div",{className:"call-to-action"},r.a.createElement(z.b,{to:"/pet"},r.a.createElement("button",{className:"go-to-gallery-btn"},"Let's See Some Animals")))),r.a.createElement("div",{className:"about-right"},r.a.createElement("div",{className:"adoption-reasons-box"},r.a.createElement("h3",{className:"adoption-reasons-header"},"Why Should I Adopt?"),r.a.createElement("p",null,"Decrease blood pressure."),r.a.createElement("p",null,"Decrease feelings of loneliness."),r.a.createElement("p",null,"Increase opportunities for exercise and outdoor activities."),r.a.createElement("p",{className:"adoption-reason-last"},"Increase opportunities for socialization.")),r.a.createElement("div",{className:"images-box"},r.a.createElement("img",{className:"img-1",src:a(180),alt:""}),r.a.createElement("img",{className:"img-2",src:a(181),alt:""}),r.a.createElement("img",{className:"img-3",src:a(182),alt:""}))))}}]),n}(n.Component),V=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pets:[]},e.loadPets=function(){e.props.loadPets()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadPets()}},{key:"render",value:function(){this.props.user;return r.a.createElement("div",null,r.a.createElement(G,null),r.a.createElement(q,null))}}]),a}(n.Component),W={loadPets:U},Y=Object(m.b)((function(e){return{pets:e.petReducer.pets,user:e.userReducer.loggedInUser}}),W)(V),J=a(21),K=a(3),Q=a(288),X=a(283),Z=a(286),$=a(285),ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,s=new Array(r),c=0;c<r;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={lat:0,lng:0},e.setLocToFind=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,console.log("find:",n),t.next=4,e.findLocation(n,e.getLatLng);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findLocation=function(){var e=Object(f.a)(h.a.mark((function e(t,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(183),r({key:"AIzaSyDGql0MyVMEQeH89LQj0TtpM66SoLpkAhw"}).find(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),e.getLatLng=function(){var t=Object(f.a)(h.a.mark((function t(a,n){var r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:if(!((r=t.sent)&&r.length>0)){t.next=8;break}return t.next=6,e.setState({lat:r[0].location.lat,lng:r[0].location.lng});case 6:s={lat:e.state.lat,lng:e.state.lng},e.props.getGeolocation(s);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return this.state?r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(Q.a,{type:"text",name:"locName",placeholder:"Your Shop Location",onChange:function(t){e.setLocToFind(t),e.props.signupHandleChange(t)}})):r.a.createElement("h1",null,"LOADING...")}}]),n}(r.a.Component),te={login:function(e){return ae.apply(this,arguments)},logout:function(){return re.apply(this,arguments)},signup:function(e){return ne.apply(this,arguments)},getUsers:function(){return b("user")},getById:function(e){return b("".concat("/user","/").concat(e))},getMiniById:function(e){return b("".concat("/user","/mini/").concat(e))},remove:function(e){return O("".concat("/user","/").concat(e))},update:function(e){return y("".concat("/user","/").concat(e._id),e)}};function ae(){return(ae=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("".concat("/auth","/login"),t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(){return(ne=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("user",t);case 2:return a=e.sent,e.abrupt("return",a[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("".concat("/auth","/logout"));case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te.getUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ce(){return(ce=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.getById(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",userToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ie(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.login(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function le(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.signup(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ue(){return function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te.logout();case 2:t({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var pe={query:function(){return me.apply(this,arguments)},getById:function(e){return de.apply(this,arguments)},getMiniByUserId:function(e){return b("".concat("/shop","/mini/").concat(e))},getByUserId:function(e){return he.apply(this,arguments)},save:function(e){return fe.apply(this,arguments)},remove:function(e){return ve.apply(this,arguments)}};function me(){return(me=Object(f.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/shop"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/shop","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/shop","/owner/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return(fe=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=4,y("".concat("/shop","/").concat(t._id),t);case 4:return a=e.sent,e.abrupt("return",a);case 8:t.createdAt=new Date(Date.now()).toLocaleString();case 9:return t.pets=[],t.reviews=[],e.next=13,E("".concat("/shop"),t);case 13:return n=e.sent,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(){return(ve=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("/shop","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.query();case 2:a=e.sent,t({type:"LOAD_SHOPS",shops:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function be(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_SHOP",shopToSave:n}):a({type:"ADD_SHOP",shopToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={userAdopt:!1,userShop:!1,signupCred:""},e.setUserAdopt=function(){e.setState({userAdopt:!0,userShop:!1})},e.setUserShop=function(){e.setState({userShop:!0,userAdopt:!1})},e.signupHandleChange=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.name,s=n.value,t.next=3,e.setState((function(e){return{signupCred:Object(K.a)(Object(K.a)({},e.signupCred),{},Object(J.a)({},r,s))}}));case 3:console.log("This State:",e.state);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,u,p,m,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,n.userAdopt,r=n.userShop,s=e.state.signupCred,c=s.fullName,o=s.username,i=s.password,l=s.address,u=s.email,p=s.phone,c&&o&&i&&l){t.next=5;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 5:return m={fullName:c,username:o,password:i,imgUrl:"https://ui-avatars.com/api/?name=".concat(c.substring(0,1),"+").concat(c.substring(c.indexOf(" ")+1,c.indexOf(" ")+2)),address:l,email:u,phone:p,isOwner:r,isGuest:!1},t.next=8,e.props.signup(m);case 8:return t.next=10,e.props.loadUsers();case 10:d=e.props.users[e.props.users.length-1],console.log("userNow:",d),e.setState({signupCred:{fullName:"",username:"",password:"",address:"",email:"",phone:""}}),r&&e.signUpShop(d),e.props.history.push("/");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.signUpShop=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s,c,o,i,l,u,p,m,d;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.signupCred,r=n.name,s=n.type,c=n.title,o=n.desc,i=n.locName,l=n.lat,u=n.lng,r&&s&&c&&o&&i){t.next=3;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 3:return p={_id:a._id,fullName:a.fullName,imgUrl:a.imgUrl},m={name:i,lat:parseFloat(l),lng:parseFloat(u)},d={name:r,type:s,owner:p,title:c,desc:o,location:m},e.props.saveShop(d),a.isOwner=!0,t.next=10,e.props.updateUser(a);case 10:e.setState({signupCred:{name:"",type:"",owner:"",title:"",description:"",location:""}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getGeolocation=function(t){e.setState({signupCred:Object(K.a)(Object(K.a)({},e.state.signupCred),{},{lat:t.lat,lng:t.lng})})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.userAdopt,n=t.userShop;this.props.loggedInUser;return console.log("this.state.signupCred",this.state.signupCred),r.a.createElement("div",{className:"form-container flex column align-center"},r.a.createElement("h1",null,"We are happy you decided to join us!"),r.a.createElement("p",null,"Do you want to adopt or to find adopters for your animals?"),r.a.createElement("div",{className:"btn-menu flex"},r.a.createElement("button",{onClick:function(){e.setUserAdopt()}},"Adopt"),r.a.createElement("button",{onClick:function(){e.setUserShop()}},"Find Adopters")),r.a.createElement("div",{className:"fields-container flex column align-center"},a?r.a.createElement("h3",null,"New Adopter"):r.a.createElement("h3",null,"Please filled out this form so we will be able to get to know you and your animals"),r.a.createElement("form",{className:"flex column align-center",onSubmit:this.doSignup},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex column align-center"},r.a.createElement("br",null),r.a.createElement(Q.a,{type:"text",name:"fullName",placeholder:"Full Name",onChange:this.signupHandleChange,value:this.state.signupCred.fullName}),r.a.createElement(Q.a,{type:"text",name:"username",placeholder:"User Name",onChange:this.signupHandleChange,value:this.state.signupCred.username}),r.a.createElement(Q.a,{type:"password",name:"password",placeholder:"Password",onChange:this.signupHandleChange,value:this.state.signupCred.password}),r.a.createElement(Q.a,{type:"text",name:"address",placeholder:"Personal Address",onChange:this.signupHandleChange,value:this.state.signupCred.address}),r.a.createElement(Q.a,{type:"text",name:"email",placeholder:"Email",onChange:this.signupHandleChange,value:this.state.signupCred.email}),r.a.createElement(Q.a,{type:"text",name:"phone",placeholder:"Phone",onChange:this.signupHandleChange,value:this.state.signupCred.phone})),n&&r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(Q.a,{type:"text",name:"name",placeholder:"Your Shop Name",onChange:this.signupHandleChange}),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"type"},"Shop Type:"),r.a.createElement(X.a,{native:!0,onChange:this.signupHandleChange,inputProps:{name:"type"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"shelter"},"Shelter"),r.a.createElement("option",{value:"volunteer"},"Volunteer"),r.a.createElement("option",{value:"private"},"Private"))),r.a.createElement(Q.a,{type:"text",name:"title",placeholder:"Your shop title/catchFrase",onChange:this.signupHandleChange}),r.a.createElement(Q.a,{id:"standard-textarea",label:"Shop Description:",placeholder:"Your shop short description",multiline:!0,name:"desc",onChange:this.signupHandleChange}),r.a.createElement(ee,{getGeolocation:this.getGeolocation,signupHandleChange:this.signupHandleChange}),r.a.createElement("br",null))),r.a.createElement("button",null,"Signup"))))}}]),a}(n.Component),ye={signup:le,login:ie,loadUsers:se,saveShop:be,loadShops:ge,getUserById:function(e){return ce.apply(this,arguments)},updateUser:oe},Oe=Object(m.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser,shops:e.shopReducer.shops}}),ye)(Ee),we=a(20),je=a(284),xe=a(275),Ce=a(273),Se=a(276),ke=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={gender:{txt:"",male:!1,female:!1},distance:{range:0}},e.onGenderChange=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={male:!1,female:!1},n=Object(K.a)(Object(K.a)({},n),{},Object(J.a)({},a,!e.state.gender[a])),console.log(n),t.next=5,e.setState(Object(K.a)(Object(K.a)({},e.state),{},{gender:Object(K.a)({},n)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDistanceChange=function(){var e=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,console.log(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.onShow=function(){e.state.gender.male,e.gender.female,console.log(e.state),e.props.onToggleFilterModal()},e.onClear=function(){},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"displayTags",value:function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("label",{htmlFor:""},e),r.a.createElement(je.a,{type:"checkbox",name:"",value:e}))}},{key:"displayGenderBtns",value:function(){var e=this,t=this.state.gender;return r.a.createElement("section",{className:"gender"},r.a.createElement(Z.a,{htmlFor:""},"Gender"),r.a.createElement("div",{className:t.male?"pet-gender pressed":"pet-gender",onClick:function(){return e.onGenderChange("male")}},r.a.createElement(T.a,{className:" pet-gender-male-icon",icon:P.l})),r.a.createElement("div",{className:t.female?"pet-gender pressed":"pet-gender",onClick:function(){return e.onGenderChange("female")}},r.a.createElement(T.a,{className:" pet-gender-female-icon",icon:P.s})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"tags-modal"},r.a.createElement("div",{className:"container"},r.a.createElement(xe.a,null,this.displayGenderBtns(),r.a.createElement("section",null,r.a.createElement(Z.a,{htmlFor:"age"},"Age"),r.a.createElement(X.a,{native:!0,onChange:this.props.handleChange,inputProps:{name:"age",id:"age-native-simple"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:1},"Puppy"),r.a.createElement("option",{value:7},"Grown up"),r.a.createElement("option",{value:15},"Old"))),r.a.createElement("section",null,r.a.createElement(Z.a,{htmlFor:"size"},"Size"),r.a.createElement(X.a,{native:!0,onChange:this.props.handleChange,inputProps:{name:"size",id:"age-native-simple"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"small"},"Small"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"big"},"Big"))),r.a.createElement("section",null,r.a.createElement(Z.a,{htmlFor:""},"Distance(km)"),r.a.createElement(Ce.a,{type:"number",name:"",min:"1",id:"",onChange:this.onDistanceChange})),r.a.createElement("section",{className:"btns-container"}),r.a.createElement(Se.a,{variant:"contained",onClick:this.onShow},"Show"),r.a.createElement(Se.a,{variant:"contained",onClick:this.onClear},"Clear"))))}}]),a}(n.Component),Ne=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={dog:!1,cat:!1,farm:!1,other:!1},e.imgClicked=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={dog:!1,cat:!1,farm:!1,other:!1},!e.state[a]){t.next=7;break}return t.next=4,e.setState(Object(K.a)({},n));case 4:a="",t.next=9;break;case 7:return t.next=9,e.setState(Object(K.a)(Object(K.a)({},n),{},Object(J.a)({},a,!e.state.type)));case 9:e.props.onCategoryChange(a);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"displayTypesBtn",value:function(e){var t=this,n=this.state[e]?"pressed":"";return r.a.createElement("img",{key:e,src:a(188)("./".concat(e,".png")),className:n,alt:"Category",onClick:function(a){return t.imgClicked(e)}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"category-list anchor"},Object.keys(this.state).map((function(t){return e.displayTypesBtn(t)})))}}]),n}(n.Component),Ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={parent:"",filterBy:{type:"",gender:"",breed:"",size:"",txt:"",distance:{lat:0,lon:0,range:0}},isModalShown:!1,tags:[]},e.getUserPosition=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={lat:a.coords.latitude,lon:a.coords.longitude,range:0},t.next=3,e.setState({filterBy:Object(K.a)(Object(K.a)({},e.state.filterBy),{},{distance:n})});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFilterChange=function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter(Object(K.a)(Object(K.a)({},e.props.filterBy),a),(function(){return e.loadPets()}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSetCategory=function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({filterBy:Object(K.a)(Object(K.a)({},e.state.filterBy),{},{type:a})});case 2:e.onFilterChange({type:a});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleInput=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.name,s="number"===n.type?+n.value:n.value,t.next=5,e.setState((function(e){return"range"===r?Object(K.a)(Object(K.a)({},e),{},{filterBy:Object(K.a)(Object(K.a)({},e.filterBy),{},{distance:Object(K.a)(Object(K.a)({},e.filterBy.distance),{},Object(J.a)({},r,s))})}):Object(K.a)(Object(K.a)({},e),{},{filterBy:Object(K.a)(Object(K.a)({},e.filterBy),{},Object(J.a)({},r,s))})}));case 5:e.onFilterChange(e.state.filterBy);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleFilterModal=function(){e.setState({isModalShown:!e.state.isModalShown})},e.onApplyFilter=function(){e.onToggleFilterModal()},e.resetFilter=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(K.a)(Object(K.a)({},e.state.filterBy),{},{type:"",gender:"",breed:"",size:"",txt:""}));case 2:e.props.setFilter(e.state.filterBy,(function(){return e.props.loadPets()}));case 3:case"end":return t.stop()}}),t)}))),e.onToggleTag=function(t){var a=t.target.value,n=Object(we.a)(e.state.tags);n.includes(a)?n.splice(n.indexOf(a),1):n.push(a),e.setState({tags:n}),console.log(e.state.tags)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition(this.getUserPosition,(function(e){console.error("Error Code = "+e.code+" - "+e.message)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isModalShown;return r.a.createElement("div",{className:"filter-container flex column align-center"},r.a.createElement("section",{className:"search-container flex space-around"},r.a.createElement(F,{parent:"main",onInputChange:this.onInputChange})),r.a.createElement("section",{className:"category-container"},r.a.createElement(Ne,{onCategoryChange:this.onSetCategory})),r.a.createElement("section",null,r.a.createElement(Z.a,{htmlFor:"Distance(km)"},"Distance(km)"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"range",type:"number"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"20"},"20km"),r.a.createElement("option",{value:"50"},"50km"),r.a.createElement("option",{value:"100"},"100km"),r.a.createElement("option",{value:"200"},"200km"))),e&&r.a.createElement(ke,{filterBy:this.props.filterBy,onToggleTag:this.onToggleTag,onFilterChange:this.onFilterChange,onToggleFilterModal:this.onToggleFilterModal}),r.a.createElement("br",null))}}]),a}(n.Component),_e={setFilter:A,loadPets:U},Ue=Object(m.b)((function(e){return{filterBy:e.petReducer.filterBy}}),_e)(Ie),Re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pet:{},isLiked:!1,loveIconClass:"love-icon"},e.onUpdateReaction=function(){var t=Object(f.a)(h.a.mark((function t(a,n){var r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=e.state.pet,s=r.reacts.map((function(t){return t.type===n&&(e.setState({isLiked:!e.state.isLiked}),t.count+=e.state.isLiked?-1:1,e.setState(Object(K.a)(Object(K.a)({},e.state),{},{isLiked:!e.state.isLiked}))),t})),t.next=5,e.setState(Object(K.a)(Object(K.a)({},r),{},{reacts:Object(we.a)(s)}));case 5:return t.next=7,JSON.parse(JSON.stringify(e.state.pet));case 7:return c=t.sent,t.next=10,e.props.savePet(c);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({pet:Object(K.a)({},this.props.pet)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t==this.props){e.next=3;break}return e.next=3,this.setState({pet:Object(K.a)({},this.props.pet)});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(0===Object.keys(this.state.pet).length?this.props:this.state).pet,a=this.state.isLiked?"love-icon-active":"love-icon";return t&&t.reacts?r.a.createElement(z.c,{to:"/details/".concat(t._id)},r.a.createElement("div",{className:"pet-preview"},t.isAdopted&&r.a.createElement("div",{class:"ribbon ribbon-top-right"},r.a.createElement("span",null,"Adopted")),r.a.createElement("img",{src:t.imgUrls?t.imgUrls[0]:"",alt:"pet"}),r.a.createElement("div",{className:"card-description"},r.a.createElement("div",{className:"card-description-header"},r.a.createElement("h2",{className:"pet-name"},t.name),"Male"===t.gender&&r.a.createElement(T.a,{className:"pet-gender-male-icon",icon:P.l}),"Male"!==t.gender&&r.a.createElement(T.a,{className:"pet-gender-female-icon",icon:P.s})),r.a.createElement("h4",null,t.summary)),r.a.createElement("div",{className:"shop-container"},t.shop&&r.a.createElement(z.b,{to:"/shop/".concat(t.shop._id)},t.shop.fullName),r.a.createElement("div",{onClick:function(t){e.onUpdateReaction(t,"love")},className:"pet-rate-box"},r.a.createElement("div",{className:"content"},r.a.createElement("span",null,t.reacts&&"love"===t.reacts[0].type?r.a.createElement("span",{className:a}):""," ")),t.reacts&&"love"===t.reacts[0].type?r.a.createElement("span",{className:"love-count"},t.reacts[0].count):"")))):r.a.createElement("h1",null,"loading...")}}]),a}(n.Component),De={savePet:R,loadPets:U},Ae=Object(m.b)((function(e){return{}}),De)(Re),Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:""},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({filterBy:JSON.parse(JSON.stringify(this.props.filterBy))})}},{key:"render",value:function(){var e=this.props,t=e.pets,a=e.onRemove,n=e.onEdit,s=t.filter((function(e){return e.reacts[0].count>90})),c=t.filter((function(e){return e.reacts[0].count<=90})),o=this.props.filterBy,i=!o.type&&!o.txt&&!o.distance.range;return r.a.createElement("div",{className:"pet-list-container"},i&&r.a.createElement("h4",{className:"popular-pets-header"},"Most Popular"),i&&r.a.createElement("ul",{className:"pet-list"}," ",s.map((function(e,t){return r.a.createElement(Ae,{pet:e,key:t,onRemove:a,onEdit:n})}))),r.a.createElement("hr",null),i&&r.a.createElement("h4",{className:"popular-pets-header"},"Very Popular"),i&&r.a.createElement("ul",{className:"pet-list"}," ",c.map((function(e,t){return r.a.createElement(Ae,{pet:e,key:t,onRemove:a,onEdit:n})}))),!i&&r.a.createElement("ul",{className:"pet-list"}," ",t.map((function(e,t){return r.a.createElement(Ae,{pet:e,key:t,onRemove:a,onEdit:n})}))))}}]),a}(n.Component),Pe=Object(m.b)((function(e){return{filterBy:e.petReducer.filterBy}}),{})(Te),Me=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pets:[],filterBy:{type:""},sortBy:null,isReady:!1},e.resetFitler=Object(f.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter({type:"",gender:"",breed:"",size:"",txt:""},(function(){return e.loadPets()}));case 2:case"end":return t.stop()}}),t)}))),e.loadPets=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadPets(e.props.filterBy);case 2:return n=e.props.pets,t.next=5,e.setState(Object(K.a)(Object(K.a)({},e.state),{},{pets:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.props.removePet(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadPets();case 2:M.animateScroll.scrollToTop();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.props&&this.setState({isReady:!0}),t.filterBy===this.props.filterBy){e.next=4;break}return e.next=4,this.loadPets();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resetFitler();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user;return this.state.pets?r.a.createElement("div",{className:"pets-container"},r.a.createElement(Ue,null),r.a.createElement("div",{id:"center"}),r.a.createElement(Pe,{pets:this.state.pets,onRemove:this.onRemove,user:e})):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),Be={loadPets:U,removePet:D,setFilter:A},Le=Object(m.b)((function(e){return{pets:e.petReducer.pets,filterBy:e.petReducer.filterBy}}),Be)(Me),Fe=a(287),He=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pet:{}},e.handleInput=function(t){var a=t.target,n=a.name;if("number"===a.type)var r=+a.value;else r="checkbox"===a.type?a.checked:a.value;e.setState((function(e){return Object(K.a)(Object(K.a)({},e),{},{pet:Object(K.a)(Object(K.a)({},e.pet),{},Object(J.a)({},n,r))})}))},e.onSubmitForm=function(t){t.preventDefault(),e.props.savePet(e.state.pet),e.props.history.push("/")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadPets();case 2:(t=this.props.match.params.id)&&(a=this.props.pets.find((function(e){return e._id===t})),this.setState({pet:Object(K.a)({},a)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(K.a)({},this.state.pet);return 0===Object.keys(t).length?r.a.createElement("h1",null,"LOADING..."):r.a.createElement("form",{className:"form-container fields-container flex column align-center below-nav",onSubmit:function(t){e.onSubmitForm(t)}},t._id?r.a.createElement("h1",null,"Edit Pet Details"):r.a.createElement("h1",null,"Add Your Pet"),r.a.createElement(Ce.a,{type:"text",name:"name",placeholder:"Pet Name:",value:t.name,onChange:this.handleInput}),r.a.createElement(Ce.a,{type:"text",name:"type",placeholder:"Pet Type:",value:t.type,onChange:this.handleInput}),r.a.createElement(Fe.a,{name:"adoptedAt",label:"Pet Adoption Date",type:"date",defaultValue:new Date(t.adoptedAt).toISOString().substr(0,10),onChange:this.handleInput,InputLabelProps:{shrink:!0}}),r.a.createElement(Fe.a,{name:"bDate",label:"Pet Birth Date",type:"date",defaultValue:new Date(t.bDate).toISOString().substr(0,10),onChange:this.handleInput,InputLabelProps:{shrink:!0}}),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"type"},"Pet Gender:"),r.a.createElement(X.a,{native:!0,value:t.gender,onChange:this.handleInput,inputProps:{name:"gender"}},r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"))),r.a.createElement(Ce.a,{type:"text",name:"breed",placeholder:"Pet Breed:",value:t.breed,onChange:this.handleInput}),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"type"},"Pet Size:"),r.a.createElement(X.a,{native:!0,value:t.size,onChange:this.handleInput,inputProps:{name:"size"}},r.a.createElement("option",{value:"small"},"Small"),r.a.createElement("option",{value:"medium"},"medium"),r.a.createElement("option",{value:"large"},"Large"),r.a.createElement("option",{value:"giant"},"Giant"))),r.a.createElement($.a,{className:"flex align-center"},r.a.createElement("lable",{htmlFor:"type"}," Is In Risk:",r.a.createElement("input",{type:"checkbox",checked:t.isInRisk?"checked":""})),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(Fe.a,{id:"standard-textarea",label:"Pet description:",placeholder:"Your pet short description",multiline:!0,name:"description",value:t.description,onChange:this.handleInput}),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"kids"},"Select pet behavior with kids:"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"kids"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"dogs"},"Select pet behavior with dogs:"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"dogs"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"cats"},"Select pet behavior with cats:"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"cats"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"energy"},"Select pet energy level:"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"energy"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"low"},"Low"),r.a.createElement("option",{value:"moderate"},"Moderate"),r.a.createElement("option",{value:"high"},"High"))),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"health"},"Select pet health condition:"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"health"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"helathy"},"Healthy"),r.a.createElement("option",{value:"notHealthy"},"Not Healthy"))),r.a.createElement("button",null,"SAVE"))}}]),a}(n.Component),Ge={savePet:R,loadPets:U},ze=Object(m.b)((function(e){return{pets:e.petReducer.pets}}),Ge)(He),qe={query:function(){return Ve.apply(this,arguments)},getById:function(e){return We.apply(this,arguments)},getByUserId:function(e){return Ye.apply(this,arguments)},save:function(e){return Je.apply(this,arguments)},remove:function(e){return Ke.apply(this,arguments)}};function Ve(){return(Ve=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},a=s.length>1?s[1]:void 0,!t){e.next=8;break}return n=t?"?".concat(a,"=").concat(t):"",e.next=6,b("".concat("/chat").concat(n),{params:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/chat","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/chat","/member/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=4,y("".concat("/chat","/").concat(t._id),t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return t.createdAt=new Date(Date.now()).toLocaleString(),e.next=11,E("".concat("/chat"),t);case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return(Ke=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("/chat","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return console.log("chatId",e),function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.getById(e);case 3:n=t.sent,a({type:"GET_CHAT",chat:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in loadUsers",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t({type:"TOGGLE_CHAT",chatInfo:e})}}var Ze={query:function(){return $e.apply(this,arguments)},getById:function(e){return et.apply(this,arguments)},save:function(e){return tt.apply(this,arguments)},remove:function(e){return at.apply(this,arguments)}};function $e(){return($e=Object(f.a)(h.a.mark((function e(){var t,a,n,r,s=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},a=s.length>1?s[1]:void 0,!t){e.next=8;break}return n=t?"?".concat(a,"=").concat(t):"",e.next=6,b("".concat("/order").concat(n),{params:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(f.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("".concat("/order","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return(tt=Object(f.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("order",t),!t._id){e.next=9;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=5,y("".concat("/order","/").concat(t._id),t);case 5:return a=e.sent,e.abrupt("return",a);case 9:return t.createdAt=new Date(Date.now()).toLocaleString(),e.next=12,E("".concat("/order"),t);case 12:return n=e.sent,e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(){return(at=Object(f.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("".concat("/order","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e,t){return function(){var a=Object(f.a)(h.a.mark((function a(n){var r;return h.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Ze.query(e,t);case 2:r=a.sent,n({type:"LOAD_ORDERS",orders:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function rt(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_ORDER",orderToSave:n}):a({type:"ADD_ORDER",orderToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var st=a(277),ct=a(278),ot=a(279),it=a(280),lt=a(281),ut=a(282);function pt(){return r.a.createElement("div",{className:"adoption-modal-msg"},r.a.createElement("p",{className:"msg-content"},"Your Adoption Request Has Been Sent."))}var mt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={pet:{},isOwnerOfPet:!1,adoptButton:"Adopt",currComment:"",AdoptionModalMsg:!1},e.getCurrPet=Object(f.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadPets();case 2:a=e.props.match.params.id,n=e.props.pets.find((function(e){return e._id===a})),e.setState({pet:Object(K.a)({},n)});case 5:case"end":return t.stop()}}),t)}))),e.isOwnerOfPet=Object(f.a)(h.a.mark((function t(){var a,n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.loggedInUser,n=e.state.pet,!a||!n.shop){t.next=8;break}return r=n.shop._id,t.next=6,pe.getById(r);case 6:s=t.sent,e.setState({isOwnerOfPet:a._id===s.owner._id});case 8:case"end":return t.stop()}}),t)}))),e.onAdopt=Object(f.a)(h.a.mark((function t(){var a,n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.props.loggedInUser).isGuest){t.next=3;break}return t.abrupt("return");case 3:return n=e.state.pet,r=n.shop._id,t.next=7,pe.getById(r);case 7:s=t.sent,c={msg:"Hi, I saw your lovely pet and really wish to adopt it!",buyer:{_id:a._id,fullName:a.fullName,imgUrl:a.imgUrl},shop:{_id:s._id,name:s.name,type:s.type,imgUrl:s.imgUrl},pet:{_id:n._id,name:n.name},status:"Pending"},e.props.saveOrder(c),e.setState({AdoptionModalMsg:!e.state.AdoptionModalMsg}),setTimeout((function(){e.setState({AdoptionModalMsg:!e.state.AdoptionModalMsg})}),1e3),e.setState({adoptButton:"Request Sent"});case 13:case"end":return t.stop()}}),t)}))),e.onRemovePet=function(e){console.log("petId",e)},e.onToggleChat=Object(f.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.getById(e.state.pet.shop._id);case 2:return a=t.sent,t.next=5,e.props.toggleChat({userId:a.owner._id});case 5:case"end":return t.stop()}}),t)}))),e.onUpdateReaction=function(t){var a=e.state.pet;a.reacts.map((function(e){return e.type===t&&e.count++,e})),e.props.savePet(a),e.getCurrPet()},e.handleCommentInput=function(t){var a=t.target.value;e.setState({currComment:a})},e.onComment=Object(f.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.pet,n=e.props.loggedInUser,r={id:"c".concat(100+a.comments.length+1),txt:e.state.currComment,by:{id:n._id,fullName:n.fullName,imgUrl:n.imgUrl}},a.comments.unshift(r),t.next=6,e.props.savePet(a);case 6:e.getComponentData(),e.setState({cuurComment:""});case 8:case"end":return t.stop()}}),t)}))),e.getTimeToString=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=a+"/"+t+"/"+n},e.getUserId=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.state.pet),t.next=3,pe.getById(e.state.pet.shop._id);case 3:return n=t.sent,t.next=6,n.owner._id;case 6:r=t.sent,e.setState({ownerId:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getComponentData(),M.animateScroll.scrollToTop();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getComponentData",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrPet();case 2:return e.next=4,this.getUserId();case 4:return e.next=6,this.isOwnerOfPet();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.pet;this.props.loggedInUser;return t?r.a.createElement("section",{className:"pet-details-main-container"},r.a.createElement("div",{className:"pet-details-box"},r.a.createElement("div",{className:"pet-details-header"},r.a.createElement("h2",{className:"pet-details-heading"},t.name),r.a.createElement("div",{className:"share-box"},r.a.createElement(st.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly",hashtag:"#Friendly"},r.a.createElement(ct.a,{size:30})),r.a.createElement(ot.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly"},r.a.createElement(it.a,{size:30})),r.a.createElement(lt.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly"},r.a.createElement(ut.a,{size:30})))),t.isAdopted&&r.a.createElement("div",{class:"ribbon-details ribbon-top"},r.a.createElement("span",null,"Adopted")),r.a.createElement("div",{className:"pet-details-img-box"},t.imgUrls?t.imgUrls.map((function(e,t){return r.a.createElement("img",{className:"pet-details-img-".concat(t),src:e})})):""),r.a.createElement("div",null,r.a.createElement("ul",{className:"reactions-list"},t.reacts?t.reacts.map((function(t){if("love"===t.type)return r.a.createElement("li",{className:"react-count"},r.a.createElement(T.a,{onClick:function(){e.onUpdateReaction("love")},className:"heart-icon",icon:P.i})," ","".concat(t.count))})):"")),r.a.createElement("div",{className:"shop-and-pet-info"},r.a.createElement("div",{className:"pet-info"},r.a.createElement("div",{className:"pet-info-up"},r.a.createElement("div",{className:"age info-box"},r.a.createElement(T.a,{className:"age-icon info-icon",icon:P.c}),r.a.createElement("p",null,r.a.createElement("span",null,"Age: "),"".concat(parseFloat((Date.now()-new Date(t.bDate))/31104e6).toFixed(1)))),r.a.createElement("div",{className:"size info-box"},r.a.createElement(T.a,{className:"size-icon info-icon",icon:P.g}),r.a.createElement("p",null,r.a.createElement("span",null,"Size:")," ",t.size))),r.a.createElement("div",{className:"pet-info-down "},r.a.createElement(T.a,{className:"gender-icon info-icon",icon:P.t}),r.a.createElement("div",{className:"gender info-box"},r.a.createElement("p",null,r.a.createElement("span",null,"Gender:")," ",t.gender)),r.a.createElement("div",{className:"breed info-box"},r.a.createElement(T.a,{className:"breed-icon info-icon",icon:P.a}),r.a.createElement("p",null,r.a.createElement("span",null,"Breed:")," ",t.breed)))),r.a.createElement("div",{className:"shop-details"},r.a.createElement("div",{className:"shop-details-up"},t.shop&&r.a.createElement("img",{className:"shop-img",src:"".concat(t.shop.imgUrl),alt:""}),t.shop&&r.a.createElement(z.b,{to:"/shop/".concat(t.shop._id)},r.a.createElement("p",null,t.shop.fullName))),r.a.createElement("div",{className:"shop-details-bottom"},r.a.createElement("div",{className:"shop-rate-box"},r.a.createElement(T.a,{className:"star-icon",icon:P.p}),t.shop&&r.a.createElement("p",{className:"shop-rate-rating"},t.shop.rate.rating,"  "),t.shop&&r.a.createElement("p",{className:"shop-rate-count"},"(",t.shop.rate.count,")  ")),t.shop&&!this.state.isOwnerOfPet&&r.a.createElement("button",{onClick:this.onToggleChat},"Message ",t.shop.fullName)))),r.a.createElement("div",{className:"tags-and-adopt-btn-box"},r.a.createElement("div",{className:"tags-list-box"},r.a.createElement("ul",{className:"tags-list"},t.tags?t.tags.map((function(e){return r.a.createElement("li",null," ",e," ")})):"")),r.a.createElement("button",{onClick:this.onAdopt,className:"adoption-btn ".concat(t.isAdopted?"adopted":"adopt")},t.isAdopted?"Already Adopted":"Adopt"," "),this.state.AdoptionModalMsg&&r.a.createElement(pt,null)),r.a.createElement("hr",null),r.a.createElement("div",{className:"description-box"},r.a.createElement("p",null,t.description)),r.a.createElement("hr",null),r.a.createElement("div",{className:"comments-box"},r.a.createElement("div",{className:"comment-input-box"},r.a.createElement(Fe.a,{autocomplete:"off",name:"txt",fullWidth:"true",value:this.state.currComment,placeholder:"Add Comment Here",onChange:this.handleCommentInput}),r.a.createElement("button",{className:"add-comment-btn",onClick:this.onComment},"Add")),r.a.createElement("ul",{className:"comment-list"},t.comments?t.comments.map((function(e){return r.a.createElement("li",{className:"single-comment-box"},r.a.createElement("div",{className:"flex comment-box"},e.by.imgUrl?r.a.createElement("img",{src:e.by.imgUrl,alt:""}):"","guest"===e.by.id?r.a.createElement("img",{src:"https://images.macrumors.com/t/x_zUFqghBUNBxVUZN_dYoKF3D9g=/1600x0/article-new/2019/04/guest-user-250x250.jpg",alt:""}):"",r.a.createElement("p",null,r.a.createElement("span",null,e.by.fullName,": ")," "),r.a.createElement("p",null,r.a.createElement("span",null,e.createdAt)," "),r.a.createElement("p",null,e.txt," ")))})):"")))):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),dt={loadPets:U,savePet:R,saveOrder:rt,removePet:D,toggleChat:Xe},ht=Object(m.b)((function(e){return{pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser}}),dt)(mt);function ft(e){var t=e.user,a=e.display;return r.a.createElement("div",{className:"user-data ".concat(a)},r.a.createElement("div",{className:"header flex space-between"},r.a.createElement("img",{src:t.imgUrl,alt:""})),r.a.createElement("div",{className:"user-profile-details flex column"},r.a.createElement("h2",null,t.fullName),t.phone&&r.a.createElement("p",null,r.a.createElement("span",null,"Phone: "),t.phone),t.email&&r.a.createElement("p",null,r.a.createElement("span",null,"Email: "),t.email),t.birthDate&&r.a.createElement("p",null,r.a.createElement("span",null,"Age: "),parseInt((Date.now()-new Date(t.birthDate))/31104e6)),t.familyStatus&&r.a.createElement("p",null,r.a.createElement("span",null,"Family Status: "),t.familyStatus),t.numberOfKds&&r.a.createElement("p",null,r.a.createElement("span",null,"Number of Kids: "),t.numberOfKds),t.residence&&r.a.createElement("p",null,r.a.createElement("span",null,"Residence Type: "),t.residence),t.petCondition&&r.a.createElement("p",null,r.a.createElement("span",null,"Pet Designated Living conditions: "),t.petCondition),t.currrenPets&&r.a.createElement("p",null,r.a.createElement("span",null,"Current Pets at home: "),t.currrenPets),t.prevExperince&&r.a.createElement("p",null,r.a.createElement("span",null,"Previous experience with animals: "),t.prevExperince)))}var vt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showUserModal:!1,user:null,isUndreadMsg:!1},e.setUnreadCount=function(){console.log("Chats:",e.props.chats);var t=e.props.chats.find((function(t){return t.members.includes(e.props.loggedInUser._id)&&t.members.includes(e.props.order.buyer._id)}));if(console.log(t),t&&!(t.length>0)){var a=t.msgs.some((function(t){return console.log(!t.isRead),console.log(t.authorId!==e.props.loggedInUser._id),!t.isRead&&t.authorId!==e.props.loggedInUser._id}));e.setState({isUndreadMsg:a}),console.log(e.state)}},e.onToggleModal=Object(f.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({showUserModal:!e.state.showUserModal}),t.next=3,te.getById(e.props.order.buyer._id);case 3:return a=t.sent,t.next=6,e.setState({user:a});case 6:case"end":return t.stop()}}),t)}))),e.onToggleChat=function(){console.log(e.props),e.props.toggleChat({userId:e.props.order.buyer._id})},e.orderClass=function(){return"accepted"===e.props.order.status?"accepted":"denied"===e.props.order.status?"denied":"pending"},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setUnreadCount()}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setUnreadCount()}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.onSave,n=e.onRemove,s=e.isShop,c=e.loggedInUser,o=this.props.inModal?"modal-order-preview":"",i=this.state.showUserModal?"grid":"hidden",l=this.state.showUserModal?P.r:P.j,u=this.state.user;return t?r.a.createElement("div",{className:"order-preview ".concat(o," ").concat(this.orderClass)},s&&r.a.createElement("div",{className:"order-preview-details"},r.a.createElement("p",null,t.buyer.fullName," ",r.a.createElement("span",null,"Wants to Adopt")," ",t.pet.name),r.a.createElement("div",{className:"contact-user-actions-btns"},r.a.createElement("button",{className:"order-data-btn",onClick:this.onToggleModal},r.a.createElement(T.a,{icon:l})),r.a.createElement("div",null,r.a.createElement("button",{className:"order-data-btn",onClick:this.onToggleChat},r.a.createElement(T.a,{icon:P.d}))))),!s&&c._id===t.buyer._id&&r.a.createElement("div",null,r.a.createElement(z.b,{to:"/shop/".concat(t.shop._id)},r.a.createElement("p",null," ",r.a.createElement("span",null,"Request to adopt ")," ",t.pet.name,r.a.createElement("span",null," from:")," ",t.shop.name," ",t.shop.type," "))),r.a.createElement("div",{className:"order-actions-btns-box"},s&&r.a.createElement("button",{className:"accept-order-btn order-btn",onClick:function(){a(t,"accepted")}},"Accept"),s&&r.a.createElement("button",{className:"pending-order-btn order-btn",onClick:function(){a(t,"pending")}},"Pending"),s&&r.a.createElement("button",{className:"reject-order-btn order-btn",onClick:function(){a(t,"denied")}},"Reject"),(s||!s&&c._id===t.buyer._id)&&r.a.createElement("button",{className:"remove-order-btn order-btn",onClick:function(){n(t._id)}},"Remove")),s&&u&&r.a.createElement(ft,{user:u,display:i})):r.a.createElement("h3",{style:{display:"none"}},"loading...")}}]),a}(n.Component),gt={toggleChat:Xe},bt=Object(m.b)((function(e){return{chats:e.chatReducer.chats,loggedInUser:e.userReducer.loggedInUser}}),gt)(vt),Et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={msgDivClass:"hidden"},e.changePetAdoptionStatus=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.props.pets.find((function(e){return e._id===a.pet._id}))).isAdopted=!0,e.props.savePet(n),e.props.history.push("/pet");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSave=function(){var t=Object(f.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.orders.find((function(e){return"accepted"===e.status&&e.pet._id===a.pet._id}))||"accepted"!==n){t.next=6;break}e.setState({msgDivClass:""}),setTimeout((function(){e.setState({msgDivClass:"hidden"})}),1500),t.next=11;break;case 6:return a.status=n,t.next=9,e.props.saveOrder(a);case 9:e.props.loadOrders(e.props.filterById,e.props.orderFilterName),"accepted"===n&&(console.log("is it?"),e.changePetAdoptionStatus(a));case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.props.removeOrder(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.loadOrders(this.props.filterById,this.props.orderFilterName)}},{key:"render",value:function(){var e=this,t=this.props.orders,a=!!this.props.inModal;return t?r.a.createElement("div",{className:"order-list flex column"},r.a.createElement("div",{className:"doubleAccept ".concat(this.state.msgDivClass)},"Only one approval please."),t.map((function(t){return r.a.createElement(bt,{isShop:e.props.isShop,order:t,loggedInUser:e.props.loggedInUser,inModal:a,onRemove:e.onRemove,onSave:e.onSave})}))):r.a.createElement("h1",null,"LOADING...")}}]),a}(n.Component),yt={loadOrders:nt,saveOrder:rt,removeOrder:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze.remove(e);case 2:a({type:"REMOVE_ORDER",orderId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setFilter:function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}},savePet:R},Ot=Object(p.f)(Object(m.b)((function(e){return{pets:e.petReducer.pets,orders:e.orderReducer.orders,loggedInUser:e.userReducer.loggedInUser}}),yt)(Et));function wt(e){var t=e.isOpen,a=e.isShop,n=e.orderFilterName,s=e.filterById,c=e.onToggleOrderModal;return r.a.createElement("div",{className:"orderlist-modal ".concat(t)},r.a.createElement("h2",null,"My Adoption Requests"),r.a.createElement(Ot,{isShop:a,orderFilterName:n,filterById:s,inModal:!0}),r.a.createElement("div",{className:"flex column align-center"},r.a.createElement("button",{className:"close-modal",onClick:c},"Close")))}var jt=a(60),xt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={lat:32.0853,lng:34.7818,zoom:16,loc:"Info Window"},e.onMarkerClick=function(e,t,a){},e.onMapClicked=function(t,a,n){e.setState({lat:n.latLng.lat(),lng:n.latLng.lng()})},e.onMapPassLoc=function(){e.state({lat:e.props.lat,lng:e.props.lng})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({lat:this.props.lat,lng:this.props.lng,zoom:14,loc:this.props.name})}},{key:"render",value:function(){return r.a.createElement(jt.Map,Object(J.a)({className:"map",initialCenter:this.state,center:this.state,onClick:this.onMapClicked,google:this.props.google,zoom:this.state.zoom},"className","map"),r.a.createElement(jt.Marker,{position:this.state,name:"Current location"}),r.a.createElement(jt.InfoWindow,{position:this.state,visible:!0},r.a.createElement("div",null,r.a.createElement("h4",null,this.state.loc))))}}]),a}(r.a.Component),Ct=Object(jt.GoogleApiWrapper)({apiKey:"AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio"})(xt),St=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={shop:{},shopPets:[],shopOwner:"",isOpenReviews:!1,isOpenOrders:!1,currReview:{txt:"",rate:""}},e.loadShopData=Object(f.a)(h.a.mark((function t(){var a,n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadPets();case 3:return t.next=5,e.props.getShopById(a);case 5:return e.setState({shop:Object(K.a)({},e.props.currShop)}),t.next=8,te.getById(e.props.currShop.owner._id);case 8:return n=t.sent,console.log("owner from DB",n),t.next=12,e.setState({shopOwner:Object(K.a)({},n)});case 12:return r=e.props.pets.filter((function(t){if(t.shop)return t.shop._id===e.state.shop._id})),t.next=15,e.setState({shopPets:Object(we.a)(r)});case 15:case"end":return t.stop()}}),t)}))),e.onRemove=function(t){e.props.removePet(t)},e.onEdit=function(){console.log("edit")},e.handleInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return Object(K.a)(Object(K.a)({},e),{},{currReview:Object(K.a)(Object(K.a)({},e.currReview),{},Object(J.a)({},n,r))})}))},e.onAddReview=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=Object(K.a)({},e.state.shop),(r=Object(K.a)({},e.state.currReview)).id="r".concat(100+n.reviews.length+1),s=e.props.loggedInUser,r.by={_id:s._id,fullName:s.fullName,imgUrl:s.imgUrl},n.reviews.unshift(r),t.next=9,e.props.saveShop(n);case 9:e.loadShopData();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleOrderModal=function(){e.setState(Object(K.a)(Object(K.a)({},e.state),{},{isOpenOrders:!e.state.isOpenOrders}))},e.onToggleReviewModal=function(){e.setState(Object(K.a)(Object(K.a)({},e.state),{},{isOpenReviews:!e.state.isOpenReviews}))},e.drawStars=function(e){for(var t="",a=0;a<e;a++)t+="\u2b50";return t},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadShopData();case 2:M.animateScroll.scrollToTop();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.shop,a=this.state.shopOwner,n=this.state.isOpenOrders?"":"hidden";Object.keys(this.state.shop).length>0&&(this.props.loggedInUser._id,this.props.currShop.owner._id);return r.a.createElement("section",null,t.owner&&t.location&&t.reviews?r.a.createElement("div",{className:"shop-details-main-box"},r.a.createElement("div",{className:"shop-details-header"},r.a.createElement("h2",{className:"shop-details-heading"},t.name),r.a.createElement("div",{className:"shop-rate-box"},r.a.createElement(T.a,{className:"star-icon",icon:P.p}),t&&r.a.createElement("p",{className:"shop-rate-rating"},t.rate.rating,"  "),t&&r.a.createElement("p",{className:"shop-rate-count"},"(",t.rate.count,")  "))),r.a.createElement("div",{className:"shop-details-img-box"},t.imgUrls?t.imgUrls.map((function(e,t){return r.a.createElement("img",{className:"shop-details-img-".concat(t),src:e})})):""),r.a.createElement("div",{className:"top-screen-box"},r.a.createElement("div",{className:"shop-details-section"},r.a.createElement("div",{className:"shop-owner-details"},r.a.createElement("img",{className:"shop-owner-img",src:t.owner.imgUrl}),r.a.createElement("div",{className:"contact-box"},a.gender&&r.a.createElement(T.a,{className:"contact-icon",icon:"Male"===a.gender?P.k:P.h}),r.a.createElement("p",null,t.owner.fullName)),r.a.createElement("div",{className:"contact-box"},r.a.createElement(T.a,{className:"contact-icon",icon:P.m}),r.a.createElement("p",null,t.owner.contact.phone)),r.a.createElement("div",{className:"contact-box"},r.a.createElement(T.a,{className:"contact-icon",icon:P.f}),r.a.createElement("p",null,t.owner.contact.email))),this.state.shop.owner._id===this.props.loggedInUser._id&&r.a.createElement("div",{className:"order-list-box"},r.a.createElement("button",{className:"order-modal-button",onClick:this.onToggleOrderModal},"Adoption Requests"),r.a.createElement(wt,{isOpen:n,isShop:!0,orderFilterName:"shop._id",filterById:this.state.shop._id,onToggleOrderModal:this.onToggleOrderModal}))),r.a.createElement("div",{className:"shop-description"},r.a.createElement("p",null,t.desc))),r.a.createElement("div",{className:"bottom-screen-box"},r.a.createElement("div",{className:"reviews-box"},r.a.createElement("h3",null,"What they say about us"),r.a.createElement("button",{className:"open-reviews-btn",onClick:this.onToggleReviewModal},this.state.isOpenReviews?"Close":"Tell Us What You Think"),r.a.createElement("div",{className:this.state.isOpenReviews?"review-modal":"hidden"},r.a.createElement("form",{className:"review-form"},r.a.createElement("div",{className:"flex column"},r.a.createElement(Fe.a,{id:"standard-textarea",label:"Your Review",placeholder:"Write your review",multiline:!0,name:"txt",onChange:this.handleInput}),r.a.createElement($.a,null,r.a.createElement(Z.a,{htmlFor:"rate"},"Your rate"),r.a.createElement(X.a,{native:!0,onChange:this.handleInput,inputProps:{name:"rate"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"1"},"1")))),r.a.createElement("button",{className:"add-review-btn",onClick:this.onAddReview},"Publish"))),t.reviews?r.a.createElement("ul",{className:"reviews-list"},t.reviews.map((function(t){return r.a.createElement("li",{className:"review"},r.a.createElement("p",{className:"review-text"},t.txt),r.a.createElement("p",null,r.a.createElement("span",null,"Rate: "),e.drawStars(t.rate)),r.a.createElement("p",null,r.a.createElement("span",null,"From: "),t.by.fullName))}))):r.a.createElement("h1",null,"Loading Reviews...")),r.a.createElement("div",{className:"shop-location-box"},r.a.createElement("div",{className:"map-container"},r.a.createElement(Ct,{lat:t.location.lat,lng:t.location.lng,name:t.location.name})),r.a.createElement(T.a,{className:"arrow-icon",icon:P.b}),r.a.createElement("div",{className:"shop-location-name"},r.a.createElement("h2",null,"We are located at ",t.location.name)))),r.a.createElement("div",{className:"pets-box"},r.a.createElement("h2",{className:"our-pets-heading"},"Our Pets"),r.a.createElement(Pe,{pets:this.state.shopPets,onRemove:this.onRemove}))):r.a.createElement("h1",null,"Loading..."))}}]),a}(n.Component),kt={getShopById:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.getById(e);case 2:n=t.sent,a({type:"GET_SHOP",shop:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveShop:be,loadPets:U,savePet:R},Nt=Object(m.b)((function(e){return{currShop:e.shopReducer.currShop,pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser,currChat:e.chatReducer.currChat}}),kt)(St),It=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{userName:"",password:""},showModal:!1},e.loginHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{loginCred:Object(K.a)(Object(K.a)({},e.loginCred),{},Object(J.a)({},n,r))}}))},e.closeModal=function(){e.props.onNavBarClick()},e.doLogin=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,r=n.userName,s=n.password,r&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:return c={userName:r,password:s},t.next=7,e.props.login(c);case 7:e.props.loggedInUser.chats&&e.props.loggedInUser.chats.forEach(function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getChatById(a._id);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),console.log(e.props),e.setState({loginCred:{userName:"",password:""}}),e.props.onNavBarClick();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",null,r.a.createElement("div",{className:"login-modal"},r.a.createElement("form",{onSubmit:this.doLogin},r.a.createElement(Fe.a,{autoFocus:!0,required:!0,type:"text",name:"userName",value:this.state.loginCred.userName,onChange:this.loginHandleChange,placeholder:"User Name"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Fe.a,{required:!0,type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,(e={onClick:this.doLogin,variant:"text"},Object(J.a)(e,"variant","outlined"),Object(J.a)(e,"color","primary"),e),"Login"))))}}]),a}(n.Component),_t={login:ie,logout:ue,signup:le,removeUser:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.remove(e);case 3:a({type:"USER_REMOVE",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:se,getChatsByUserId:function(e){return console.log("chatId",e),function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.getByUserId(e);case 3:n=t.sent,console.log(n),a({type:"LOAD_CHATS",chat:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("UserActions: err in loadUsers",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getChatById:Qe},Ut=Object(m.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),_t)(It),Rt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={chats:null,chatsReady:!1,usersInfo:{}},e.setUsersData=function(){e.setState({chatsReady:!0}),e.state.chats.forEach(function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.getMiniById(e.getRecipientId(a.members));case 2:n=t.sent,e.setRecipientsInfo(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.onChatListClicked=function(t){e.props.toggleChat({chatId:t}),e.props.onToggleChatsList()},e.displayChatDetails=function(t){console.log(t);var a=e.getRecipientId(t.members);if(e.state.usersInfo[a])return r.a.createElement("div",{key:t._id,className:"chat-list-row flex",onClick:function(){return e.onChatListClicked(t._id)}},r.a.createElement("img",{src:e.state.usersInfo[a].imgUrl,alt:""}),r.a.createElement("div",null,e.state.usersInfo[a].name))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props),this.props.chats.length>0&&this.setState({chats:Object(we.a)(this.props.chats)},(function(){return e.setUsersData()}))}},{key:"componentDidUpdate",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t!==this.props&&this.setState({chats:Object(we.a)(this.props.chats)},(function(){return a.setUsersData()}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setRecipientsInfo",value:function(){var e=Object(f.a)(h.a.mark((function e(t){var a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("miniuser:",t),a=Object(J.a)({},t._id,{imgUrl:t.imgUrl,name:t.name}),t.imgUrl||(n=t.fullName.split(" "),a[t._id].imgUrl="https://ui-avatars.com/api/?name=".concat(n[0],"+").concat(n[1])),!t.isOwner){e.next=9;break}return e.next=6,pe.getMiniByUserId(t._id);case 6:r=e.sent,a[t._id].name=r.name,a[t._id].imgUrl=r.imgUrl;case 9:this.setState({usersInfo:Object(K.a)(Object(K.a)({},this.state.usersInfo),a)});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecipientId",value:function(e){return e[0]===this.props.loggedInUser._id?e[1]:e[0]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chat-list-container"},this.state.chatsReady&&this.state.chats.map((function(t){return e.displayChatDetails(t)}))||r.a.createElement("div",null,"No chats to load"))}}]),a}(n.Component),Dt={getChatById:Qe,toggleChat:Xe},At=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown,chats:e.chatReducer.chats,currChat:e.chatReducer.currChat,loggedInUser:e.userReducer.loggedInUser}}),Dt)(Rt),Tt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showLoginModal:!1,showChatsList:!1,shop:"",shopId:"",pathName:"",unReadMsgCount:0,chats:[]},e.componentDidUpdate=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.user||a.user._id===e.props.user._id){t.next=5;break}return t.next=3,e.props.loadShops();case 3:n=e.props.shops,e.props.user&&(r=e.props.user,s=r._id,(c=n.find((function(e){return e.owner._id===s})))&&e.setState({shopId:c._id,shop:c}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onNavBarClick=function(){e.setState({showLoginModal:!e.state.showLoginModal}),e.setState({showChatsList:!1})},e.onLogOut=function(){e.props.logout(),e.props.history.push("/"),e.setState({showChatsList:!1}),e.props.toggleChat()},e.onToggleChatsList=function(){e.setState({showChatsList:!e.state.showChatsList})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({pathName:this.props.history.location.pathname})}},{key:"setUnreadMsgCount",value:function(){var e=this,t=0;console.log(this.props.chats),0!==this.state.chats.length&&(this.state.chats.forEach((function(a){a.msgs.some((function(t){return!t.isRead&&t.authorId!==e.props.user._id}))&&t++})),console.log("Unread msgs:",t),this.setState({unReadMsgCount:t}))}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",null,r.a.createElement("div",{className:"/"===this.props.history.location.pathname?"main-nav":"main-nav-not-home"},r.a.createElement("div",{className:"left-nav"},r.a.createElement(z.c,{to:"/"},r.a.createElement("img",{className:"logo-up",src:a(208),alt:"Home"})),r.a.createElement(z.c,{className:"nav-btn",to:"/pet"},"Gallery")),r.a.createElement("div",{className:"right-nav"},t&&t.isOwner&&this.state.shopId&&r.a.createElement(z.c,{className:"nav-btn shop-btn",to:"/shop/".concat(this.state.shopId)}," ",r.a.createElement("img",{className:"shop-img",src:this.state.shop.imgUrls[0],alt:""})," ",this.state.shop.name),t&&!t.isOwner&&!t.isGuest&&r.a.createElement(z.c,{className:"nav-btn",to:"/profile/".concat(t._id)},t.fullName),t&&!t.isGuest&&r.a.createElement("div",{className:"chats-btn nav-btn",onClick:this.onToggleChatsList},r.a.createElement(T.a,{className:"send-icon",icon:P.e}),this.state.unReadMsgCount>0&&r.a.createElement("div",{className:"unread-msgs-count"},this.state.unReadMsgCount)),t&&t.isGuest&&r.a.createElement("button",{className:"login-btn nav-btn",onClick:function(){e.onNavBarClick()}},"Login"),t&&!t.isGuest&&r.a.createElement("button",{className:"logout-btn nav - btn",onClick:function(){e.onLogOut()}},"Logout"),this.state.showLoginModal&&r.a.createElement(Ut,{onNavBarClick:this.onNavBarClick}),t&&t.isGuest&&r.a.createElement(z.c,{className:"nav-btn",to:"/signup"},"Sign Up"))),this.state.showChatsList&&r.a.createElement(At,{onToggleChatsList:this.onToggleChatsList}))}}]),n}(n.Component),Pt={loadShops:ge,logout:ue,toggleChat:Xe},Mt=Object(p.f)(Object(m.b)((function(e){return{user:e.userReducer.loggedInUser,shops:e.shopReducer.shops,chats:e.chatReducer.chats}}),Pt)(Tt)),Bt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.getUserOrders=function(){e.props.loadOrders(e.state.user._id,"buyer._id")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,te.getById(t);case 3:a=e.sent,this.setState({user:Object(K.a)({},a)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,t=this.props.loggedInUser;return e?r.a.createElement("div",{className:"flex column align-center user-profile "},r.a.createElement(ft,{user:e,display:"grid"}),r.a.createElement("hr",null),e._id===t._id&&r.a.createElement("div",{className:"user-profile-adoptions flex column"},r.a.createElement("h2",null,"My Adoption Requests"),r.a.createElement(Ot,{isShop:!1,orderFilterName:"buyer._id",filterById:e._id}))):r.a.createElement("h3",null,"Loading...")}}]),a}(n.Component),Lt={loadOrders:nt},Ft=Object(m.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Lt)(Bt),Ht=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer full"},r.a.createElement(z.c,{to:"/"},r.a.createElement("img",{className:"logo-footer",src:a(209),alt:"Home"})),r.a.createElement("p",null,"Powered By ADA Systems."),r.a.createElement("div",{className:"social"},r.a.createElement("a",{href:"https://www.facebook.com/iHeartDogscom",target:"_blank"},r.a.createElement(ct.a,{size:30})),r.a.createElement("a",{href:"https://twitter.com/AdoptCatsDogs",target:"_blank"},r.a.createElement(ut.a,{size:30})),r.a.createElement("a",{href:"https://www.instagram.com/charlie_retriever/?hl=en",target:"_blank"},r.a.createElement("img",{className:"insta-logo",src:a(210),alt:""}))))}}]),n}(n.Component),Gt=a(131),zt=a.n(Gt),qt=function(){var e;return{setup:function(){e=zt()("")},on:function(t,a){e.on(t,a)},off:function(t,a){e.off(t,a)},emit:function(t,a){console.log("socketservice:",t,"Data",a),e.emit(t,a)},terminate:function(){e=null}}}();window.socketService=qt;var Vt=qt;var Wt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={chat:{topic:"",members:[],msgs:[]},msg:{authorId:"",createdAt:"",txt:"",isRead:!1},recipient:{},sender:{}},e.setRecipientInfo=function(){var t=Object(f.a)(h.a.mark((function t(a){var n,r,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,te.getMiniById(a);case 2:if(n=t.sent,console.log(n),n.imgUrl||(r=n.name.split(" "),n.imgUrl="https://ui-avatars.com/api/?name=".concat(r[0],"+").concat(r[1])),!n.isOwner){t.next=11;break}return t.next=8,pe.getMiniByUserId(n._id);case 8:s=t.sent,n.name=s.name,n.imgUrl=s.imgUrl;case 11:e.setState({recipient:n});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.setSocket=function(){console.log(e.state),Vt.setup(),Vt.emit("chat topic",e.state.chat.topic),Vt.on("chat addMsg",e.addMsg)},e.creatNewChat=function(){return{topic:"".concat(e.state.sender._id,"__").concat(e.state.recipient._id),members:[e.state.sender._id,e.state.recipient._id],msgs:[]}},e.addMsg=function(){var t=Object(f.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({chat:Object(K.a)(Object(K.a)({},e.state.chat),{},{msgs:[].concat(Object(we.a)(e.state.chat.msgs),[a])})},(function(){return e.props.saveChat(e.state.chat)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendMsg=function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={authorId:e.props.loggedInUser._id,createdAt:new Date,txt:e.state.msg.txt,isRead:!1},t.next=4,e.setState({msg:Object(K.a)({},n)});case 4:Vt.emit("chat newMsg",e.state.msg),e.setState({msg:{authorId:"",createdAt:"",txt:"",isRead:!1}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.msgHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{msg:Object(K.a)(Object(K.a)({},e.msg),{},Object(J.a)({},n,r))}}))},e.onClose=function(){e.props.toggleChat()},e.displayMsg=function(t,a){var n="message-row ",s=new Date(t.createdAt),c=t.authorId===e.state.sender._id;return n+=c?"sender":"recipient",r.a.createElement("div",{className:n,key:a},!c&&r.a.createElement("img",{src:e.state.recipient.imgUrl,alt:""}),r.a.createElement("div",{className:"message-content"},r.a.createElement("div",{className:"txt"},t.txt),r.a.createElement("div",{className:"date"},s.getHours()+":"+s.getMinutes())))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(h.a.mark((function e(){var t,a,n,r=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.loggedInUser,this.setState({sender:t}),!this.props.currChatInfo.chatId){e.next=9;break}a=this.props.chats.find((function(e){return e._id===r.props.currChatInfo.chatId})),this.setState({chat:a}),this.setRecipientInfo(this.getRecipientId(a.members)),this.setSocket(),e.next=14;break;case 9:return e.next=11,this.setRecipientInfo(this.props.currChatInfo.userId);case 11:n=this.getChatIfExists()||this.creatNewChat(),this.setState({chat:n},(function(){return r.setSocket()})),console.log(this.state);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Vt.off("chat addMsg",this.addMsg),Vt.terminate()}},{key:"getChatIfExists",value:function(){var e=this,t=this.props.chats.find((function(t){return t.members.includes(e.state.sender._id)&&t.members.includes(e.state.recipient._id)}));return console.log(t),t}},{key:"getRecipientId",value:function(e){var t=this;return e.find((function(e){return e!==t.props.loggedInUser._id}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chat-container"},r.a.createElement("section",{className:"chat-title flex space-evenly"},this.state.recipient&&r.a.createElement("span",null,this.state.recipient.name),r.a.createElement("button",{className:"btn-close btn",onClick:this.onClose},r.a.createElement(T.a,{className:"close-icon",icon:P.q}))),r.a.createElement("section",{className:"msgs-container"},this.state.chat.msgs&&this.state.chat.msgs.slice(0).reverse().map((function(t,a){return e.displayMsg(t,a)}))),r.a.createElement("form",{onSubmit:this.sendMsg},r.a.createElement("section",{className:"input-container flex space-around"},r.a.createElement("input",{type:"text",value:this.state.msg.txt,onChange:this.msgHandleChange,name:"txt",autoComplete:"off",placeholder:"Type Message Here"}),r.a.createElement("button",{className:"btn-send"},r.a.createElement(T.a,{className:"send-icon",icon:P.n})))))}}]),a}(n.Component),Yt={loadPets:U,saveChat:function(e){return function(){var t=Object(f.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_CHAT",chatToSave:n}):a({type:"ADD_CHAT",chatToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getChatById:Qe,updateUser:oe,toggleChat:Xe},Jt=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown,chats:e.chatReducer.chats,currChatInfo:e.chatReducer.currChatInfo,pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser}}),Yt)(Wt),Kt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isChatShown:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({isChatShown:this.props.isChatShown})}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({isChatShown:this.props.isChatShown}),console.log(this.props.isChatShown)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(Mt,{onToggleChatsList:this.onToggleChatsList})),r.a.createElement("main",null,this.state.isChatShown&&r.a.createElement(Jt,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{component:Nt,path:"/shop/:id"}),r.a.createElement(p.a,{component:ht,path:"/details/:id?"}),r.a.createElement(p.a,{component:ze,path:"/edit/:id?"}),r.a.createElement(p.a,{component:Oe,path:"/signup/:type?"}),r.a.createElement(p.a,{component:Ft,path:"/profile/:id"}),r.a.createElement(p.a,{component:Le,path:"/pet/:filterType?"}),r.a.createElement(p.a,{component:Y,path:"/"}))),r.a.createElement("footer",null,r.a.createElement(Ht,null)))}}]),a}(n.Component),Qt=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown}}))(Kt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Xt=a(49),Zt=a(132),$t={pets:[],filterBy:{type:"",gender:"",breed:"",size:"",txt:"",distance:{lat:0,lon:0,range:0}}};var ea={shops:[],currShop:{}};var ta={_id:"guest",fullName:"guest",isGuest:!0},aa={loggedInUser:ta,users:[]};var na={orders:[],filterBy:{shop:""}};var ra={isChatShown:!1,currChatInfo:null,chats:[],currChatId:"",filterBy:{}};var sa=Object(Xt.c)({petReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PETS":return Object(K.a)(Object(K.a)({},e),{},{pets:Object(we.a)(t.pets)});case"ADD_PET":return Object(K.a)(Object(K.a)({},e),{},{pets:[].concat(Object(we.a)(e.pets),[t.petToSave])});case"EDIT_PET":return console.log(t.petToSave),Object(K.a)(Object(K.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.petToSave._id?t.petToSave:e}))});case"REMOVE_PET":return Object(K.a)(Object(K.a)({},e),{},{pets:e.pets.filter((function(e){return e._id!==t.petId}))});case"SET_FILTER":return console.log(t.filterBy),Object(K.a)(Object(K.a)({},e),{},{filterBy:Object(K.a)(Object(K.a)({},e.filterBy),t.filterBy)});default:return e}},shopReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SHOPS":return Object(K.a)(Object(K.a)({},e),{},{shops:Object(we.a)(t.shops)});case"GET_SHOP":return Object(K.a)(Object(K.a)({},e),{},{currShop:JSON.parse(JSON.stringify(t.shop))});case"ADD_SHOP":return Object(K.a)(Object(K.a)({},e),{},{shops:[].concat(Object(we.a)(e.shops),[t.shopToSave])});case"EDIT_SHOP":return Object(K.a)(Object(K.a)({},e),{},{shops:e.shops.map((function(e){return e._id===t.shopToSave._id?t.shopToSave:e}))});case"REMOVE_SHOP":return Object(K.a)(Object(K.a)({},e),{},{shops:e.shops.filter((function(e){return e._id!==t.shopId}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(K.a)(Object(K.a)({},e),{},{loggedInUser:t.user});case"UPDATE_USER":return Object(K.a)(Object(K.a)({},e),{},{loggedInUser:t.userToSave});case"USER_REMOVE":return Object(K.a)(Object(K.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(K.a)(Object(K.a)({},e),{},{users:t.users});case"LOGOUT":return Object(K.a)(Object(K.a)({},e),{},{loggedInUser:ta});default:return e}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:na,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ORDERS":return Object(K.a)(Object(K.a)({},e),{},{orders:Object(we.a)(t.orders)});case"ADD_ORDER":return Object(K.a)(Object(K.a)({},e),{},{orders:[].concat(Object(we.a)(e.orders),[t.orderToSave])});case"EDIT_ORDER":return Object(K.a)(Object(K.a)({},e),{},{orders:e.orders.map((function(e){return e._id===t.orderToSave._id?t.orderToSave:e}))});case"REMOVE_ORDER":return Object(K.a)(Object(K.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});case"SET_FILTER":return Object(K.a)(Object(K.a)({},e),{},{filterBy:Object(K.a)(Object(K.a)({},e.filterBy),t.filterBy)});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ra,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_CHAT":return t.chatInfo?Object(K.a)(Object(K.a)({},e),{},{isChatShown:!0,currChatInfo:Object(K.a)({},t.chatInfo)}):Object(K.a)(Object(K.a)({},e),{},{isChatShown:!1,currChatInfo:Object(K.a)({},t.chatInfo)});case"LOAD_CHATS":return Object(K.a)(Object(K.a)({},e),{},{chats:Object(we.a)(t.chats)});case"GET_CHAT":return Object(K.a)(Object(K.a)({},e),{},{chats:[].concat(Object(we.a)(e.chats),[t.chat])});case"ADD_CHAT":return console.log("IN REDUCER",t.chatToSave),Object(K.a)(Object(K.a)({},e),{},{chats:[].concat(Object(we.a)(e.chats),[t.chatToSave])});case"EDIT_CHAT":return Object(K.a)(Object(K.a)({},e),{},{chats:e.chats.map((function(e){return e._id===t.chatToSave._id?t.chatToSave:e}))});case"REMOVE_CHAT":return Object(K.a)(Object(K.a)({},e),{},{chats:e.chats.filter((function(e){return e._id!==t.chatId}))});case"SET_FILTER":return Object(K.a)(Object(K.a)({},e),{},{filterBy:Object(K.a)(Object(K.a)({},e.filterBy),t.filterBy)});default:return e}}}),ca=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xt.d,oa=Object(Xt.e)(sa,ca(Object(Xt.a)(Zt.a)));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:oa},r.a.createElement(z.a,null,r.a.createElement(Qt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.4f3b5fe0.chunk.js.map