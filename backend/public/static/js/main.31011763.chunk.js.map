{"version":3,"sources":["assets/img/category sync /^/.*/.png$","assets/img/category/cat.png","assets/img/category/dog.png","assets/img/category/farm.png","assets/img/category/other.png","assets/img/hero1.jpg","assets/img/about1.png","assets/img/about2.png","assets/img/about3.png","assets/img/logo.png","assets/img/logo-with-title.png","assets/img/insta.png","cmps/TagsFilter.jsx","services/httpService.js","services/petService.js","store/actions/petActions.js","cmps/FilterSearch.jsx","cmps/CategoryList.jsx","cmps/PetFilter.jsx","cmps/Hero.jsx","cmps/About.jsx","pages/Home.jsx","cmps/Geolocation.jsx","services/userService.js","store/actions/userActions.js","services/shopService.js","store/actions/shopActions.js","pages/SignUp.jsx","cmps/PetPreview.jsx","cmps/PetList.jsx","pages/PetApp.jsx","pages/PetEdit.jsx","services/chatService.js","store/actions/chatActions.js","services/orderService.js","store/actions/orderActions.js","pages/PetDetails.jsx","cmps/UserDataModal.jsx","cmps/OrderPreview.jsx","cmps/OrderList.jsx","cmps/GoogleMap.jsx","pages/ShopDetails.jsx","cmps/LoginModal.jsx","cmps/ChatsList.jsx","cmps/NavBar.jsx","pages/userProfile.jsx","cmps/Footer.jsx","services/socketService.js","cmps/Chat.jsx","App.jsx","serviceWorker.js","store/reducers/petReducer.js","store/reducers/shopReducer.js","store/reducers/userReducer.js","store/reducers/orderReducer.js","store/reducers/chatReducer.js","store/store.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","TagsFilter","state","gender","txt","male","female","distance","range","onGenderChange","a","genderDefault","console","log","setState","onDistanceChange","ev","target","value","onShow","props","onToggleFilterModal","onClear","this","tag","index","key","htmlFor","Switch","type","name","className","InputLabel","onClick","icon","faMars","faVenus","FormGroup","displayGenderBtns","Select","native","onChange","handleChange","inputProps","aria-label","Input","min","Button","variant","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","method","url","res","dir","response","status","window","location","assign","petService","query","getPetById","save","remove","filterBy","httpService","params","filtered","filterPets","pet","_id","petId","pets","filteredPets","trim","words","split","length","forEach","word","filter","toLowerCase","includes","size","summary","description","shop","fullName","userLoc","lat","lng","lon","petLoc","distanceFromUser","SphericalUtil","computeDistanceBetween","loadPets","dispatch","savePet","petToSave","removePet","setFilter","_FilterSearch","isClearShown","onInputChange","parent","onSearch","keyPress","keyCode","history","push","prevProps","autoComplete","placeholder","onKeyDown","faSearch","faTimesCircle","mapDispatchToProps","FilterSearch","withRouter","connect","petReducer","CategoryList","dog","cat","farm","other","imgClicked","onCategoryChange","classStr","src","require","alt","displayTypesBtn","_PetFilter","breed","position","isModalShown","tags","getUserPosition","coords","latitude","longitude","onFilterChange","obj","updateFilterAndLoad","handleInput","field","prevState","onApplyFilter","resetFilter","onToggleTag","splice","indexOf","navigator","geolocation","getCurrentPosition","error","message","PetFilter","Hero","bgImage","bgImageAlt","strength","style","width","About","to","_Home","user","Home","userReducer","loggedInUser","Geolocation","setLocToFind","loc","findLocation","getLatLng","cb","geocoder","find","err","latLang","getGeolocation","OutlinedInput","event","signupHandleChange","React","login","logout","signup","getUsers","getById","userId","update","userCred","sessionStorage","clear","loadUsers","userService","users","updateUser","userToSave","userCreds","_user","shopService","getByUserId","updatedAt","Date","now","toLocaleString","createdAt","reviews","shopId","loadShops","shops","saveShop","shopToSave","_SignUp","userAdopt","userShop","signupCred","setUserAdopt","setUserShop","doSignup","preventDefault","username","password","address","email","phone","msg","imgUrl","substring","isOwner","isGuest","lastSignUpUser","signUpShop","currUser","title","desc","locName","owner","parseFloat","signupCreds","latLng","onSubmit","FormControl","label","multiline","getUserById","SignUp","shopReducer","_PetPreview","isLiked","loveIconClass","onUpdateReaction","reaction","updatedReacts","reacts","react","count","JSON","parse","stringify","isAdopted","class","imgUrls","PetPreview","PetList","onRemove","onEdit","_PetApp","sortBy","isReady","resetFitler","_","scroll","scrollToTop","PetApp","_PetEdit","checked","onSubmitForm","match","petToEdit","TextField","defaultValue","adoptedAt","toISOString","substr","InputLabelProps","shrink","bDate","isInRisk","PetEdit","chatService","filterName","queryStr","chat","chatId","getChatById","toggleChat","chatInfo","orderService","order","orderId","loadOrders","orders","saveOrder","orderToSave","_PetDetails","isOwnerOfPet","adoptButton","currComment","AdoptionModalMsg","getCurrPet","petToShow","onAdopt","buyer","onRemovePet","onToggleChat","handleCommentInput","onComment","comment","comments","by","unshift","getComponentData","cuurComment","getTimeToString","time","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","getUserId","ownerId","FacebookShareButton","quote","hashtag","FacebookIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","faHeart","faCalendarAlt","toFixed","faExpandArrowsAlt","faVenusMars","faAlignLeft","faStar","rate","rating","fullWidth","PetDetails","UserDataModal","Fragment","birthDate","parseInt","familyStatus","numberOfKds","residence","petCondition","currrenPets","prevExperince","OrderPreview","showUserModal","showModal","orderClass","onSave","isShop","display","_OrderList","msgDivClass","changePetAdoptionStatus","orderCheck","setTimeout","filterById","orderFilterName","removeOrder","OrderList","orderReducer","_GoogleMap","zoom","onMarkerClick","marker","onMapClicked","mapProps","onMapPassLoc","initialCenter","center","google","visible","GoogleMap","GoogleApiWrapper","apiKey","_ShopDetails","shopPets","shopOwner","isOpenReviews","currReview","loadShopData","getShopById","currShop","onAddReview","review","onToggleReviewModal","drawStars","stars","i","faMale","faFemale","faMobileAlt","contact","faEnvelope","faAngleDoubleUp","ShopDetails","currChat","chatReducer","_LoginModal","loginCred","userName","loginHandleChange","closeModal","onNavBarClick","doLogin","chats","autoFocus","required","removeUser","getChatsByUserId","LoginModal","_ChatsList","usersInfo","onChatListClicked","displayChatDetails","getRecipientId","members","img","fullChat","recipientId","setStateWithRecipient","userInfo","ChatsList","isChatShown","_NavBar","showLoginModal","showChatsList","pathName","componentDidUpdate","onLogOut","onToggleChatsList","pathname","faComments","NavBar","_userProfile","getUserOrders","userProfile","Footer","href","socketService","socket","setup","io","on","eventName","off","emit","terminate","createSocketService","_Chat","topic","msgs","authorId","setChat","userChat","targetId","createChat","addMsg","initiate","saveChat","newMsg","sendMsg","msgHandleChange","onClose","displayMsg","idx","classTxt","isAuthor","targetImg","getHours","getMinutes","currChatInfo","targetName","chatID","faTimes","slice","reverse","faPaperPlane","loadChats","chatToSave","Chat","_App","component","path","App","Boolean","hostname","initialState","localLoggedinUser","currChatId","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.31011763.chunk.js","sourcesContent":["var map = {\n\t\"./cat.png\": 180,\n\t\"./dog.png\": 181,\n\t\"./farm.png\": 182,\n\t\"./other.png\": 183\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 179;","module.exports = __webpack_public_path__ + \"static/media/cat.269e723b.png\";","module.exports = __webpack_public_path__ + \"static/media/dog.1afb1629.png\";","module.exports = __webpack_public_path__ + \"static/media/farm.976d3f34.png\";","module.exports = __webpack_public_path__ + \"static/media/other.6672fc57.png\";","module.exports = __webpack_public_path__ + \"static/media/hero1.8b5847e5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/about1.679fdfa6.png\";","module.exports = __webpack_public_path__ + \"static/media/about2.18fa0a8f.png\";","module.exports = __webpack_public_path__ + \"static/media/about3.3f0198c1.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.9b0c6cc2.png\";","module.exports = __webpack_public_path__ + \"static/media/logo-with-title.85dfceb8.png\";","module.exports = __webpack_public_path__ + \"static/media/insta.e77ccb90.png\";","import React, { Component } from 'react';\r\n\r\nimport { Input,Button,Switch,FormGroup,InputLabel,Select } from '@material-ui/core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenus } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nexport class TagsFilter extends Component {\r\n    \r\n    state={\r\n        gender:{\r\n            txt:'',\r\n            male:false,\r\n            female:false\r\n        },\r\n        distance:{\r\n            range:0\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        // this.setState({...this.state)\r\n        console.log(this.props);\r\n    }\r\n\r\n    \r\n    onGenderChange=async (gender)=>{\r\n        let genderDefault={\r\n            male:false,\r\n            female:false\r\n        }\r\n        genderDefault = {...genderDefault,[gender]:!this.state.gender[gender]}\r\n        console.log(genderDefault);\r\n        await this.setState({...this.state,gender:{...genderDefault}})\r\n    }\r\n    onDistanceChange=async (ev)=>{\r\n        const distance=ev.target.value\r\n        console.log(distance);\r\n    }\r\n    \r\n    \r\n    \r\n    onShow=()=>{\r\n        if(this.state.gender.male!==this.gender.female) {\r\n            \r\n        }\r\n        // this.props.onFilterChange({'gender':gender})\r\n        console.log(this.state);\r\n        this.props.onToggleFilterModal();\r\n    }\r\n    onClear=()=>{\r\n\r\n    }\r\n    displayTags(tag,index){\r\n        return (\r\n            <div  key={index}>\r\n                <label htmlFor=\"\">{tag}</label>\r\n                <Switch type=\"checkbox\" name=\"\" value={tag} />\r\n            </div>\r\n        )\r\n    }\r\n    displayGenderBtns(){\r\n        const {gender}=this.state\r\n        return(\r\n            <section className=\"gender\">                    \r\n                <InputLabel htmlFor=\"\">Gender</InputLabel>\r\n                <div className={gender.male?'pet-gender pressed':'pet-gender'} onClick={()=>this.onGenderChange('male')}><FontAwesomeIcon  className=\" pet-gender-male-icon\"  icon={faMars} /></div>\r\n                <div className={gender.female?'pet-gender pressed':'pet-gender'} onClick={()=>this.onGenderChange('female')}><FontAwesomeIcon  className=\" pet-gender-female-icon\"  icon={faVenus} /></div>\r\n            </section>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        const tags = [\"Kids friendly\",\"Healthy\",\"Energetic\",\"Sterilized\"]\r\n\r\n        return (\r\n            <div className=\"tags-modal\">\r\n                <div className=\"container\">\r\n                <FormGroup>\r\n                    {this.displayGenderBtns()}\r\n                    <section>\r\n\r\n                        <InputLabel htmlFor=\"age\">Age</InputLabel>\r\n                            <Select\r\n                                \r\n                                native\r\n                                onChange={this.props.handleChange}\r\n                                inputProps={{\r\n                                    name: 'age',\r\n                                    id: 'age-native-simple',\r\n                                }}\r\n                                >\r\n                                    <option aria-label=\"None\" value=\"\" />\r\n                                    <option value={1}>Puppy</option>\r\n                                    <option value={7}>Grown up</option>\r\n                                    <option value={15}>Old</option>\r\n                            </Select>\r\n                    </section>\r\n                    <section>\r\n                    <InputLabel htmlFor=\"size\">Size</InputLabel>\r\n                            <Select\r\n                                native\r\n                                onChange={this.props.handleChange}\r\n                                inputProps={{\r\n                                    name: 'size',\r\n                                    id: 'age-native-simple',\r\n                                }}\r\n                                >\r\n                                <option aria-label=\"None\" value=\"\" />\r\n                                <option value=\"small\">Small</option>\r\n                                <option value=\"medium\">Medium</option>\r\n                                <option value=\"big\">Big</option>\r\n                            </Select>\r\n\r\n                    </section>\r\n                   \r\n                    <section>\r\n                            <InputLabel htmlFor=\"\">{'Distance(km)'}</InputLabel>\r\n                            <Input type=\"number\" name=\"\" min=\"1\" id=\"\" onChange={this.onDistanceChange}/>\r\n                    </section>\r\n                    {/* <section >\r\n                        {tags.map((tag,index) => displayTags(tag,index))}\r\n                    </section> */}\r\n                    <section className=\"btns-container\"></section>\r\n                        <Button variant=\"contained\" onClick={this.onShow}>Show</Button>\r\n                        <Button variant=\"contained\" onClick={this.onClear}>Clear</Button>\r\n                </FormGroup>  \r\n                </div>  \r\n             </div>\r\n        )\r\n    }\r\n}\r\n","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api'\r\n    : '//localhost:3002/api'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/');\r\n        }\r\n        throw err;\r\n    }\r\n}","import httpService from './httpService.js'\r\nimport {SphericalUtil} from \"node-geometry-library\";\r\nconst BASE_URL = '/pet'\r\n\r\nexport const petService = {\r\n    query,\r\n    getPetById,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy) {\r\n    let queryStr = '';\r\n    //todo - change after building backend\r\n    // if (filterBy){\r\n    //     filterBy.type = filterBy.type.charAt(0).toUpperCase()+filterBy.type.slice(1);\r\n    //     queryStr = '?' + Object.keys(filterBy).map(key => key + '=' + filterBy[key]).join('&');\r\n\r\n    // }    \r\n    const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n        params: filterBy\r\n    });\r\n    const filtered = filterPets(res, filterBy);\r\n    return filtered;\r\n}\r\nasync function getPetById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\nasync function save(pet) {\r\n    if (pet._id) {\r\n        // pet.updatedAt = new Date(date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${pet._id}`, pet)\r\n        return res;\r\n    } else {\r\n        // pet.createdAt = new Date(date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, pet)\r\n        return res;\r\n    }\r\n}\r\nasync function remove(petId) {\r\n    await httpService.delete(`${BASE_URL}/${petId}`)\r\n}\r\n\r\nfunction filterPets(pets, filterBy) {\r\n    if (!filterBy) return pets\r\n\r\n    let filteredPets = pets\r\n    if (filterBy.txt) {\r\n        filterBy.txt = filterBy.txt.trim(' ');\r\n        filterBy.txt = filterBy.txt.trim(',');\r\n\r\n        let words = filterBy.txt.split(' ');\r\n        if (words.length = 1) words = filterBy.txt.split(',');\r\n\r\n        words.forEach(word => {\r\n            filteredPets = filteredPets.filter(pet => {\r\n                if (pet.name.toLowerCase().includes(word) ||\r\n                    pet.type.toLowerCase().includes(word) ||\r\n                    pet.gender.toLowerCase().includes(word) ||\r\n                    pet.size.toLowerCase().includes(word) ||\r\n                    pet.summary.toLowerCase().includes(word) ||\r\n                    pet.description.toLowerCase().includes(word) ||\r\n                    pet.shop.fullName.toLowerCase().includes(word)) return pet\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    filteredPets = filteredPets.filter(pet => {\r\n        return pet.type.toLowerCase().includes(filterBy.type)\r\n    })\r\n\r\n\r\n    if (filterBy.distance.range) {\r\n        const userLoc = {lat: filterBy.distance.lat, lng: filterBy.distance.lon};\r\n        filteredPets = filteredPets.filter(pet => {\r\n            const petLoc = {lat:pet.location.lat, lng:pet.location.lng };\r\n            const distanceFromUser = SphericalUtil.computeDistanceBetween(userLoc, petLoc)/1000\r\n            console.log('distanceFromUser',distanceFromUser)\r\n            return  distanceFromUser <= filterBy.distance.range\r\n        })\r\n    }\r\n\r\n    return filteredPets\r\n}","import { petService } from \"../../services/petService.js\"\r\n\r\nexport function loadPets(filterBy) {\r\n    return async dispatch => {\r\n        const pets = await petService.query(filterBy);\r\n        dispatch({ type: 'LOAD_PETS', pets });\r\n    }\r\n}\r\n\r\nexport function savePet(pet) {\r\n    return async dispatch => {\r\n        const petToSave = await petService.save(pet);\r\n        if (pet._id) dispatch({ type: 'EDIT_PET', petToSave });\r\n        else dispatch({ type: 'ADD_PET', petToSave });\r\n    }\r\n}\r\n\r\nexport function removePet(petId) {\r\n    return async dispatch => {\r\n       await petService.remove(petId);\r\n       dispatch({ type: 'REMOVE_PET', petId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { setFilter, loadPets } from '../store/actions/petActions.js'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\n\r\n\r\nclass _FilterSearch extends Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isClearShown: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.setState({ txt: this.props.filterBy.txt });\r\n        await this.setState({ parent: this.props.parent });\r\n        this.setState({ isClearShown: this.state.txt !== '' })\r\n        if (this.props) {\r\n            console.log(this.props);\r\n        }\r\n\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps !== this.props) {\r\n            this.setState({ txt: this.props.filterBy.txt });\r\n            this.setState({ isClearShown: this.state.txt !== '' })\r\n        }\r\n    }\r\n\r\n    onInputChange = async (ev) => {\r\n        console.log(ev.target.value);\r\n        const txt = ev.target.value;\r\n        this.setState({ isClearShown: txt !== '' })\r\n        await this.setState({ txt });\r\n        if (!txt && this.state.parent !== 'hero') await this.onSearch();\r\n    }\r\n    keyPress = (e) => {\r\n        if (e.keyCode == 13) {\r\n            this.onSearch();\r\n\r\n        }\r\n    }\r\n    onClear = async () => {\r\n        this.setState({ txt: '' })\r\n        this.props.setFilter({ txt: '' }, () => this.props.loadPets())\r\n        this.setState({ isClearShown: false })\r\n    }\r\n\r\n    onSearch = async () => {\r\n        await this.props.setFilter({ txt: this.state.txt }, () => this.props.loadPets())\r\n        console.log(this.props)\r\n\r\n        if (this.state.parent === 'hero') this.props.history.push('/pet')\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section className=\"search-container flex\">\r\n                <div className=\"input-container\">\r\n                    <input className=\"search\"\r\n                        type=\"text\"\r\n                        name=\"search\"\r\n                        value={this.state.txt}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Find a friend (i.e. small, cat, puppy)\"\r\n                        onChange={(ev) => this.onInputChange(ev)}\r\n                        onKeyDown={this.keyPress} />\r\n                    <FontAwesomeIcon className=\"search-icon\" icon={faSearch} />\r\n                    <FontAwesomeIcon className={this.state.isClearShown ? 'clear-icon' : 'clear-icon hidden'}\r\n                        onClick={this.onClear} icon={faTimesCircle} />\r\n                </div>\r\n                <div className=\"btn-search\" onClick={this.onSearch}>Search</div>\r\n                {/* <div className=\"icons-container\">\r\n                </div> */}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.petReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setFilter,\r\n    loadPets\r\n}\r\n\r\nexport const FilterSearch = withRouter(connect(mapStateToProps, mapDispatchToProps)(_FilterSearch));\r\n\r\n\r\n","import React, { Component } from 'react'\r\n\r\n\r\nexport class CategoryList extends Component {\r\n    \r\n    state={\r\n        dog:false,\r\n        cat:false,\r\n        farm:false,\r\n        other:false\r\n    }\r\n    \r\n\r\n\r\n    displayTypesBtn(type){\r\n        const classStr=this.state[type]?'pressed':'';\r\n        return(\r\n             <img key={type} src={require(`../assets/img/category/${type}.png`)} className={classStr} alt=\"Category\" onClick={()=>this.imgClicked(type)}/>\r\n        )\r\n    }\r\n     imgClicked=async (type)=>{\r\n         const state= {\r\n            dog:false,\r\n            cat:false,\r\n            farm:false,\r\n            other:false\r\n         }\r\n        if(this.state[type]) {\r\n            await this.setState({...state})\r\n            type='';\r\n        }else await this.setState({...state,[type]:!this.state.type})\r\n        this.props.onCategoryChange({'type':type})\r\n        \r\n    }\r\n    render(){\r\n        \r\n        return (\r\n            <div className=\"category-list anchor\">\r\n                {\r\n                    Object.keys(this.state).map(type=>this.displayTypesBtn(type) )\r\n                }\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { Input, InputLabel, Select } from '@material-ui/core';\r\n\r\nimport { TagsFilter } from './TagsFilter'\r\nimport { setFilter, loadPets } from '../store/actions/petActions.js'\r\nimport { FilterSearch } from './FilterSearch';\r\nimport { CategoryList } from './CategoryList';\r\n// import SearchIcon from '@material-ui/icons/Search';\r\n\r\nclass _PetFilter extends Component {\r\n\r\n    state = {\r\n        parent: '',\r\n        filterBy: {\r\n            type: '',\r\n            gender: '',\r\n            breed: '',\r\n            size: '',\r\n            txt: '',\r\n            distance: {\r\n                lat: 0,\r\n                lon: 0,\r\n                range: 0\r\n            }\r\n        },\r\n        position: {\r\n            lat: 0,\r\n            lon: 0,\r\n        },\r\n        isModalShown: false,\r\n        tags: []\r\n\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await navigator.geolocation.getCurrentPosition(\r\n            this.getUserPosition,\r\n            function (error) {\r\n                console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n            }\r\n        );\r\n    }\r\n\r\n    getUserPosition = async (position) => {\r\n        const distance = {\r\n            lat: position.coords.latitude,\r\n            lon: position.coords.longitude,\r\n            range: 0\r\n        }\r\n        await this.setState({ filterBy: { ...this.state.filterBy, distance: distance } });\r\n    }\r\n\r\n    onFilterChange = (obj) => {\r\n        this.updateFilterAndLoad(obj);\r\n    }\r\n\r\n    handleInput = async ({ target }) => {\r\n        const field = target.name;\r\n        if (target.type === 'number') var value = +target.value;\r\n        else value = target.value;\r\n        await this.setState(prevState => {\r\n            if (field === 'range') {\r\n                return {\r\n                    ...prevState,\r\n                    filterBy: {\r\n                        ...prevState.filterBy,\r\n                        distance: {\r\n                            ...prevState.filterBy.distance,\r\n                            [field]: value\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                return {\r\n                    ...prevState,\r\n                    filterBy: {\r\n                        ...prevState.filterBy,\r\n                        [field]: value\r\n                    }\r\n                }\r\n            }\r\n\r\n        });\r\n        this.onFilterChange(this.state.filterBy);\r\n    }\r\n\r\n    onToggleFilterModal = () => {\r\n        this.setState({ isModalShown: !this.state.isModalShown })\r\n    }\r\n    onApplyFilter = () => {\r\n        this.onToggleFilterModal()\r\n    }\r\n\r\n    resetFilter = async () => {\r\n\r\n        await this.setState({\r\n            ...this.state.filterBy,\r\n            type: '',\r\n            gender: '',\r\n            breed: '',\r\n            size: '',\r\n            txt: ''\r\n        });\r\n        this.props.setFilter(this.state.filterBy, () => this.props.loadPets())\r\n    }\r\n\r\n    async updateFilterAndLoad(obj) {\r\n        await this.props.setFilter({ ...this.props.filterBy, ...obj }, () => this.loadPets())\r\n    }\r\n    onToggleTag = ev => {\r\n        const tag = ev.target.value;\r\n        let tags = [...this.state.tags]\r\n        if (tags.includes(tag)) {\r\n            tags.splice(tags.indexOf(tag), 1);\r\n        } else {\r\n            tags.push(tag)\r\n        }\r\n        this.setState({ tags })\r\n        console.log(this.state.tags);\r\n    }\r\n\r\n    render() {\r\n        const { isModalShown } = this.state\r\n        // const btnClass=parent==='hero'?'hero-btn more-btn':'gallery-btn more-btn';\r\n        return (\r\n            <div className=\"filter-container flex column align-center\">\r\n\r\n                <section className=\"search-container flex space-around\">\r\n                    <FilterSearch parent=\"main\" onInputChange={this.onInputChange} />\r\n                    {/* { <button className=\"more-btn\"  onClick={this.onToggleFilterModal}>More</button>} */}\r\n                </section>\r\n                <section className=\"category-container\">\r\n                    <CategoryList onCategoryChange={this.onFilterChange} />\r\n                </section>\r\n                <section>\r\n                    <InputLabel htmlFor='Distance(km)'>Distance(km)</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: 'range',\r\n                            type:\"number\"\r\n                        }}\r\n                    >\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"20\">20km</option>\r\n                        <option value=\"50\">50km</option>\r\n                        <option value=\"100\">100km</option>\r\n                        <option value=\"200\">200km</option>\r\n                    </Select>\r\n                </section>\r\n                {isModalShown && <TagsFilter filterBy={this.props.filterBy} onToggleTag={this.onToggleTag} onFilterChange={this.onFilterChange} onToggleFilterModal={this.onToggleFilterModal} />}\r\n\r\n                <br />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.petReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setFilter,\r\n    loadPets\r\n}\r\n\r\n\r\nexport const PetFilter = connect(mapStateToProps, mapDispatchToProps)(_PetFilter)\r\n","import React, { Component } from 'react'\r\nimport { PetFilter } from './PetFilter'\r\nimport { FilterSearch } from './FilterSearch'\r\nimport { CategoryList } from './CategoryList'\r\nimport { Parallax, Background } from 'react-parallax';\r\nexport class Hero extends Component {\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Parallax\r\n            bgImage={require('../assets/img/hero1.jpg')}\r\n            bgImageAlt=\"the cat\"\r\n            strength={800}\r\n            style={{width:\"100%\"}}\r\n        >\r\n            \r\n            {/* <div style={{ height: '600px' }} /> */}\r\n        \r\n            <div className=\"hero-container full\">\r\n                <div className=\"hero-content\">\r\n                    <h1 className=\"hero-heading-up\"><span className=\"span\">Friendly.</span> Adopt a <span className=\"span\">pet</span> </h1>\r\n                    <h1 className=\"hero-heading\">Discover your next best friend</h1>\r\n                    <FilterSearch parent='hero' />\r\n                    <section className=\"category-container\">\r\n                        {/* <CategoryList/> */}\r\n                    </section>\r\n                </div>\r\n            </div>\r\n            </Parallax>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class About extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"about-main-container full\">\r\n                <div className=\"about-left\">\r\n                    <div className=\"about-headings\">\r\n                        <h1>Friendly connects adoption centers to potential adopters</h1>\r\n                    </div>\r\n                    <div className=\"call-to-action\">\r\n                       <Link to=\"/pet\"><button className=\"go-to-gallery-btn\">Let's See Some Animals</button></Link> \r\n                    </div>\r\n                </div>\r\n                <div className=\"about-right\">\r\n                    <div className=\"adoption-reasons-box\">\r\n                        <h3 className=\"adoption-reasons-header\">Why Should I Adopt?</h3>\r\n                        <p>Decrease blood pressure.</p>\r\n                        <p>Decrease feelings of loneliness.</p>\r\n                        <p>Increase opportunities for exercise and outdoor activities.</p>\r\n                        <p className=\"adoption-reason-last\">Increase opportunities for socialization.</p>\r\n                    </div>\r\n                    <div className=\"images-box\">\r\n                        <img className=\"img-1\" src={require('../assets/img/about1.png')} alt=\"\" />\r\n                        <img className=\"img-2\" src={require('../assets/img/about2.png')} alt=\"\" />\r\n                        <img className=\"img-3\" src={require('../assets/img/about3.png')} alt=\"\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Hero } from '../cmps/Hero'\r\nimport { loadPets } from '../store/actions/petActions.js'\r\nimport { About } from '../cmps/About'\r\n\r\nclass _Home extends Component {\r\n\r\n    state = {\r\n        pets: [],\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadPets()       \r\n    }\r\n    \r\n\r\n    loadPets = () => {\r\n        this.props.loadPets()\r\n    }\r\n\r\n    render() {\r\n        const {user} = this.props\r\n        return (\r\n            <div>\r\n\r\n                <Hero />\r\n                <About />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        user: state.userReducer.loggedInUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadPets\r\n}\r\n\r\nexport const Home = connect(mapStateToProps, mapDispatchToProps)(_Home)","import React from 'react'\r\nimport { OutlinedInput } from '@material-ui/core';\r\n\r\nexport class Geolocation extends React.Component {\r\n\r\n    state = {\r\n        lat: 0,\r\n        lng: 0\r\n    }\r\n\r\n    setLocToFind = async (ev) => {\r\n        const loc = ev.target.value;\r\n        console.log('find:', loc);\r\n        const res = await this.findLocation(loc, this.getLatLng);\r\n    }\r\n\r\n    findLocation = async (loc, cb) => {\r\n        const geocoder = require('google-geocoder');\r\n        const geo = geocoder({\r\n            key: 'AIzaSyDGql0MyVMEQeH89LQj0TtpM66SoLpkAhw'\r\n        });\r\n        geo.find(loc, cb);\r\n    }\r\n\r\n    getLatLng = async (err, res) => {\r\n        const data = await res;\r\n        if (data && data.length > 0) {\r\n            await this.setState({\r\n                lat: data[0].location.lat,\r\n                lng: data[0].location.lng\r\n            })\r\n           const latLang = {\r\n                lat:this.state.lat,\r\n                lng:this.state.lng\r\n            }\r\n            this.props.getGeolocation(latLang);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const latLng = this.state;\r\n        if (!latLng) return <h1>LOADING...</h1>\r\n        return (\r\n            <div className=\"flex column align-center\">\r\n                <OutlinedInput type=\"text\" name=\"locName\" placeholder=\"Your Shop Location\"\r\n                    onChange={(event) => {\r\n                        this.setLocToFind(event);\r\n                        this.props.signupHandleChange(event)\r\n                    }}/>\r\n            </div>\r\n        )\r\n    }\r\n}","import httpService from './httpService'\r\nconst BASE_URL_AUTH = '/auth'\r\nconst BASE_URL_USER = '/user'\r\n\r\nexport default {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`${BASE_URL_USER}/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`${BASE_URL_USER}/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const res = await httpService.post(`${BASE_URL_AUTH}/login`, userCred);\r\n    return res;                              \r\n}\r\n\r\nasync function signup(user) {\r\n    const res = await httpService.post(`user`, user);\r\n    return res[0] \r\n}\r\n\r\nasync function logout() {\r\n    await httpService.post(`${BASE_URL_AUTH}/logout`);\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","import userService from \"../../services/userService\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            const users = await userService.getUsers();\r\n            dispatch({\r\n                type: 'SET_USERS',\r\n                users\r\n            });\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport async function getUserById(id) {\r\n    const user = await userService.getById(id);\r\n    return user;\r\n}\r\n\r\nexport function removeUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            await userService.remove(userId);\r\n            dispatch({\r\n                type: 'USER_REMOVE',\r\n                userId\r\n            });\r\n        } catch (err) {\r\n            console.log('UserActions: err in removeUser', err);\r\n        }\r\n    };\r\n}\r\n\r\nexport function updateUser(user) {\r\n    return async dispatch => {\r\n        const userToSave = await userService.update(user);\r\n        dispatch({\r\n            type: 'UPDATE_USER',\r\n            userToSave\r\n        });\r\n    };\r\n}\r\n\r\nexport function login(userCreds) {\r\n    return async dispatch => {\r\n        const user = await userService.login(userCreds);\r\n        dispatch({\r\n            type: 'SET_USER',\r\n            user\r\n        });\r\n    };\r\n}\r\nexport function signup(_user) {\r\n    return async dispatch => {\r\n        const user = await userService.signup(_user);\r\n        dispatch({\r\n            type: 'SET_USER',\r\n            user\r\n        });\r\n    };\r\n}\r\nexport function logout() {\r\n    return async dispatch => {\r\n        await userService.logout();\r\n        dispatch({\r\n            type: 'LOGOUT'\r\n        });\r\n    };\r\n}","import httpService from './httpService.js'\r\nconst BASE_URL = '/shop'\r\n\r\n\r\nexport const shopService = {\r\n    query,\r\n    getById,\r\n    getByUserId,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query() {\r\n    const res = await httpService.get(`${BASE_URL}`);\r\n    return res;\r\n}\r\n\r\nasync function getById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function getByUserId(id) {\r\n    const res = await httpService.get(`${BASE_URL}/owner/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function save(shop) {\r\n    if (shop._id) {\r\n        shop.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${shop._id}`, shop)\r\n        return res;\r\n\r\n    } else {\r\n        shop.createdAt = new Date(Date.now()).toLocaleString();\r\n    }\r\n    shop.pets = [];\r\n    shop.reviews = [];\r\n    const res = await httpService.post(`${BASE_URL}`, shop)\r\n    return res;\r\n}\r\n\r\n\r\nasync function remove(shopId) {\r\n    await httpService.delete(`${BASE_URL}/${shopId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","import { shopService } from \"../../services/shopService.js\"\r\n\r\nexport function loadShops() {\r\n    return async dispatch => {\r\n        const shops = await shopService.query();\r\n        dispatch({ type: 'LOAD_SHOPS', shops });\r\n    }\r\n}\r\n\r\nexport function getShopById(shopId) {\r\n    return async dispatch => {\r\n        const shop = await shopService.getById(shopId);\r\n        dispatch({ type: 'GET_SHOP', shop });\r\n    }\r\n}\r\n\r\nexport function saveShop(shop) {\r\n    return async dispatch => {\r\n        const shopToSave = await shopService.save(shop);\r\n        if (shop._id) dispatch({ type: 'EDIT_SHOP', shopToSave });\r\n        else dispatch({ type: 'ADD_SHOP', shopToSave });\r\n    }\r\n}\r\n\r\nexport function removeShop(shopId) {\r\n    return async dispatch => {\r\n       await shopService.remove(shopId);\r\n       dispatch({ type: 'REMOVE_SHOP', shopId })\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Geolocation } from '../cmps/Geolocation';\r\n\r\nimport { signup, getUserById, updateUser, login, loadUsers } from '../store/actions/userActions'\r\nimport { saveShop, loadShops } from '../store/actions/shopActions'\r\n\r\n\r\nexport class _SignUp extends Component {\r\n\r\n    state = {\r\n        userAdopt: false,\r\n        userShop: false,\r\n        signupCred: ''\r\n    }\r\n\r\n    setUserAdopt = () => {\r\n        this.setState({ userAdopt: true, userShop: false })\r\n    }\r\n    setUserShop = () => {\r\n        this.setState({ userShop: true, userAdopt: false })\r\n    }\r\n\r\n    signupHandleChange = async ev => {\r\n        const { name, value } = ev.target;\r\n        await this.setState(prevState => ({\r\n            signupCred: {\r\n                ...prevState.signupCred,\r\n                [name]: value\r\n            }\r\n        }));\r\n        console.log('This State:', this.state);\r\n    };\r\n\r\n    doSignup = async ev => {\r\n        ev.preventDefault();\r\n        const { userAdopt, userShop } = this.state;\r\n        const { fullName, username, password, address, email, phone } = this.state.signupCred;\r\n        if (!fullName || !username || !password || !address) {\r\n            return this.setState({ msg: 'All inputs are required!' });\r\n        }\r\n        const user = {\r\n            fullName: fullName,\r\n            username: username,\r\n            password: password,\r\n            imgUrl: `https://ui-avatars.com/api/?name=${fullName.substring(0, 1)}+${fullName.substring(fullName.indexOf(' ') + 1, fullName.indexOf(' ') + 2)}`,\r\n            address: address,\r\n            email: email,\r\n            phone: phone,\r\n            isOwner: userShop,\r\n            isGuest: false\r\n        };\r\n        await this.props.signup(user);\r\n        await this.props.loadUsers();\r\n        const lastSignUpUser = this.props.users[this.props.users.length - 1]\r\n        console.log('userNow:',lastSignUpUser);\r\n        this.setState({ signupCred: { fullName: '', username: '', password: '', address: '', email: '', phone: '' } });\r\n        if (userShop) {\r\n            this.signUpShop(lastSignUpUser);\r\n        } \r\n        this.props.history.push(`/`);\r\n    }\r\n\r\n    signUpShop = async (currUser) => {\r\n        const { name, type, title, desc, locName, lat, lng } = this.state.signupCred;\r\n        if (!name || !type || !title || !desc || !locName) {\r\n            return this.setState({ msg: 'All inputs are required!' });\r\n        }\r\n\r\n        const owner = {\r\n            _id: currUser._id,\r\n            fullName: currUser.fullName,\r\n            imgUrl: currUser.imgUrl\r\n        }\r\n        const location = {\r\n            name: locName,\r\n            lat: parseFloat(lat),\r\n            lng: parseFloat(lng)\r\n        }\r\n        const signupCreds = { name, type, owner, title, desc, location };\r\n        this.props.saveShop(signupCreds);\r\n        currUser.isOwner = true;\r\n        await this.props.updateUser(currUser)\r\n        this.setState({\r\n            signupCred: {\r\n                name: '', type: '', owner: '', title: '', description: '', location: ''\r\n            }\r\n        });\r\n        // await this.props.loadShops();\r\n        // const shopId = this.props.shops.find(shop => { return shop.owner._id === currUser._id })._id;\r\n        // this.props.history.push(`/shop/${shopId}`)\r\n    }\r\n\r\n    getGeolocation = (latLng) => {\r\n        this.setState({\r\n            signupCred: {\r\n                ...this.state.signupCred,\r\n                lat: latLng.lat,\r\n                lng: latLng.lng\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { userAdopt, userShop } = this.state\r\n        const { loggedInUser } = this.props\r\n        console.log('this.state.signupCred', this.state.signupCred);\r\n        return (\r\n            <div className=\"form-container flex column align-center\">\r\n                <h1>We are happy you decided to join us!</h1>\r\n                <p>Do you want to adopt or to find adopters for your animals?</p>\r\n                <div className=\"btn-menu flex\">\r\n                    <button onClick={() => { this.setUserAdopt() }}>Adopt</button>\r\n                    <button onClick={() => { this.setUserShop() }}>Find Adopters</button>\r\n                </div>\r\n                <div className=\"fields-container flex column align-center\">\r\n                    {(userAdopt) ? <h3>New Adopter</h3> :\r\n                        <h3>Please filled out this form so we will be able to get to know you and your animals</h3>}\r\n                    <form className=\"flex column align-center\" onSubmit={this.doSignup}>\r\n                        <div className=\"flex\">\r\n                            <div className=\"flex column align-center\">\r\n                                <br />\r\n                                <OutlinedInput type=\"text\" name=\"fullName\" placeholder=\"Full Name\" onChange={this.signupHandleChange} value={this.state.signupCred.fullName}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"username\" placeholder=\"User Name\" onChange={this.signupHandleChange} value={this.state.signupCred.username}></OutlinedInput>\r\n                                <OutlinedInput type=\"password\" name=\"password\" placeholder=\"Password\" onChange={this.signupHandleChange} value={this.state.signupCred.password}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"address\" placeholder=\"Personal Address\" onChange={this.signupHandleChange} value={this.state.signupCred.address}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"email\" placeholder=\"Email\" onChange={this.signupHandleChange} value={this.state.signupCred.email}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"phone\" placeholder=\"Phone\" onChange={this.signupHandleChange} value={this.state.signupCred.phone}></OutlinedInput>\r\n                            </div>\r\n                            {userShop &&\r\n                                <div className=\"flex column align-center\">\r\n                                    <OutlinedInput type=\"text\" name=\"name\" placeholder=\"Your Shop Name\"\r\n                                        onChange={this.signupHandleChange}></OutlinedInput>\r\n                                    <FormControl>\r\n                                        <InputLabel htmlFor=\"type\">Shop Type:</InputLabel>\r\n                                        <Select\r\n                                            native\r\n                                            onChange={this.signupHandleChange}\r\n                                            inputProps={{\r\n                                                name: \"type\",\r\n                                            }}>\r\n                                            <option aria-label=\"None\" value=\"\" />\r\n                                            <option value={\"shelter\"}>Shelter</option>\r\n                                            <option value={\"volunteer\"}>Volunteer</option>\r\n                                            <option value={\"private\"}>Private</option>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <OutlinedInput type=\"text\" name=\"title\" placeholder=\"Your shop title/catchFrase\"\r\n                                        onChange={this.signupHandleChange}></OutlinedInput>\r\n                                    <OutlinedInput\r\n                                        id=\"standard-textarea\"\r\n                                        label=\"Shop Description:\"\r\n                                        placeholder=\"Your shop short description\"\r\n                                        multiline\r\n                                        name=\"desc\"\r\n                                        onChange={this.signupHandleChange}\r\n                                    />\r\n                                    <Geolocation getGeolocation={this.getGeolocation}\r\n                                        signupHandleChange={this.signupHandleChange} />\r\n                                    <br />\r\n                                </div>}\r\n                        </div>\r\n                        <button>Signup</button>\r\n                    </form>\r\n                </div >\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.userReducer.users,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n        shops: state.shopReducer.shops\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    loadUsers,\r\n    saveShop,\r\n    loadShops,\r\n    getUserById,\r\n    updateUser\r\n};\r\n\r\nexport const SignUp = connect(mapStateToProps, mapDispatchToProps)(_SignUp);","import { NavLink, Link } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons'\r\nimport { faMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenus } from '@fortawesome/free-solid-svg-icons'\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { loadPets, savePet } from '../store/actions/petActions';\r\n\r\n\r\nclass _PetPreview extends Component {\r\n\r\n    state = {\r\n        pet: {},\r\n        isLiked: false,\r\n        loveIconClass: 'love-icon'\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.setState({ pet: { ...this.props.pet } })\r\n    }\r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps != this.props) {\r\n            await this.setState({ pet: { ...this.props.pet } })\r\n        }\r\n    }\r\n\r\n    onUpdateReaction = async (ev, reaction) => {\r\n        ev.preventDefault()\r\n        const pet = this.state.pet;\r\n        const updatedReacts = pet.reacts.map(react => {\r\n            if (react.type === reaction) {\r\n                this.setState({isLiked: !this.state.isLiked})\r\n                // const loveIconClass = (this.state.loveIconClass === 'love-icon') ? 'love-icon-active' : 'love-icon'\r\n                // this.setState({ loveIconClass })\r\n\r\n                react.count += this.state.isLiked ? -1 : +1;\r\n                this.setState({ ...this.state, isLiked: !this.state.isLiked })\r\n            }\r\n            return react\r\n        })\r\n        await this.setState({ ...pet, reacts: [...updatedReacts] })\r\n        const petToSave = await JSON.parse(JSON.stringify(this.state.pet));\r\n        await this.props.savePet(petToSave);\r\n    }\r\n\r\n    render() {\r\n        const { pet } = (Object.keys(this.state.pet).length === 0) ? this.props : this.state;\r\n        const loveIconClass = (this.state.isLiked) ? 'love-icon-active' : 'love-icon'\r\n        if (!pet || !pet.reacts) return <h1>loading...</h1>\r\n        return (\r\n            <NavLink to={`/details/${pet._id}`}>\r\n\r\n                <div className=\"pet-preview\">\r\n                    {pet.isAdopted && <div class=\"ribbon ribbon-top-right\"><span>Adopted</span></div>}\r\n                    <img src={(pet.imgUrls) ? pet.imgUrls[0] : ''} alt=\"pet\" />\r\n                    <div className=\"card-description\">\r\n                        <div className=\"card-description-header\">\r\n                            <h2 className=\"pet-name\">{pet.name}</h2>\r\n                            {(pet.gender === 'Male') && <FontAwesomeIcon className=\"pet-gender-male-icon\" icon={faMars} />}\r\n                            {(pet.gender !== 'Male') && <FontAwesomeIcon className=\"pet-gender-female-icon\" icon={faVenus} />}\r\n                        </div>\r\n                        <h4>{pet.summary}</h4>\r\n                    </div>\r\n                    <div className=\"shop-container\">\r\n                        {pet.shop && <Link to={`/shop/${pet.shop._id}`}>{pet.shop.fullName}</Link>}\r\n                        {/* {pet.shop && <h4>{pet.shop.fullName}</h4>} */}\r\n                        <div onClick={(ev) => { this.onUpdateReaction(ev, 'love') }} className=\"pet-rate-box\">\r\n                            {/* <span>{pet.reacts && pet.reacts[0].type === 'love' ? <FontAwesomeIcon className=\"love-icon\" icon={faHeart} /> : ''} </span> */}\r\n                            <div className=\"content\">\r\n                            <span>{pet.reacts && pet.reacts[0].type === 'love' ? <span className={loveIconClass}></span> : ''} </span>\r\n\r\n                            </div>\r\n                            {pet.reacts && pet.reacts[0].type === 'love' ? <span className=\"love-count\">{pet.reacts[0].count}</span> : ''}\r\n\r\n\r\n                            {/* <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                            {pet.shop && <p className=\"shop-rate-rating\">{pet.shop.rate.rating}  </p>}\r\n                            {pet.shop && <p className=\"shop-rate-count\">({pet.shop.rate.count})  </p>} */}\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </ NavLink >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePet,\r\n    loadPets\r\n\r\n}\r\n\r\n\r\nexport const PetPreview = connect(mapStateToProps, mapDispatchToProps)(_PetPreview)\r\n\r\n","import React from 'react'\r\nimport { PetPreview } from './PetPreview'\r\n\r\n\r\nexport function PetList({pets, onRemove,onEdit}) {\r\n    return (\r\n        <div className=\"pet-list-container\">\r\n            <ul className=\"pet-list\">\r\n                {\r\n                  \r\n                   pets.map(pet => <PetPreview pet={pet} onRemove={onRemove} onEdit={onEdit} />)\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { PetFilter } from '../cmps/PetFilter'\r\nimport { PetList } from '../cmps/PetList'\r\nimport { loadPets, removePet,setFilter } from '../store/actions/petActions'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\n\r\nclass _PetApp extends Component {\r\n\r\n    state = {\r\n        pets: [],\r\n        filterBy:{type:''},\r\n        sortBy: null,\r\n        isReady:false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.loadPets();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n   async  componentDidUpdate(prevProps){\r\n        if (prevProps!==this.props){\r\n            this.setState({isReady:true})\r\n           }\r\n        if(prevProps.filterBy!==this.props.filterBy){\r\n            await this.loadPets();\r\n        }\r\n\r\n    }\r\n    async componentWillUnmount(){\r\n       await this.resetFitler();\r\n    }\r\n\r\n     resetFitler=async()=>{\r\n        await this.props.setFilter({\r\n            type:'',\r\n            gender:'',\r\n            breed:'',\r\n            size:'',\r\n            txt:''\r\n        },()=>this.loadPets())\r\n    }\r\n\r\n    loadPets = async _ => {\r\n        //loading from props with filter and setting the local state\r\n        await this.props.loadPets(this.props.filterBy);\r\n        const pets=this.props.pets;\r\n        await this.setState({...this.state,pets})\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removePet(id)\r\n    }\r\n    \r\n    render() {\r\n        const {  user } = this.props;\r\n        if (!this.state.pets) return <h1>Loading...</h1>\r\n        return (\r\n            <div className=\"pets-container\"> \r\n                <PetFilter/>\r\n                <div id=\"center\"></div>\r\n                <PetList pets={this.state.pets} onRemove={this.onRemove} user={user} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        filterBy:state.petReducer.filterBy \r\n      }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    removePet,\r\n    setFilter\r\n}\r\n\r\nexport const PetApp = connect(mapStateToProps, mapDispatchToProps)(_PetApp)\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { savePet, loadPets } from '../store/actions/petActions.js'\r\nimport { Input } from '@material-ui/core';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\n\r\nexport class _PetEdit extends Component {\r\n\r\n    state = {\r\n        pet: {}\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadPets();\r\n        const petId = this.props.match.params.id\r\n        if (petId) {\r\n            const petToEdit = this.props.pets.find(pet => pet._id === petId)\r\n            this.setState({ pet: { ...petToEdit } })\r\n        }\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        if (target.type === 'number') var value = +target.value;\r\n        else if (target.type === 'checkbox') value = (target.checked);\r\n        else value = target.value;\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                pet: {\r\n                    ...prevState.pet,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onSubmitForm = (ev) => {\r\n        ev.preventDefault();\r\n        this.props.savePet(this.state.pet);\r\n        this.props.history.push('/')\r\n    }\r\n\r\n    render() {\r\n        const pet = { ...this.state.pet }\r\n        if (Object.keys(pet).length === 0) return (<h1>LOADING...</h1>)\r\n        return (\r\n            <form className={\"form-container fields-container flex column align-center below-nav\"}\r\n                onSubmit={(event) => { this.onSubmitForm(event) }}>\r\n                {(!pet._id) ? <h1>Add Your Pet</h1> : <h1>Edit Pet Details</h1>}\r\n                <Input type=\"text\" name=\"name\" placeholder=\"Pet Name:\"\r\n                    value={pet.name} onChange={this.handleInput}></Input>\r\n                <Input type=\"text\" name=\"type\" placeholder=\"Pet Type:\"\r\n                    value={pet.type} onChange={this.handleInput}></Input>\r\n                <TextField name=\"adoptedAt\" label=\"Pet Adoption Date\" type=\"date\"\r\n                    defaultValue={new Date(pet.adoptedAt).toISOString().substr(0, 10)}\r\n                    onChange={this.handleInput}\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField name=\"bDate\" label=\"Pet Birth Date\" type=\"date\"\r\n                    defaultValue={new Date(pet.bDate).toISOString().substr(0, 10)}\r\n                    onChange={this.handleInput}\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"type\">Pet Gender:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        value={pet.gender}\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"gender\",\r\n                        }}>\r\n                        <option value={\"male\"}>Male</option>\r\n                        <option value={\"female\"}>Female</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <Input type=\"text\" name=\"breed\" placeholder=\"Pet Breed:\"\r\n                    value={pet.breed} onChange={this.handleInput}></Input>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"type\">Pet Size:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        value={pet.size}\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"size\",\r\n                        }}>\r\n                        <option value=\"small\">Small</option>\r\n                        <option value=\"medium\">medium</option>\r\n                        <option value=\"large\">Large</option>\r\n                        <option value=\"giant\">Giant</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl className=\"flex align-center\">\r\n                    <lable htmlFor=\"type\"> Is In Risk:\r\n                    <input type=\"checkbox\" checked={(pet.isInRisk) ? \"checked\" : \"\"} />\r\n                    </lable>\r\n                    <br /><br />\r\n                </FormControl>\r\n                <TextField\r\n                    id=\"standard-textarea\"\r\n                    label=\"Pet description:\"\r\n                    placeholder=\"Your pet short description\"\r\n                    multiline\r\n                    name=\"description\"\r\n                    value={pet.description}\r\n                    onChange={this.handleInput}\r\n                />\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"kids\">Select pet behavior with kids:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"kids\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"dogs\">Select pet behavior with dogs:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"dogs\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"cats\">Select pet behavior with cats:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"cats\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"energy\">Select pet energy level:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"energy\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"low\">Low</option>\r\n                        <option value=\"moderate\">Moderate</option>\r\n                        <option value=\"high\">High</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"health\">Select pet health condition:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"health\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"helathy\">Healthy</option>\r\n                        <option value=\"notHealthy\">Not Healthy</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <button>SAVE</button>\r\n            </form >\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePet,\r\n    loadPets\r\n}\r\n\r\nexport const PetEdit = connect(mapStateToProps, mapDispatchToProps)(_PetEdit)\r\n","import httpService from './httpService.js'\r\nconst BASE_URL = '/chat'\r\n\r\n\r\nexport const chatService = {\r\n    query,\r\n    getById,\r\n    getByUserId,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy={}, filterName) {\r\n    if (filterBy) {\r\n        const queryStr = (filterBy) ? `?${filterName}=${filterBy}` : '';\r\n        const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n            params: filterBy\r\n        });\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function getById(id) {    \r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\nasync function getByUserId(userId) {    \r\n    const res = await httpService.get(`${BASE_URL}/member/${userId}`);\r\n    return res;\r\n}\r\n\r\nasync function save(chat) {\r\n    if (chat._id) {\r\n        chat.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${chat._id}`, chat)\r\n        return res;\r\n\r\n    } else {\r\n        chat.createdAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, chat)\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function remove(chatId) {\r\n    await httpService.delete(`${BASE_URL}/${chatId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n","import { chatService } from \"../../services/chatService.js\"\r\n\r\nexport function loadChats(filterBy, filterName) {\r\n    return async dispatch => {\r\n        const chats = await chatService.query(filterBy, filterName);\r\n        dispatch({ type: 'LOAD_CHATS', chats });\r\n    }\r\n}\r\n\r\n\r\nexport function getChatsByUserId(userId) {\r\n    console.log('chatId',userId);\r\n    return async dispatch => {\r\n        try {\r\n            const chat = await chatService.getByUserId(userId);\r\n            console.log(chat);\r\n            dispatch({ type: 'LOAD_CHATS', chat });\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err);\r\n        }  \r\n    }\r\n}\r\nexport function getChatById(chatId) {\r\n    console.log('chatId',chatId);\r\n    return async dispatch => {\r\n        try {\r\n            const chat = await chatService.getById(chatId);\r\n            dispatch({ type: 'GET_CHAT', chat });\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err);\r\n        }  \r\n    }\r\n}\r\n\r\nexport function saveChat(chat) {\r\n    return async dispatch => {\r\n        const chatToSave = await chatService.save(chat);\r\n        if (chat._id) dispatch({ type: 'EDIT_CHAT', chatToSave });\r\n        else dispatch({ type: 'ADD_CHAT', chatToSave });\r\n    }\r\n}\r\n\r\nexport function removeChat(chatId) {\r\n    return async dispatch => {\r\n       await chatService.remove(chatId);\r\n       dispatch({ type: 'REMOVE_CHAT', chatId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n\r\nexport function toggleChat(chatInfo=null){\r\n    return dispatch => {\r\n        dispatch({ type: 'TOGGLE_CHAT', chatInfo })\r\n    }\r\n}\r\n","import httpService from './httpService.js'\r\nconst BASE_URL = '/order'\r\n\r\n\r\nexport const orderService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy={}, filterName) {\r\n    if (filterBy) {\r\n        const queryStr = (filterBy) ? `?${filterName}=${filterBy}` : '';\r\n        const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n            params: filterBy\r\n        });\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function getById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function save(order) {\r\n    if (order._id) {\r\n        order.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${order._id}`, order)\r\n        return res;\r\n\r\n    } else {\r\n        order.createdAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, order)\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function remove(orderId) {\r\n    await httpService.delete(`${BASE_URL}/${orderId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n","import { orderService } from \"../../services/orderService.js\"\r\n\r\nexport function loadOrders(filterBy, filterName) {\r\n    return async dispatch => {\r\n        const orders = await orderService.query(filterBy, filterName);\r\n        dispatch({ type: 'LOAD_ORDERS', orders });\r\n    }\r\n}\r\n\r\nexport function saveOrder(order) {\r\n    return async dispatch => {\r\n        const orderToSave = await orderService.save(order);\r\n        if (order._id) dispatch({ type: 'EDIT_ORDER', orderToSave });\r\n        else dispatch({ type: 'ADD_ORDER', orderToSave });\r\n    }\r\n}\r\n\r\nexport function removeOrder(orderId) {\r\n    return async dispatch => {\r\n       await orderService.remove(orderId);\r\n       dispatch({ type: 'REMOVE_ORDER', orderId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nimport { toggleChat } from '../store/actions/chatActions.js';\r\nimport { shopService } from '../services/shopService.js';\r\nimport userService from '../services/userService.js';\r\nimport { loadPets, savePet, removePet } from '../store/actions/petActions.js';\r\nimport { saveOrder } from '../store/actions/orderActions.js';\r\n\r\n\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCalendarAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenusMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faAlignLeft } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons'\r\nimport { TextField } from '@material-ui/core';\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { WhatsappShareButton, WhatsappIcon, FacebookShareButton, FacebookIcon, TwitterShareButton, TwitterIcon } from 'react-share'\r\nimport { AdoptionMsgModal } from '../cmps/AdoptionMsgModal.jsx';\r\n\r\n\r\nclass _PetDetails extends Component {\r\n\r\n    state = {\r\n        pet: {},\r\n        isOwnerOfPet: false,\r\n        adoptButton: 'Adopt',\r\n        currComment: '',\r\n        AdoptionModalMsg: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.getComponentData();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n    async getComponentData() {\r\n        await this.getCurrPet();\r\n        await this.getUserId();\r\n        await this.isOwnerOfPet();\r\n    }\r\n\r\n    getCurrPet = async () => {\r\n        await this.props.loadPets();\r\n        const petId = this.props.match.params.id\r\n        const petToShow = this.props.pets.find(pet => pet._id === petId)\r\n        this.setState({ pet: { ...petToShow } });\r\n    }\r\n\r\n    isOwnerOfPet = async () => {\r\n        const { loggedInUser } = this.props\r\n        const pet = this.state.pet\r\n        if (loggedInUser && pet.shop) {\r\n            const shopId = pet.shop._id\r\n            const shop = await shopService.getById(shopId)\r\n            this.setState({ isOwnerOfPet: loggedInUser._id === shop.owner._id })\r\n        }\r\n    }\r\n\r\n    onAdopt = async () => {\r\n        const { loggedInUser } = this.props\r\n        if (loggedInUser.isGuest) return\r\n        this.setState({ AdoptionModalMsg: !this.state.AdoptionModalMsg })\r\n        const pet = this.state.pet\r\n        const shopId = pet.shop._id\r\n        const shop = await shopService.getById(shopId)\r\n        const order = {\r\n            msg: \"Hi, I saw your lovely pet and really wish to adopt it!\",\r\n            buyer: {\r\n                _id: loggedInUser._id,\r\n                fullName: loggedInUser.fullName,\r\n                imgUrl: loggedInUser.imgUrl\r\n            },\r\n            shop: {\r\n                _id: shop._id,\r\n                name: shop.name,\r\n                type: shop.type,\r\n                imgUrl: shop.imgUrl\r\n            },\r\n            pet: {\r\n                _id: pet._id,\r\n                name: pet.name,\r\n            },\r\n            status: \"Pending\",\r\n        }\r\n        this.props.saveOrder(order)\r\n        this.setState({ adoptButton: 'Request Sent' })\r\n    }\r\n\r\n    onRemovePet = (petId) => {\r\n        console.log('petId', petId);\r\n        // this.props.removePet(petId)\r\n    }\r\n\r\n     onToggleChat = async() => {\r\n \r\n        const shop = await shopService.getById(this.state.pet.shop._id);\r\n        await this.props.toggleChat({'userId':shop.owner._id})\r\n    }\r\n\r\n    onUpdateReaction = (reaction) => {\r\n        const pet = this.state.pet;\r\n        pet.reacts.map(react => {\r\n            if (react.type === reaction) react.count++\r\n            return react\r\n        })\r\n        this.props.savePet(pet)\r\n        this.getCurrPet()\r\n    }\r\n\r\n    handleCommentInput = ({ target }) => {\r\n        const value = target.value;\r\n        this.setState({ currComment: value })\r\n    }\r\n\r\n    onComment = async () => {\r\n        const pet = this.state.pet;\r\n        const user = this.props.loggedInUser\r\n        const comment = {\r\n            id: `c${100 + pet.comments.length + 1}`,\r\n            txt: this.state.currComment,\r\n            by: {\r\n                id: user._id,\r\n                fullName: user.fullName,\r\n                imgUrl: user.imgUrl\r\n            },\r\n        }\r\n\r\n        pet.comments.unshift(comment);\r\n        await this.props.savePet(pet);\r\n        this.getComponentData();\r\n        this.setState({ cuurComment: '' })\r\n    }\r\n\r\n    getTimeToString = () => {\r\n        var time = new Date();\r\n        var dd = String(time.getDate()).padStart(2, '0');\r\n        var mm = String(time.getMonth() + 1).padStart(2, '0');\r\n        var yyyy = time.getFullYear();\r\n\r\n        time = mm + '/' + dd + '/' + yyyy;\r\n        return time\r\n    }\r\n\r\n    getUserId = async _ => {\r\n        console.log(this.state.pet);\r\n        const shop = await shopService.getById(this.state.pet.shop._id);\r\n        const ownerId = await shop.owner._id;\r\n        this.setState({ ownerId })\r\n    }\r\n\r\n    render() {\r\n        const pet = this.state.pet;\r\n        const loggedInUser = this.props.loggedInUser\r\n\r\n        if (!pet) return <h1>Loading...</h1>\r\n        return (\r\n            <section className=\"pet-details-main-container\">\r\n                <div className=\"pet-details-box\">\r\n                    <div className=\"pet-details-header\">\r\n                        <h2 className=\"pet-details-heading\">{pet.name}</h2>\r\n                        <div className=\"share-box\">\r\n                            {/* <h4 className=\"share-heading\">Share {pet.name} With Your Friends</h4> */}\r\n                            <FacebookShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}\r\n                                hashtag=\"#Friendly\">\r\n                                <FacebookIcon size={30} />\r\n                            </FacebookShareButton>\r\n                            <WhatsappShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}>\r\n                                <WhatsappIcon size={30} />\r\n                            </WhatsappShareButton>\r\n                            <TwitterShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}>\r\n                                <TwitterIcon size={30} />\r\n                            </TwitterShareButton>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pet-details-img-box\">\r\n                        {\r\n                            (pet.imgUrls) ?\r\n                                pet.imgUrls.map((imgUrl, index) => {\r\n                                    return <img className={`pet-details-img-${index}`} src={imgUrl} />\r\n                                })\r\n                                : ''\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        <ul className=\"reactions-list\">\r\n                            {\r\n                                (pet.reacts) ?\r\n                                    pet.reacts.map(react => {\r\n                                        if (react.type === 'love') {\r\n                                            return <li className=\"react-count\"><FontAwesomeIcon onClick={() => { this.onUpdateReaction('love') }}\r\n                                                className=\"heart-icon\" icon={faHeart} /> {`${react.count}`}</li>\r\n                                        }\r\n                                        // else if ((react.type === 'feed')) return <li><FontAwesomeIcon onClick={() => { this.onUpdateReaction('feed') }}\r\n                                        //     className=\"bone-icon\" icon={faBone} /> ({`${react.count}`})</li>\r\n                                        // else if ((react.type === 'pet')) return <li><FontAwesomeIcon onClick={() => { this.onUpdateReaction('pet') }}\r\n                                        //     className=\"hand-sparkles-icon\" icon={faHandSparkles} /> ({`${react.count}`})</li>\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"shop-and-pet-info\">\r\n\r\n\r\n                        <div className=\"pet-info\">\r\n                            <div className=\"pet-info-up\">\r\n                                <div className=\"age info-box\">\r\n                                    <FontAwesomeIcon className=\"age-icon info-icon\" icon={faCalendarAlt} />\r\n\r\n                                    <p><span>Age: </span>\r\n                                        {`${parseFloat((Date.now() - new Date(pet.bDate)) / (1000 * 60 * 60 * 24 * 30 * 12)).toFixed(1)}`}\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"size info-box\">\r\n                                    <FontAwesomeIcon className=\"size-icon info-icon\" icon={faExpandArrowsAlt} />\r\n                                    <p><span>Size:</span> {pet.size}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pet-info-down \">\r\n                                <FontAwesomeIcon className=\"gender-icon info-icon\" icon={faVenusMars} />\r\n                                <div className=\"gender info-box\">\r\n\r\n                                    <p><span>Gender:</span> {pet.gender}</p>\r\n                                </div>\r\n                                <div className=\"breed info-box\">\r\n                                    <FontAwesomeIcon className=\"breed-icon info-icon\" icon={faAlignLeft} />\r\n                                    <p><span>Breed:</span> {pet.breed}</p>\r\n                                </div>\r\n                            </div>\r\n                            {/* <h4> {pet.summary}</h4> */}\r\n                        </div>\r\n\r\n\r\n\r\n                        <div className=\"shop-details\">\r\n                            <div className=\"shop-details-up\">\r\n                                {pet.shop && <img className=\"shop-img\" src={`${pet.shop.imgUrl}`} alt=\"\" />}\r\n                                {pet.shop && <Link to={`/shop/${pet.shop._id}`}><p>{pet.shop.fullName}</p></Link>}\r\n                            </div>\r\n                            <div className=\"shop-details-bottom\">\r\n                                <div className=\"shop-rate-box\">\r\n                                    <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                                    {pet.shop && <p className=\"shop-rate-rating\">{pet.shop.rate.rating}  </p>}\r\n                                    {pet.shop && <p className=\"shop-rate-count\">({pet.shop.rate.count})  </p>}\r\n                                </div>\r\n                                {pet.shop && !this.state.isOwnerOfPet && <button onClick={this.onToggleChat}>Message {pet.shop.fullName}</button>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"tags-and-adopt-btn-box\">\r\n\r\n                        <div className=\"tags-list-box\">\r\n                            <ul className=\"tags-list\">\r\n                                {\r\n                                    (pet.tags) ?\r\n                                        pet.tags.map(tag => {\r\n                                            return <li> {tag} </li>\r\n                                        })\r\n                                        : ''\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <button onClick={this.onAdopt} className=\"adoption-btn\">Adopt</button>\r\n                        {/* {this.state.AdoptionModalMsg && <AdoptionMsgModal />} */}\r\n\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"description-box\">\r\n                        <p>{pet.description}</p>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"comments-box\">\r\n                        <div className=\"comment-input-box\">\r\n                            <TextField name=\"txt\" fullWidth=\"true\" value={this.state.currComment} placeholder=\"Add Comment Here\" onChange={this.handleCommentInput} />\r\n\r\n                            <button className=\"add-comment-btn\" onClick={this.onComment}>Add</button>\r\n                        </div>\r\n                        <ul className=\"comment-list\">\r\n                            {\r\n                                (pet.comments) ?\r\n                                    pet.comments.map(comment => {\r\n                                        return <li className=\"single-comment-box\">\r\n                                            <div className=\"flex comment-box\">\r\n                                                {(comment.by.imgUrl) ? <img src={comment.by.imgUrl} alt=\"\" /> : \"\"}\r\n\r\n                                                {(comment.by.id === 'guest') ? <img src={\"https://images.macrumors.com/t/x_zUFqghBUNBxVUZN_dYoKF3D9g=/1600x0/article-new/2019/04/guest-user-250x250.jpg\"} alt=\"\" /> : \"\"}\r\n\r\n                                                <p><span>{comment.by.fullName}:</span> </p>\r\n                                                <p><span>{comment.createdAt}</span> </p>\r\n                                                <p>{comment.txt} </p>\r\n                                            </div>\r\n                                        </li>\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"actions-box\">\r\n                    {\r\n                        this.state.isOwnerOfPet ?\r\n                            <div className=\"actions-box-edit\">\r\n                                <Link to={`/edit/${pet._id}`}><button onClick={this.onGoToEdit} className=\"edit-btn\">Edit Pet</button></Link>\r\n                                <button onClick={() => { this.onRemovePet(pet._id) }} className=\"remove-btn\">Delete Pet</button>\r\n                            </div>\r\n                            :\r\n                            <div className=\"actions-box-adopt\">\r\n                                <h3>Reasons To Adopt</h3>\r\n                                <p>You save a life. </p>\r\n                                <p>You adopt a pet, and find a friend.</p>\r\n                                <p>You help stop cruelty in mass breeding facilities.</p>\r\n                                <button onClick={this.onAdopt} className=\"adopt-btn\">{this.state.adoptButton}</button>\r\n                            </div>\r\n\r\n                    }\r\n\r\n\r\n                </div> */}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    savePet,\r\n    saveOrder,\r\n    removePet,\r\n    toggleChat\r\n\r\n}\r\n\r\n\r\nexport const PetDetails = connect(mapStateToProps, mapDispatchToProps)(_PetDetails)","import React from 'react'\r\n\r\n\r\nexport function UserDataModal({ user }) {\r\n    return (\r\n        <React.Fragment>\r\n            \r\n            <div className=\"user-data-main-container\">\r\n                <div className=\"header\">\r\n                <h2>{user.fullName}</h2>\r\n                    <img src={user.imgUrl} alt=\"\" />\r\n\r\n                </div>\r\n                <div className=\"user-data-box\">\r\n                    <div className=\"user-profile-details flex column\">\r\n                        {user.phone && <p><span>Phone: </span>{user.phone}</p>}\r\n                        {user.email && <p><span>Email: </span>{user.email}</p>}\r\n                        {user.birthDate && <p><span>Age: </span>\r\n                            {parseInt((Date.now() - new Date(user.birthDate)) / (1000 * 60 * 60 * 24 * 30 * 12))}</p>}\r\n                        {user.familyStatus && <p><span>Family Status: </span>{user.familyStatus}</p>}\r\n                        {user.numberOfKds && <p><span>Number of Kids: </span>{user.numberOfKds}</p>}\r\n                        {user.residence && <p><span>Recidence Type: </span>{user.residence}</p>}\r\n                        {user.petCondition && <p><span>Pet Designated Living conditions: </span>{user.petCondition}</p>}\r\n                        {user.currrenPets && <p><span>Current Pets at home: </span>{user.currrenPets}</p>}\r\n                        {user.prevExperince && <p><span>Previouse experince with animals: </span>{user.prevExperince}</p>}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport userService from '../services/userService';\r\nimport { UserDataModal } from './UserDataModal';\r\n\r\n\r\n\r\nexport class OrderPreview extends Component {\r\n\r\n    state = {\r\n        showUserModal: false,\r\n        user: null\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    showModal = async () => {\r\n        this.setState({ showUserModal: !this.state.showUserModal })\r\n        const user = await userService.getById(this.props.order.buyer._id)\r\n        await this.setState({ user })\r\n    }\r\n\r\n\r\n\r\n    orderClass = () => {\r\n        let orderClass;\r\n        if (this.props.order.status === 'accepted') orderClass = 'accepted';\r\n        else if (this.props.order.status === 'denied') orderClass = 'denied';\r\n        else orderClass = 'pending';\r\n        return orderClass;\r\n    }\r\n\r\n    render() {\r\n        const { order, onSave, onRemove, isShop, loggedInUser } = this.props\r\n        const user = this.state.user\r\n        if (!order) return <h3 style={{ display: 'none' }}>loading...</h3>\r\n        return (\r\n            <div className={`order-preview ${this.orderClass}`}>\r\n                {\r\n                    isShop && <div  className=\"order-preview-details\">\r\n                        <p onClick={this.showModal}>{order.buyer.fullName} <span>Wants to Adopt</span> {order.pet.name} </p>\r\n                    </div>\r\n\r\n                }\r\n                {/* {\r\n                    isShop && <div className=\"order-preview-details\">\r\n                        <Link to={`/profile/${order.buyer._id}`}>  <p>{order.buyer.fullName} <span>Wants to Adopt</span> {order.pet.name} </p></Link>\r\n                    </div>\r\n\r\n                } */}\r\n                {this.state.showUserModal && user && <UserDataModal user={user} />}\r\n\r\n                {!isShop && loggedInUser._id === order.buyer._id &&\r\n                    <div>\r\n                        <Link to={`/shop/${order.shop._id}`}>\r\n                            {<p> <span>Request to adopt </span> {order.pet.name}\r\n                                <span> from:</span> {order.shop.name} {order.shop.type} </p>}\r\n                        </Link>\r\n                    </div>\r\n                }\r\n\r\n                <div className=\"order-actions-btns-box\">\r\n                    {isShop && <button className=\"accept-order-btn order-btn\" onClick={() => { onSave(order, 'accepted') }}>Accept</button>}\r\n                    {isShop && <button className=\"pending-order-btn order-btn\" onClick={() => { onSave(order, 'pending') }}>Pending</button>}\r\n                    {isShop && <button className=\"reject-order-btn order-btn\" onClick={() => { onSave(order, 'denied') }}>Reject</button>}\r\n                    {(isShop || (!isShop && loggedInUser._id === order.buyer._id)) &&\r\n                        <button className=\"remove-order-btn order-btn\" onClick={() => { onRemove(order._id) }}>Remove</button>}\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// export function OrderPreview({ order, onSave, onRemove, isShop, loggedInUser }) {\r\n\r\n//     function orderClass() {\r\n//         let orderClass;\r\n//         if (order.status === 'accepted') orderClass = 'accepted';\r\n//         else if (order.status === 'denied') orderClass = 'denied';\r\n//         else orderClass = 'pending';\r\n//         return orderClass;\r\n//     }\r\n\r\n\r\n\r\n//     if (!order) return <h3 style={{ display: 'none' }}>loading...</h3>\r\n//     return (\r\n//         <div className={`order-preview ${orderClass()}`}>\r\n//             {\r\n//                 isShop && <div className=\"order-preview-details\">\r\n//                     <Link to={`/profile/${order.buyer._id}`}>  <p>{order.buyer.fullName} <span>Wants to Adopt</span> {order.pet.name} </p></Link>\r\n//                 </div>\r\n\r\n//             }\r\n//             {  <UserDataModal />}\r\n\r\n//             {!isShop && loggedInUser._id === order.buyer._id &&\r\n//                 <div>\r\n//                     <Link to={`/shop/${order.shop._id}`}>\r\n//                         {<p> <span>Request to adopt </span> {order.pet.name}\r\n//                             <span> from:</span> {order.shop.name} {order.shop.type} </p>}\r\n//                     </Link>\r\n//                 </div>\r\n//             }\r\n\r\n//             <div className=\"order-actions-btns-box\">\r\n//                 {isShop && <button className=\"accept-order-btn order-btn\" onClick={() => { onSave(order, 'accepted') }}>Accept</button>}\r\n//                 {isShop && <button className=\"pending-order-btn order-btn\" onClick={() => { onSave(order, 'pending') }}>Pending</button>}\r\n//                 {isShop && <button className=\"reject-order-btn order-btn\" onClick={() => { onSave(order, 'denied') }}>Reject</button>}\r\n//                 {(isShop || (!isShop && loggedInUser._id === order.buyer._id)) &&\r\n//                     <button className=\"remove-order-btn order-btn\" onClick={() => { onRemove(order._id) }}>Remove</button>}\r\n//             </div>\r\n//         </div >\r\n//     )\r\n// }","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { OrderPreview } from './OrderPreview'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {\r\n    loadOrders,\r\n    saveOrder,\r\n    removeOrder,\r\n    setFilter\r\n} from '../store/actions/orderActions';\r\nimport { savePet } from '../store/actions/petActions';\r\n\r\n\r\n\r\nclass _OrderList extends Component {\r\n\r\n    state = {\r\n        msgDivClass: 'hidden'\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadOrders(this.props.filterById, this.props.orderFilterName);\r\n    }\r\n\r\n    changePetAdoptionStatus = async (order) => {\r\n        const pet = this.props.pets.find(pet => pet._id === order.pet._id)\r\n        pet.isAdopted = true\r\n        this.props.savePet(pet)\r\n        this.props.history.push('/pet')\r\n    }\r\n\r\n    onSave = async (order, status) => {\r\n        const isAcceptedStat = this.props.orders.find(orderCheck => {\r\n            return (orderCheck.status === 'accepted' && orderCheck.pet._id === order.pet._id)\r\n        })\r\n\r\n        if (isAcceptedStat && status === 'accepted') {\r\n            this.setState({ msgDivClass: '' })\r\n            setTimeout(() => { this.setState({ msgDivClass: 'hidden' }) }, 1500);\r\n        } else {\r\n            order.status = status;\r\n            await this.props.saveOrder(order);\r\n            this.props.loadOrders(this.props.filterById, this.props.orderFilterName);\r\n            if (status === 'accepted') {\r\n                this.changePetAdoptionStatus(order)\r\n            }\r\n        }\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removeOrder(id);\r\n    }\r\n\r\n    render() {\r\n        const orders = this.props.orders;\r\n        return (!orders) ? <h1>LOADING...</h1> :\r\n            (\r\n                <div className=\"order-list flex column\" >\r\n\r\n                    <div className={`doubleAccept ${this.state.msgDivClass}`}>Only one approval please.</div>\r\n                    {orders.map(order =>\r\n                        <OrderPreview isShop={this.props.isShop} order={order} loggedInUser={this.props.loggedInUser}\r\n                            onRemove={this.onRemove} onSave={this.onSave} />)}\r\n                </div>\r\n            )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        orders: state.orderReducer.orders,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadOrders,\r\n    saveOrder,\r\n    removeOrder,\r\n    setFilter,\r\n    savePet\r\n}\r\n\r\nexport const OrderList = withRouter(connect(mapStateToProps, mapDispatchToProps)(_OrderList))\r\n// export const NavBar = withRouter(connect(mapStateToProps, mapDispatchToProps)(_NavBar))","import React from 'react'\r\nimport { GoogleApiWrapper, Map, Marker, InfoWindow } from 'google-maps-react';\r\n\r\n\r\nclass _GoogleMap extends React.Component {\r\n\r\n    state = {\r\n        lat: 32.0853,\r\n        lng: 34.7818,\r\n        zoom: 16,\r\n        loc: 'Info Window'\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState(\r\n            {\r\n                lat: this.props.lat,\r\n                lng: this.props.lng,\r\n                zoom: 14,\r\n                loc: this.props.name\r\n            }\r\n        )\r\n    }\r\n\r\n    onMarkerClick = (props, marker, event) => {\r\n    }\r\n\r\n    onMapClicked = (mapProps, map, ev) => {\r\n        this.setState({ lat: ev.latLng.lat(), lng: ev.latLng.lng() })\r\n    }\r\n\r\n    onMapPassLoc = () => {\r\n        this.state({ lat: this.props.lat, lng: this.props.lng })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Map className=\"map\" initialCenter={this.state} center={this.state} onClick={this.onMapClicked}\r\n                google={this.props.google} zoom={this.state.zoom} className=\"map\" >\r\n\r\n                <Marker position={this.state}\r\n                    name={'Current location'} />\r\n\r\n                <InfoWindow position={this.state} visible={true}  >\r\n                    <div>\r\n                        <h4>{this.state.loc}</h4>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const GoogleMap = GoogleApiWrapper({\r\n    apiKey: ('AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio')\r\n})(_GoogleMap)","\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { PetList } from '../cmps/PetList';\r\nimport { OrderList } from '../cmps/OrderList';\r\nimport { getShopById, saveShop } from '../store/actions/shopActions.js';\r\nimport { savePet, loadPets } from '../store/actions/petActions.js'\r\nimport { GoogleMap } from '../cmps/GoogleMap';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAngleDoubleUp, faEnvelope, faFemale, faMale, faMobileAlt, faStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport userService from '../services/userService.js';\r\n\r\n\r\nclass _ShopDetails extends Component {\r\n\r\n    state = {\r\n        shop: {},\r\n        shopPets: [],\r\n        shopOwner: '',\r\n        isOpenReviews: false,\r\n        currReview: {\r\n            txt: '',\r\n            rate: ''\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.loadShopData();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n    loadShopData = async () => {\r\n        const shopId = this.props.match.params.id;\r\n        await this.props.loadPets();\r\n        await this.props.getShopById(shopId);\r\n        this.setState({ shop: { ...this.props.currShop } });\r\n        const owner = await userService.getById(this.props.currShop.owner._id);\r\n        console.log('owner from DB', owner);\r\n\r\n        await this.setState({ shopOwner: { ...owner } });\r\n        const shopPets = this.props.pets.filter(pet => {\r\n            if (pet.shop) return pet.shop._id === this.state.shop._id\r\n\r\n        })\r\n        await this.setState({\r\n            shopPets: [...shopPets]\r\n        })\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removePet(id)\r\n    }\r\n\r\n    onEdit = () => {\r\n        console.log('edit');\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                currReview: {\r\n                    ...prevState.currReview,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onAddReview = async (ev) => {\r\n        ev.preventDefault();\r\n        const shop = { ...this.state.shop };\r\n        const review = { ...this.state.currReview };\r\n        review.id = `r${100 + shop.reviews.length + 1}`\r\n        const user = this.props.loggedInUser;\r\n        review.by = {\r\n            _id: user._id,\r\n            fullName: user.fullName,\r\n            imgUrl: user.imgUrl\r\n        }\r\n        shop.reviews.unshift(review);\r\n        await this.props.saveShop(shop);\r\n        this.loadShopData();\r\n    }\r\n\r\n    onToggleReviewModal = () => {\r\n        this.setState(\r\n            {\r\n                ...this.state,\r\n                isOpenReviews: !this.state.isOpenReviews\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    drawStars = (rate) => {\r\n        var stars = '';\r\n        for (var i = 0; i < rate; i++) {\r\n            stars = stars + ''\r\n        }\r\n        return stars;\r\n    }\r\n\r\n    render() {\r\n        const shop = this.state.shop;\r\n        const owner = this.state.shopOwner;\r\n        const isUserOwner = (Object.keys(this.state.shop).length > 0\r\n            && this.props.loggedInUser._id === this.props.currShop.owner._id)\r\n        // console.log('chats in shop ccc', this.props.loggedInUser.chats);\r\n\r\n        return (\r\n            <section>\r\n                {(!shop.owner || !shop.location || !shop.reviews) ? <h1>Loading...</h1> :\r\n\r\n                    <div className=\"shop-details-main-box\">\r\n                        <div className=\"shop-details-header\">\r\n                            <h2 className=\"shop-details-heading\">{shop.name}</h2>\r\n                            <div className=\"shop-rate-box\">\r\n                                <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                                {shop && <p className=\"shop-rate-rating\">{shop.rate.rating}  </p>}\r\n                                {shop && <p className=\"shop-rate-count\">({shop.rate.count})  </p>}\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"shop-details-img-box\">\r\n                            {\r\n                                (shop.imgUrls) ?\r\n                                    shop.imgUrls.map((imgUrl, index) => {\r\n                                        return <img className={`shop-details-img-${index}`} src={imgUrl} />\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </div>\r\n                        <div className=\"top-screen-box\">\r\n                            <div className=\"shop-details-section\">\r\n\r\n                                <img className=\"shop-owner-img\" src={shop.owner.imgUrl} />\r\n\r\n                                <div className=\"contact-box\">\r\n                                  {owner.gender &&  <FontAwesomeIcon className=\"contact-icon\"\r\n                                        icon={(owner.gender === 'Male')? faMale : faFemale} />}\r\n                                    <p>{shop.owner.fullName}</p>\r\n                                </div>\r\n\r\n                                <div className=\"contact-box\">\r\n                                    <FontAwesomeIcon className=\"contact-icon\" icon={faMobileAlt} />\r\n                                    <p>{shop.owner.contact.phone}</p>\r\n                                </div>\r\n\r\n                                <div className=\"contact-box\">\r\n                                    <FontAwesomeIcon className=\"contact-icon\" icon={faEnvelope} />\r\n                                    <p>{shop.owner.contact.email}</p>\r\n                                </div>\r\n\r\n\r\n                                < div className=\"shop-description\">\r\n                                    <p>{shop.desc}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"order-list-box\">\r\n                                {this.state.shop.owner._id === this.props.loggedInUser._id &&\r\n                                    <OrderList isShop={true} orderFilterName={\"shop._id\"} filterById={this.state.shop._id} />}\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <div className=\"bottom-screen-box\">\r\n\r\n                            <div className=\"reviews-box\">\r\n                                <h3>What they say about us</h3>\r\n                                <button className=\"open-reviews-btn\" onClick={this.onToggleReviewModal}>\r\n                                    {(!this.state.isOpenReviews) ? 'Tell Us What You Think' : `Close`}\r\n                                </button>\r\n                                <div className={(this.state.isOpenReviews) ? `review-modal` : `hidden`}>\r\n                                    <form className=\"review-form\">\r\n                                        <div className=\"flex column\">\r\n                                            <TextField\r\n                                                id=\"standard-textarea\"\r\n                                                label=\"Your Review\"\r\n                                                placeholder=\"Write your review\"\r\n                                                multiline\r\n                                                name=\"txt\"\r\n                                                onChange={this.handleInput}\r\n                                            />\r\n                                            <FormControl>\r\n                                                <InputLabel htmlFor=\"rate\">Your rate</InputLabel>\r\n                                                <Select\r\n                                                    native\r\n                                                    onChange={this.handleInput}\r\n                                                    inputProps={{\r\n                                                        name: \"rate\",\r\n                                                    }}>\r\n                                                    <option aria-label=\"None\" value=\"\" />\r\n                                                    <option value=\"5\">5</option>\r\n                                                    <option value=\"4\">4</option>\r\n                                                    <option value=\"3\">3</option>\r\n                                                    <option value=\"2\">2</option>\r\n                                                    <option value=\"1\">1</option>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </div>\r\n                                        <button className=\"add-review-btn\" onClick={this.onAddReview}>Publish</button>\r\n                                    </form>\r\n                                </div>\r\n                                {(!shop.reviews) ? <h1>Loading Reviews...</h1> :\r\n                                    <ul className=\"reviews-list\">\r\n                                        {shop.reviews.map(review => {\r\n                                            return <li className=\"review\">\r\n                                                <p className=\"review-text\">{review.txt}</p>\r\n                                                <p><span>Rate: </span>{this.drawStars(review.rate)}</p>\r\n                                                <p><span>From: </span>{review.by.fullName}</p>\r\n                                            </li>\r\n                                        }\r\n\r\n                                        )}\r\n                                    </ul>}\r\n                            </div>\r\n                            <div className=\"shop-location-box\">\r\n\r\n                                <div className=\"map-container\">\r\n                                    <GoogleMap lat={shop.location.lat} lng={shop.location.lng} name={shop.location.name} />\r\n                                </div>\r\n                                <FontAwesomeIcon className=\"arrow-icon\" icon={faAngleDoubleUp} />\r\n                                <div className=\"shop-location-name\">\r\n                                    <h2>We are located at {shop.location.name}</h2>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"pets-box\" >\r\n                            <h2 className=\"our-pets-heading\">Our Pets</h2>\r\n                            <PetList pets={this.state.shopPets} onRemove={this.onRemove} />\r\n                        </div>\r\n                    </div>\r\n\r\n                }\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currShop: state.shopReducer.currShop,\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n        currChat: state.chatReducer.currChat\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    getShopById,\r\n    saveShop,\r\n    loadPets,\r\n    savePet\r\n}\r\n\r\nexport const ShopDetails = connect(mapStateToProps, mapDispatchToProps)(_ShopDetails);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Button, TextField } from '@material-ui/core';\r\nimport {\r\n    loadUsers,\r\n    removeUser,\r\n    login,\r\n    logout,\r\n    signup\r\n} from '../store/actions/userActions.js';\r\nimport { getChatById,getChatsByUserId } from '../store/actions/chatActions.js';\r\nclass _LoginModal extends Component {\r\n\r\n    state = {\r\n        msg: '',\r\n        loginCred: {\r\n            userName: '',\r\n            password: ''\r\n        },\r\n        showModal: false\r\n    }\r\n\r\n    loginHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => ({\r\n            loginCred: {\r\n                ...prevState.loginCred,\r\n                [name]: value\r\n            }\r\n        }));\r\n    };\r\n\r\n    closeModal = () => {\r\n        this.props.onNavBarClick()\r\n    }\r\n\r\n    doLogin = async ev => {\r\n        ev.preventDefault();\r\n        const { userName, password } = this.state.loginCred;\r\n        if (!userName || !password) {\r\n            return this.setState({ msg: 'Please enter user/password' });\r\n        }\r\n        const userCreds = { userName, password };\r\n        await this.props.login(userCreds);\r\n       if(this.props.loggedInUser.chats){\r\n           this.props.loggedInUser.chats.forEach(async chat=>{\r\n               await this.props.getChatById(chat._id);\r\n           })\r\n       }\r\n        // this.props.getChatsByUserId(this.props.loggedInUser._id);\r\n        \r\n        this.setState({ loginCred: { userName: '', password: '' } });\r\n        this.props.onNavBarClick()\r\n\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {/* <div onClick={()=>{this.props.onNavBarClick()}} className=\"modal-screen\">heyyyyyyyy</div> */}\r\n                <div className=\"login-modal\">\r\n                    <form onSubmit={this.doLogin}>\r\n                        <TextField\r\n                            autoFocus={true}\r\n                            required={true}\r\n                            type=\"text\"\r\n                            name=\"userName\"\r\n                            value={this.state.loginCred.userName}\r\n                            onChange={this.loginHandleChange}\r\n                            placeholder=\"User Name\"\r\n                        />\r\n                        <br />\r\n                        <br />\r\n\r\n                        <TextField\r\n                            required={true}\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            value={this.state.loginCred.password}\r\n                            onChange={this.loginHandleChange}\r\n                            placeholder=\"Password\"\r\n                        />\r\n                        <br />\r\n                        <br />\r\n\r\n                        <Button onClick={this.doLogin} variant=\"text\" variant=\"outlined\" color=\"primary\" >Login</Button>\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.userReducer.users,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    removeUser,\r\n    loadUsers,\r\n    getChatsByUserId,\r\n    getChatById\r\n};\r\n\r\n\r\n\r\nexport const LoginModal = connect(mapStateToProps, mapDispatchToProps)(_LoginModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { chatService } from \"../services/chatService.js\"\r\nimport userService from '../services/userService.js';\r\nimport { getChatById,toggleChat } from '../store/actions/chatActions.js';\r\nimport { shopService } from '../services/shopService.js'\r\n\r\n\r\nclass _ChatsList extends Component {\r\n\r\nstate={\r\n    chats:null,\r\n    usersInfo:{} \r\n}  \r\n \r\n async componentDidMount(){\r\n     console.log(this.props.chats);\r\n    if (this.props.chats){ \r\n        let chats=[];\r\n        let imgs;\r\n        this.props.loggedInUser.chats.forEach(async chat=>{\r\n            const fullChat = await chatService.getById(chat._id);\r\n            chats.push(fullChat);\r\n            const recipientId =await this.getRecipientId(fullChat.members);\r\n            const user = await userService.getById(recipientId);\r\n            await this.setStateWithRecipient(user);\r\n        })\r\n        await this.setState({chats:this.props.chats})\r\n    }\r\n}\r\nasync componentDidUpdate(prevProps){\r\n\r\n}\r\n\r\nasync setStateWithRecipient(user){\r\n    let userInfo={\r\n       [user._id]:{\r\n           img:user.imgUrl,\r\n           name:user.fullName\r\n       }\r\n    }; \r\n\r\n    if (!user.imgUrl){\r\n        const name=user.fullName.split(' ');\r\n        userInfo[user._id].img = `https://ui-avatars.com/api/?name=${name[0]}+${name[1]}`\r\n    }\r\n\r\n    if (user.isOwner) {\r\n        const shop = await shopService.getByUserId(user._id);\r\n         userInfo[user._id].name=shop.name;\r\n    }\r\n\r\n    await this.setState({usersInfo:{...this.state.usersInfo,...userInfo} })\r\n}\r\n\r\nonChatListClicked=(chatId)=>{\r\n    this.props.toggleChat({'chatId':chatId});\r\n}\r\n\r\ndisplayChatDetails= (chat)=>{\r\n    const id = this.getRecipientId(chat.members)\r\n    if (!this.state.usersInfo[id])return\r\n       return (\r\n            <div key={chat._id} className=\"chat-list-row flex\" onClick={()=>this.onChatListClicked(chat._id)}>   \r\n              <img src={this.state.usersInfo[id].img} alt=\"\"/>\r\n              <div>{this.state.usersInfo[id].name}</div>\r\n            </div>\r\n        )\r\n}\r\n\r\ngetRecipientId(members){\r\n    return (members[0]===this.props.loggedInUser._id)?members[1]:members[0]\r\n}\r\n    render() {\r\n     \r\n        return (    \r\n            <div className=\"chat-list-container\">\r\n                {(this.state.chats && this.state.chats.map(chat=>this.displayChatDetails(chat)))|| <div>No chats to load</div> }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isChatShown: state.chatReducer.isChatShown,\r\n        chats: state.chatReducer.chats,\r\n        currChat: state.chatReducer.currChat,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    getChatById,\r\n    toggleChat\r\n}\r\n\r\nexport const ChatsList = connect(mapStateToProps, mapDispatchToProps)(_ChatsList)\r\n\r\n","import React, { Component } from 'react'\r\nimport { NavLink, Router, withRouter } from 'react-router-dom'\r\nimport { LoginModal } from './LoginModal'\r\nimport { connect } from 'react-redux';\r\nimport { loadShops } from '../store/actions/shopActions'\r\nimport { logout } from '../store/actions/userActions';\r\nimport { ChatsList } from './ChatsList';\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faComments  } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nclass _NavBar extends Component {\r\n\r\n    state = {\r\n        showLoginModal: false,\r\n        showChatsList:false,\r\n        shop: '',\r\n        shopId: '',\r\n        pathName: ''\r\n    }\r\n    componentDidMount() {\r\n        this.setState({pathName: this.props.history.location.pathname})\r\n        \r\n    }\r\n    componentDidUpdate = async (prevProps) => {\r\n        if (this.props.user && prevProps.user._id !== this.props.user._id) {\r\n            await this.props.loadShops()\r\n            const shops = this.props.shops\r\n            if (this.props.user) {\r\n                const { user } = this.props\r\n                const userId = user._id\r\n                const userShop = shops.find(shop => shop.owner._id === userId)\r\n                if (userShop) this.setState({ shopId: userShop._id, shop: userShop })\r\n            }\r\n        }\r\n    }\r\n\r\n    onNavBarClick = () => {\r\n        this.setState({ showLoginModal: !this.state.showLoginModal });\r\n    }\r\n\r\n    onLogOut = () => {\r\n        this.props.logout();\r\n        this.props.history.push('/');\r\n    }\r\n    onToggleChatsList=()=>{\r\n        this.setState({showChatsList:!this.state.showChatsList})\r\n      }\r\n\r\n    render() {\r\n        const { user } = this.props\r\n        return (\r\n        <div>\r\n       \r\n            <div className={this.props.history.location.pathname === '/' ? 'main-nav' : 'main-nav-not-home'}>\r\n                <div className=\"left-nav\">\r\n                    <NavLink to=\"/\"><img className=\"logo-up\" src={require('../assets/img/logo.png')} alt=\"Home\" /></NavLink>\r\n                    <NavLink className=\"nav-btn\" to=\"/pet\">Gallery</NavLink>\r\n                    <NavLink className=\"nav-btn\" to=\"/about\">About Us</NavLink>\r\n                </div>\r\n                <div className=\"right-nav\">\r\n                    \r\n                    {user && user.isOwner && this.state.shopId && <NavLink className=\"nav-btn shop-btn\" to={`/shop/${this.state.shopId}`}> <img className=\"shop-img\" src={this.state.shop.imgUrls[0]} alt=\"\"/> {this.state.shop.name}</NavLink>}\r\n                    {user && !user.isOwner && !user.isGuest && <NavLink className=\"nav-btn\" to={`/profile/${user._id}`}>{user.fullName}</NavLink>}\r\n\r\n                    {user && !user.isGuest && <div className=\"chats-btn nav-btn\" onClick={this.onToggleChatsList}><FontAwesomeIcon className=\"send-icon\" icon={faComments} /></div>}\r\n\r\n                    {user && user.isGuest && <button className=\"login-btn nav-btn\" onClick={() => { this.onNavBarClick() }}>Login</button>}\r\n                    {user && !user.isGuest && <button className=\"logout-btn nav - btn\" onClick={() => { this.onLogOut() }}>Logout</button>}\r\n\r\n                    {this.state.showLoginModal && <LoginModal onNavBarClick={this.onNavBarClick} />}\r\n\r\n                    {user && user.isGuest && <NavLink className=\"nav-btn\" to=\"/signup\">Sign Up</NavLink>}\r\n                </div>\r\n            </div>\r\n                {this.state.showChatsList && <ChatsList/>}\r\n        </div>   \r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userReducer.loggedInUser,\r\n        shops: state.shopReducer.shops\r\n\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadShops,\r\n    logout\r\n}\r\n\r\n\r\nexport const NavBar = withRouter(connect(mapStateToProps, mapDispatchToProps)(_NavBar))\r\n\r\n// export const Header = withRouter(connect(mapStateToProps, mapDispatchToProps)(_Header)","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { OrderList } from '../cmps/OrderList.jsx';\r\nimport { UserDataModal } from '../cmps/UserDataModal.jsx';\r\nimport userService from '../services/userService.js';\r\nimport { loadOrders } from '../store/actions/orderActions.js'\r\n\r\n\r\nexport class _userProfile extends Component {\r\n\r\n\r\n    state = {\r\n        user: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const userId = this.props.match.params.id\r\n        const user = await userService.getById(userId)\r\n        this.setState({ user: { ...user } });\r\n\r\n    }\r\n\r\n    getUserOrders = () => {\r\n\r\n        const orders = this.props.loadOrders(this.state.user._id, 'buyer._id')\r\n    }\r\n\r\n    render() {\r\n\r\n        const { user } = this.state;\r\n        const loggedInUser = this.props.loggedInUser;\r\n        if (!user) return <h3>Loading...</h3>\r\n        return (\r\n            <div className=\"user-profile-box flex column\">\r\n                <UserDataModal user={user}/>\r\n                { user._id === loggedInUser._id &&\r\n                    <div className=\"user-profile-adoptions flex column\">\r\n                        <h2>My Adoption Requests</h2>\r\n                        <OrderList isShop={false} orderFilterName={\"buyer._id\"} filterById={user._id} />\r\n                    </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadOrders\r\n\r\n}\r\n\r\n\r\nexport const userProfile = connect(mapStateToProps, mapDispatchToProps)(_userProfile)","import React, { Component } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport {  FacebookIcon, TwitterIcon } from 'react-share'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\n\r\nexport class Footer extends Component {\r\n\r\n    \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"footer full\">\r\n                <NavLink to=\"/\"><img className=\"logo-footer\" src={require('../assets/img/logo-with-title.png')} alt=\"Home\" /></NavLink>\r\n                <p>Powered By ADA Systems.</p>\r\n                <div className=\"social\">\r\n                <a href=\"https://www.facebook.com/iHeartDogscom\" target=\"_blank\"><FacebookIcon size={30} /></a>\r\n                <a href=\"https://twitter.com/AdoptCatsDogs\" target=\"_blank\"><TwitterIcon size={30} /></a>\r\n                <a href=\"https://www.instagram.com/charlie_retriever/?hl=en\" target=\"_blank\"><img className=\"insta-logo\" src={require('../assets/img/insta.png')} alt=\"\"/></a>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3002/'\r\nconst socketService = createSocketService();\r\n// const socketService = createDummySocketService();\r\n\r\nwindow.socketService = socketService;\r\nexport default socketService;\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n\r\n      console.log('socketservice:',eventName, 'Data', data);\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    setup() {\r\n      listenersMap = {}\r\n      window.listenersMap = listenersMap;\r\n    },\r\n    terminate() {\r\n      listenersMap = {}\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return;\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      });\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  return socketService;\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","\r\nimport React, { Component } from 'react'\r\nimport socketService from '../services/socketService'\r\nimport { connect } from 'react-redux';\r\nimport { loadPets } from '../store/actions/petActions.js';\r\nimport { loadChats, saveChat, getChatById,toggleChat } from '../store/actions/chatActions.js';\r\nimport { updateUser } from '../store/actions/userActions.js';\r\nimport userService from '../services/userService.js'\r\nimport { shopService } from '../services/shopService.js'\r\nimport { chatService } from '../services/chatService.js'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport { faTimes, faPaperPlane } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nclass _Chat extends Component {\r\n\r\n    state = {\r\n        chat: {\r\n            topic: '',\r\n            members: [],\r\n            msgs: []\r\n        },\r\n        msg: {\r\n            authorId: '',\r\n            createdAt: '',\r\n            txt: ''\r\n        },\r\n    }\r\n\r\n    async componentDidMount() {\r\n        console.log(this.props);\r\n        if (this.props.currChatInfo.chatId){\r\n            const chat= await chatService.getById(this.props.currChatInfo.chatId);\r\n            await this.setState({chat});\r\n           \r\n            const targetId = await (chat.members[0]===this.props.loggedInUser._id)?chat.members[1]:chat.members[0];\r\n            const target = await userService.getById(targetId);\r\n\r\n            ///same code\r\n            let targetName = target.fullName;\r\n            let targetImg = target.imgUrl;\r\n            if (!target.imgUrl){\r\n                const name=target.fullName.split(' ');\r\n                targetImg = `https://ui-avatars.com/api/?name=${name[0]}+${name[1]}`\r\n            }\r\n        \r\n            if (target.isOwner) {\r\n                const shop = await shopService.getByUserId(target._id);\r\n                targetName=shop.name;\r\n            }\r\n            this.setState({targetId:target._id,targetImg,targetName})\r\n            socketService.setup();\r\n            socketService.emit('chat topic', this.state.chat.topic);\r\n            socketService.on('chat addMsg', this.addMsg);\r\n        }else{\r\n            var initiate = this.props.loggedInUser;\r\n            console.log('logedIn', initiate);\r\n            var target = await userService.getById(this.props.currChatInfo.targetId);\r\n        \r\n            ///same code\r\n            let targetName = target.fullName;\r\n            let targetImg = target.imgUrl;\r\n            if (!target.imgUrl){\r\n                const name=target.fullName.split(' ');\r\n                targetImg = `https://ui-avatars.com/api/?name=${name[0]}+${name[1]}`\r\n            }\r\n        \r\n            if (target.isOwner) {\r\n                const shop = await shopService.getByUserId(target._id);\r\n                targetName=shop.name;\r\n            }\r\n            this.setState({targetId:target._id,targetImg,targetName})\r\n            // if(initiate.chats){\r\n            //     const chatId= initiate.chats.find(chat=>)\r\n            // }\r\n            // const chat= await chatService.getById(this.props.currChatInfo.chatId);\r\n            // await this.setState({chat});\r\n            // this.setChat(this.props.loggedInUser);\r\n        }\r\n    }\r\n    async setChatByChatId(chatId){\r\n        const chat = await chatService.getChatById(chatId);\r\n    }\r\n\r\n    setChat = async (user) => {\r\n        let userChat = null;\r\n        if (user.chats && user.chats.length > 0) {\r\n            console.log('userchats', user.chats, 'of user', user);\r\n            userChat = [...user.chats].find(chat => {\r\n                console.log('IN USER CHAT', chat);\r\n                return chat.topic === `${this.props.loggedInUser._id}__${this.props.targetId}`\r\n                    || chat.topic === `${this.props.targetId}__${this.props.loggedInUser._id}`;\r\n            })\r\n        }\r\n        console.log('userChat', userChat);\r\n        if (userChat) {\r\n            await this.props.getChatById(userChat._id)\r\n            await this.setState({ chat: { ...this.props.currChat } })\r\n        }\r\n        else {\r\n            await this.createChat(this.props.loggedInUser, this.state.targetId);\r\n        }\r\n\r\n        socketService.setup();\r\n        socketService.emit('chat topic', this.state.chat.topic);\r\n        console.log('TOPIC:',this.state.chat.topic);\r\n        socketService.on('chat addMsg', this.addMsg);\r\n    }\r\n\r\n    async checkIfChatExists(chatID){\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.terminate();\r\n    }\r\n\r\n    createChat = async (initiate, targetId) => {\r\n        const chat = {\r\n            topic: `${initiate._id}__${targetId}`,\r\n            members:[initiate._id,targetId],\r\n            msgs: []\r\n        }\r\n        await this.props.saveChat(chat);\r\n\r\n        // const users = [initiate, target];\r\n        // users.forEach(async user => {\r\n        //     if (!user.chats) {\r\n        //         user.chats = [];\r\n        //     }\r\n\r\n        //     if (this.props.currChat._id) {\r\n        //         const chatToAdd = {\r\n        //             _id: this.props.currChat._id,\r\n        //             topic: this.props.currChat.topic,\r\n        //         };\r\n        //         user.chats.push(chatToAdd);\r\n        //     }\r\n        //     await this.props.updateUser(user);\r\n        //     await this.setState({ chat: { ...this.props.currChat } });\r\n        // })\r\n    }\r\n\r\n    addMsg = async newMsg => {\r\n        await this.setState({\r\n            chat: {\r\n                ...this.state.chat,\r\n                msgs: [...this.state.chat.msgs, newMsg]\r\n            }\r\n        });\r\n        this.props.saveChat(this.state.chat);\r\n        this.props.updateUser(this.props.loggedInUser);\r\n    }\r\n\r\n    sendMsg = async (ev) => {\r\n        ev.preventDefault();\r\n        const msg = {\r\n            authorId: this.props.loggedInUser._id,\r\n            createdAt: new Date(),\r\n            txt: this.state.msg.txt\r\n        }\r\n        await this.setState({ msg: { ...msg } });\r\n        this.addMsg(this.state.msg);\r\n        socketService.emit('chat newMsg', this.state.msg);\r\n        this.setState({ msg: { authorId: '', createdAt: '', txt: '' } });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    onClose = () => {\r\n        this.props.toggleChat();\r\n    }\r\n\r\n    displayMsg = (msg, idx) => {\r\n        let classTxt = 'message-row ';\r\n        const time=new Date(msg.createdAt);\r\n        const isAuthor=msg.authorId === this.props.loggedInUser._id;\r\n        classTxt += isAuthor ? 'sender' : 'recipient';\r\n        return (\r\n            <div className={classTxt} key={idx}>\r\n                {!isAuthor && <img src={this.state.targetImg} alt=\"\"/>}\r\n                <div className=\"message-content\">\r\n                    <div className=\"txt\">{msg.txt}</div>\r\n                    <div className=\"date\" >{time.getHours()+':'+time.getMinutes()}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        if (this.state.chat.msgs.length===0) return  <div className=\"chat-container\"><h2>Loading</h2></div>\r\n        return (\r\n            <div className=\"chat-container\">\r\n                <section className=\"chat-title flex space-evenly\">\r\n                    <span>{this.state.targetName}</span>\r\n                    <button className=\"btn-close btn\" onClick={this.onClose}><FontAwesomeIcon className=\"close-icon\" icon={faTimes} /></button>\r\n                </section>\r\n                <section className=\"msgs-container\">\r\n                    {this.state.chat.msgs && this.state.chat.msgs.slice(0).reverse().map((msg, idx) => (\r\n                        this.displayMsg(msg, idx))\r\n                    )}\r\n                </section>\r\n                <form onSubmit={this.sendMsg}>\r\n                    <section className=\"input-container flex space-around\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={this.state.msg.txt}\r\n                            onChange={this.msgHandleChange}\r\n                            name=\"txt\"\r\n                            autoComplete=\"off\"\r\n                            placeholder=\"Type Message Here\"\r\n                        />\r\n                        <button className=\"btn-send\"><FontAwesomeIcon className=\"send-icon\" icon={faPaperPlane} /></button>\r\n                    </section>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isChatShown: state.chatReducer.isChatShown,\r\n        chats: state.chatReducer.chats,\r\n        currChatInfo: state.chatReducer.currChatInfo,\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    loadChats,\r\n    saveChat,\r\n    getChatById,\r\n    updateUser,\r\n    toggleChat\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat)","import React, { Component } from 'react'\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Home } from './pages/Home';\r\nimport { SignUp } from './pages/SignUp';\r\nimport { About } from './cmps/About';\r\nimport { PetApp } from './pages/PetApp';\r\nimport { PetEdit } from './pages/PetEdit';\r\nimport { PetDetails } from './pages/PetDetails';\r\nimport { ShopDetails } from './pages/ShopDetails';\r\nimport { NavBar } from './cmps/NavBar';\r\nimport { userProfile } from './pages/userProfile';\r\nimport { Footer } from './cmps/Footer';\r\nimport {Chat} from './cmps/Chat'\r\nimport { toggleChat } from './store/actions/chatActions.js';\r\n\r\n class _App extends Component {\r\n\r\n  state={\r\n    isChatShown:false\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.setState({isChatShown:this.props.isChatShown})\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(prevProps!==this.props) this.setState({isChatShown:this.props.isChatShown})\r\n    console.log(this.props.isChatShown);\r\n  }\r\n\r\n\r\n  render() {\r\n   \r\n    \r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <header >\r\n          <NavBar  onToggleChatsList={this.onToggleChatsList}/>\r\n        </header>\r\n        <main>\r\n          {this.state.isChatShown && <Chat/>}\r\n          <Switch>\r\n            <Route component={ShopDetails} path=\"/shop/:id\" />\r\n            <Route component={PetDetails}  path=\"/details/:id?\" />\r\n            <Route component={PetEdit} path=\"/edit/:id?\" />\r\n            <Route component={SignUp} path=\"/signup/:type?\" />\r\n            {/* <Route component={About} path=\"/about\" /> */}\r\n            <Route component={userProfile} path=\"/profile/:id\" />\r\n            <Route component={PetApp} path=\"/pet/:filterType?\" />\r\n            <Route component={Home} path=\"/\" /> \r\n          {/* {this.state.isChatsList && <Route component={ChatsList} />}  */}\r\n          </Switch>\r\n        </main>\r\n        <footer>\r\n          <Footer />\r\n        </footer>\r\n      </div >\r\n    );\r\n  }\r\n  \r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n      isChatShown: state.chatReducer.isChatShown,\r\n     \r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  toggleChat\r\n}\r\n\r\nexport const App = connect(mapStateToProps)(_App)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    pets: [],\r\n    filterBy: {\r\n        type:'',\r\n        gender:'',\r\n        breed:'',\r\n        size:'',\r\n        txt:'',\r\n        distance:{\r\n            lat:0,\r\n            lon:0,\r\n            range:0\r\n        }\r\n    }\r\n}\r\n\r\nexport function petReducer(state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n        case 'LOAD_PETS':\r\n            return {\r\n                ...state,\r\n                pets: [...action.pets]\r\n            }\r\n        case 'ADD_PET':\r\n            return {\r\n                ...state,\r\n                pets: [...state.pets, action.petToSave]\r\n            }\r\n        case 'EDIT_PET':\r\n            console.log(action.petToSave);\r\n            return {\r\n                ...state,\r\n                pets: state.pets.map(pet => {\r\n                    if (pet._id === action.petToSave._id)  return action.petToSave\r\n                    return pet\r\n                })\r\n            }\r\n        case 'REMOVE_PET':\r\n            return {\r\n                ...state,\r\n                pets: state.pets.filter(pet => pet._id !== action.petId)\r\n            }\r\n        case 'SET_FILTER':\r\n            console.log(action.filterBy);\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","const initialState = {\r\n    shops: [],\r\n    currShop: {}\r\n}\r\n\r\nexport function shopReducer(state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n        case 'LOAD_SHOPS':\r\n            return {\r\n                ...state,\r\n                shops: [...action.shops]\r\n            }\r\n        case 'GET_SHOP':\r\n            return {\r\n                ...state,\r\n                currShop: JSON.parse(JSON.stringify(action.shop))\r\n            }\r\n        case 'ADD_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: [...state.shops, action.shopToSave]\r\n            }\r\n        case 'EDIT_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: state.shops.map(shop => {\r\n                    if (shop._id === action.shopToSave._id) return action.shopToSave;\r\n                    return shop;\r\n                })\r\n            }\r\n        case 'REMOVE_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: state.shops.filter(shop => shop._id !== action.shopId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","let localLoggedinUser = {_id: 'guest', fullName: 'guest', isGuest: true};\r\n\r\nconst initialState = {\r\n    loggedInUser: localLoggedinUser,\r\n    users: []\r\n};\r\n\r\nexport function userReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            // console.log('action.user', action.user);\r\n            return {\r\n                ...state, loggedInUser: action.user\r\n            };\r\n        case 'UPDATE_USER':\r\n            return {\r\n                ...state,\r\n                users: state.users.map(user => {\r\n                    if (user._id === action.userToSave._id) return action.userToSave;\r\n                    return user;\r\n                })\r\n            }\r\n        case 'USER_REMOVE':\r\n            return {\r\n                ...state,\r\n                users: state.users.filter(user => user._id !== action.userId)\r\n            };\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state, users: action.users\r\n            };\r\n        case 'LOGOUT':\r\n            return {\r\n                ...state, loggedInUser: localLoggedinUser\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","const initialState = {\r\n    orders: [],\r\n    filterBy: {\r\n        shop:''\r\n    }\r\n}\r\n\r\nexport function orderReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'LOAD_ORDERS':\r\n            return {\r\n                ...state,\r\n                orders: [...action.orders]\r\n            }\r\n        case 'ADD_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: [...state.orders, action.orderToSave]\r\n            }\r\n        case 'EDIT_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: state.orders.map(order => {\r\n                    if (order._id === action.orderToSave._id) return action.orderToSave;\r\n                    return order;\r\n                })\r\n            }\r\n        case 'REMOVE_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: state.orders.filter(order => order._id !== action.orderId)\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","const initialState = {\r\n    isChatShown:false,\r\n    currChatInfo:null,\r\n    chats: [],\r\n    currChatId:'',\r\n    filterBy: {}\r\n}\r\n\r\nexport function chatReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'TOGGLE_CHAT':\r\n            if (!action.chatInfo){\r\n                return {\r\n                    ...state,\r\n                    isChatShown: false,\r\n                    currChatInfo: {...action.chatInfo}\r\n                }\r\n            }\r\n            return {\r\n                ...state,\r\n                isChatShown: true,\r\n                currChatInfo: {...action.chatInfo}\r\n            }\r\n        case 'LOAD_CHATS':\r\n            return {\r\n                ...state,\r\n                chats: [...action.chats]\r\n            }\r\n        case 'GET_CHAT':\r\n            console.log(state);\r\n            return {\r\n                ...state,\r\n                chats: [...state.chats,action.chat]\r\n            }\r\n        case 'ADD_CHAT':\r\n            console.log('IN REDUCER',action.chatToSave);\r\n            return {\r\n                ...state,\r\n                chats: [...state.chats, action.chatToSave],\r\n            }\r\n        case 'EDIT_CHAT':\r\n            return {\r\n                ...state,\r\n                chats: state.chats.map(chat => {\r\n                    if (chat._id === action.chatToSave._id) return action.chatToSave;\r\n                    return chat;\r\n                }),\r\n            }\r\n        case 'REMOVE_CHAT':\r\n            return {\r\n                ...state,\r\n                chats: state.chats.filter(chat => chat._id !== action.chatId)\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { petReducer } from './reducers/petReducer';\r\nimport { shopReducer } from './reducers/shopReducer';\r\nimport { userReducer } from './reducers/userReducer'\r\nimport { orderReducer } from './reducers/orderReducer'\r\nimport { chatReducer } from './reducers/chatReducer';\r\n// import { reviewReducer } from './reducers/reviewReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    petReducer,\r\n    shopReducer,\r\n    userReducer,\r\n    orderReducer,\r\n    chatReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './assets/scss/global.scss'\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {Provider} from 'react-redux'\r\nimport {store} from './store/store'\r\nimport {HashRouter as Router} from 'react-router-dom'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}> \r\n    <Router>\r\n    <App />\r\n    </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}