(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{141:function(e,t,a){e.exports=a(243)},146:function(e,t,a){},179:function(e,t,a){var n={"./cat.png":180,"./dog.png":181,"./farm.png":182,"./other.png":183};function r(e){var t=c(e);return a(t)}function c(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=179},180:function(e,t,a){e.exports=a.p+"static/media/cat.269e723b.png"},181:function(e,t,a){e.exports=a.p+"static/media/dog.1afb1629.png"},182:function(e,t,a){e.exports=a.p+"static/media/farm.976d3f34.png"},183:function(e,t,a){e.exports=a.p+"static/media/other.6672fc57.png"},184:function(e,t,a){e.exports=a.p+"static/media/hero1.8b5847e5.jpg"},185:function(e,t,a){e.exports=a.p+"static/media/about1.679fdfa6.png"},186:function(e,t,a){e.exports=a.p+"static/media/about2.18fa0a8f.png"},187:function(e,t,a){e.exports=a.p+"static/media/about3.3f0198c1.png"},208:function(e,t,a){e.exports=a.p+"static/media/logo.9b0c6cc2.png"},209:function(e,t,a){e.exports=a.p+"static/media/logo-with-title.85dfceb8.png"},210:function(e,t,a){e.exports=a.p+"static/media/insta.e77ccb90.png"},239:function(e,t){},243:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),o=(a(146),a(9)),i=a(10),l=a(13),u=a(12),p=a(25),m=a(15),d=a(21),h=a(20),f=a(1),v=a.n(f),g=a(3),b=a(4),E=a(285),y=a(283),O=a(284),w=a(273),x=a(274),j=a(276),C=a(18),k=a(14),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={gender:{txt:"",male:!1,female:!1},distance:{range:0}},e.onGenderChange=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={male:!1,female:!1},n=Object(g.a)(Object(g.a)({},n),{},Object(h.a)({},a,!e.state.gender[a])),console.log(n),t.next=5,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{gender:Object(g.a)({},n)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDistanceChange=function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.target.value,console.log(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.onShow=function(){e.state.gender.male,e.gender.female,console.log(e.state),e.props.onToggleFilterModal()},e.onClear=function(){},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"displayTags",value:function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("label",{htmlFor:""},e),r.a.createElement(O.a,{type:"checkbox",name:"",value:e}))}},{key:"displayGenderBtns",value:function(){var e=this,t=this.state.gender;return r.a.createElement("section",{className:"gender"},r.a.createElement(E.a,{htmlFor:""},"Gender"),r.a.createElement("div",{className:t.male?"pet-gender pressed":"pet-gender",onClick:function(){return e.onGenderChange("male")}},r.a.createElement(C.a,{className:" pet-gender-male-icon",icon:k.j})),r.a.createElement("div",{className:t.female?"pet-gender pressed":"pet-gender",onClick:function(){return e.onGenderChange("female")}},r.a.createElement(C.a,{className:" pet-gender-female-icon",icon:k.q})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"tags-modal"},r.a.createElement("div",{className:"container"},r.a.createElement(w.a,null,this.displayGenderBtns(),r.a.createElement("section",null,r.a.createElement(E.a,{htmlFor:"age"},"Age"),r.a.createElement(y.a,{native:!0,onChange:this.props.handleChange,inputProps:{name:"age",id:"age-native-simple"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:1},"Puppy"),r.a.createElement("option",{value:7},"Grown up"),r.a.createElement("option",{value:15},"Old"))),r.a.createElement("section",null,r.a.createElement(E.a,{htmlFor:"size"},"Size"),r.a.createElement(y.a,{native:!0,onChange:this.props.handleChange,inputProps:{name:"size",id:"age-native-simple"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"small"},"Small"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"big"},"Big"))),r.a.createElement("section",null,r.a.createElement(E.a,{htmlFor:""},"Distance(km)"),r.a.createElement(x.a,{type:"number",name:"",min:"1",id:"",onChange:this.onDistanceChange})),r.a.createElement("section",{className:"btns-container"}),r.a.createElement(j.a,{variant:"contained",onClick:this.onShow},"Show"),r.a.createElement(j.a,{variant:"contained",onClick:this.onClear},"Clear"))))}}]),a}(n.Component),N=a(127),I=a.n(N).a.create({withCredentials:!0}),_=function(e,t){return R(e,"GET",t)},U=function(e,t){return R(e,"POST",t)},D=function(e,t){return R(e,"PUT",t)},A=function(e,t){return R(e,"DELETE",t)};function R(e){return T.apply(this,arguments)}function T(){return(T=Object(b.a)(v.a.mark((function e(t){var a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,I({url:"".concat("/api").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var P=a(128),B={query:function(e){return L.apply(this,arguments)},getPetById:function(e){return M.apply(this,arguments)},save:function(e){return F.apply(this,arguments)},remove:function(e){return H.apply(this,arguments)}};function L(){return(L=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",e.next=3,_("".concat("/pet").concat(""),{params:t});case 3:return a=e.sent,n=G(a,t),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/pet","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=7;break}return e.next=3,D("".concat("/pet","/").concat(t._id),t);case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.next=9,U("".concat("/pet"),t);case 9:return n=e.sent,e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat("/pet","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t){if(!t)return e;var a=e;if(t.txt){t.txt=t.txt.trim(" "),t.txt=t.txt.trim(",");var n=t.txt.split(" ");(n.length=1)&&(n=t.txt.split(",")),n.forEach((function(e){a=a.filter((function(t){if(t.name.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)||t.gender.toLowerCase().includes(e)||t.size.toLowerCase().includes(e)||t.summary.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.shop.fullName.toLowerCase().includes(e))return t}))}))}if(a=a.filter((function(e){return e.type.toLowerCase().includes(t.type)})),t.distance.range){var r={lat:t.distance.lat,lng:t.distance.lon};a=a.filter((function(e){var a={lat:e.location.lat,lng:e.location.lng},n=P.SphericalUtil.computeDistanceBetween(r,a)/1e3;return console.log("distanceFromUser",n),n<=t.distance.range}))}return a}function z(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.query(e);case 2:n=t.sent,a({type:"LOAD_PETS",pets:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function q(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_PET",petToSave:n}):a({type:"ADD_PET",petToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function W(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.remove(e);case 2:a({type:"REMOVE_PET",petId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function V(e){return function(t){t({type:"SET_FILTER",filterBy:e})}}var Y=a(44),J=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isClearShown:!1},e.onInputChange=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a.target.value),n=a.target.value,e.setState({isClearShown:""!==n}),t.next=5,e.setState({txt:n});case 5:if(n||"hero"===e.state.parent){t.next=8;break}return t.next=8,e.onSearch();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.keyPress=function(t){13==t.keyCode&&e.onSearch()},e.onClear=Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({txt:""}),e.props.setFilter({txt:""},(function(){return e.props.loadPets()})),e.setState({isClearShown:!1});case 3:case"end":return t.stop()}}),t)}))),e.onSearch=Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter({txt:e.state.txt},(function(){return e.props.loadPets()}));case 2:console.log(e.props),"hero"===e.state.parent&&e.props.history.push("/pet");case 4:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({txt:this.props.filterBy.txt});case 2:return e.next=4,this.setState({parent:this.props.parent});case 4:this.setState({isClearShown:""!==this.state.txt}),this.props&&console.log(this.props);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e!==this.props&&(this.setState({txt:this.props.filterBy.txt}),this.setState({isClearShown:""!==this.state.txt}))}},{key:"render",value:function(){var e=this;return r.a.createElement("section",{className:"search-container flex"},r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"search",type:"text",name:"search",value:this.state.txt,autoComplete:"off",placeholder:"Find a friend (i.e. small, cat, puppy)",onChange:function(t){return e.onInputChange(t)},onKeyDown:this.keyPress}),r.a.createElement(C.a,{className:"search-icon",icon:k.m}),r.a.createElement(C.a,{className:this.state.isClearShown?"clear-icon":"clear-icon hidden",onClick:this.onClear,icon:k.p})),r.a.createElement("div",{className:"btn-search",onClick:this.onSearch},"Search"))}}]),a}(n.Component),K={setFilter:V,loadPets:z},Q=Object(p.f)(Object(m.b)((function(e){return{filterBy:e.petReducer.filterBy}}),K)(J)),X=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={dog:!1,cat:!1,farm:!1,other:!1},e.imgClicked=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n={dog:!1,cat:!1,farm:!1,other:!1},!e.state[a]){t.next=7;break}return t.next=4,e.setState(Object(g.a)({},n));case 4:a="",t.next=9;break;case 7:return t.next=9,e.setState(Object(g.a)(Object(g.a)({},n),{},Object(h.a)({},a,!e.state.type)));case 9:e.props.onCategoryChange({type:a});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"displayTypesBtn",value:function(e){var t=this,n=this.state[e]?"pressed":"";return r.a.createElement("img",{key:e,src:a(179)("./".concat(e,".png")),className:n,alt:"Category",onClick:function(){return t.imgClicked(e)}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"category-list anchor"},Object.keys(this.state).map((function(t){return e.displayTypesBtn(t)})))}}]),n}(n.Component),Z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={parent:"",filterBy:{type:"",gender:"",breed:"",size:"",txt:"",distance:{lat:0,lon:0,range:0}},position:{lat:0,lon:0},isModalShown:!1,tags:[]},e.getUserPosition=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={lat:a.coords.latitude,lon:a.coords.longitude,range:0},t.next=3,e.setState({filterBy:Object(g.a)(Object(g.a)({},e.state.filterBy),{},{distance:n})});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFilterChange=function(t){e.updateFilterAndLoad(t)},e.handleInput=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.name,c="number"===n.type?+n.value:n.value,t.next=5,e.setState((function(e){return"range"===r?Object(g.a)(Object(g.a)({},e),{},{filterBy:Object(g.a)(Object(g.a)({},e.filterBy),{},{distance:Object(g.a)(Object(g.a)({},e.filterBy.distance),{},Object(h.a)({},r,c))})}):Object(g.a)(Object(g.a)({},e),{},{filterBy:Object(g.a)(Object(g.a)({},e.filterBy),{},Object(h.a)({},r,c))})}));case 5:e.onFilterChange(e.state.filterBy);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleFilterModal=function(){e.setState({isModalShown:!e.state.isModalShown})},e.onApplyFilter=function(){e.onToggleFilterModal()},e.resetFilter=Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState(Object(g.a)(Object(g.a)({},e.state.filterBy),{},{type:"",gender:"",breed:"",size:"",txt:""}));case 2:e.props.setFilter(e.state.filterBy,(function(){return e.props.loadPets()}));case 3:case"end":return t.stop()}}),t)}))),e.onToggleTag=function(t){var a=t.target.value,n=Object(d.a)(e.state.tags);n.includes(a)?n.splice(n.indexOf(a),1):n.push(a),e.setState({tags:n}),console.log(e.state.tags)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation.getCurrentPosition(this.getUserPosition,(function(e){console.error("Error Code = "+e.code+" - "+e.message)}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateFilterAndLoad",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.setFilter(Object(g.a)(Object(g.a)({},this.props.filterBy),t),(function(){return a.loadPets()}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isModalShown;return r.a.createElement("div",{className:"filter-container flex column align-center"},r.a.createElement("section",{className:"search-container flex space-around"},r.a.createElement(Q,{parent:"main",onInputChange:this.onInputChange})),r.a.createElement("section",{className:"category-container"},r.a.createElement(X,{onCategoryChange:this.onFilterChange})),r.a.createElement("section",null,r.a.createElement(E.a,{htmlFor:"Distance(km)"},"Distance(km)"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"range",type:"number"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"20"},"20km"),r.a.createElement("option",{value:"50"},"50km"),r.a.createElement("option",{value:"100"},"100km"),r.a.createElement("option",{value:"200"},"200km"))),e&&r.a.createElement(S,{filterBy:this.props.filterBy,onToggleTag:this.onToggleTag,onFilterChange:this.onFilterChange,onToggleFilterModal:this.onToggleFilterModal}),r.a.createElement("br",null))}}]),a}(n.Component),$={setFilter:V,loadPets:z},ee=Object(m.b)((function(e){return{filterBy:e.petReducer.filterBy}}),$)(Z),te=a(129),ae=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(te.Parallax,{bgImage:a(184),bgImageAlt:"the cat",strength:800,style:{width:"100%"}},r.a.createElement("div",{className:"hero-container full"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("h1",{className:"hero-heading-up"},r.a.createElement("span",{className:"span"},"Friendly.")," Adopt a ",r.a.createElement("span",{className:"span"},"pet")," "),r.a.createElement("h1",{className:"hero-heading"},"Discover your next best friend"),r.a.createElement(Q,{parent:"hero"}),r.a.createElement("section",{className:"category-container"}))))}}]),n}(n.Component),ne=a(22),re=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"about-main-container full"},r.a.createElement("div",{className:"about-left"},r.a.createElement("div",{className:"about-headings"},r.a.createElement("h1",null,"Friendly connects adoption centers to potential adopters")),r.a.createElement("div",{className:"call-to-action"},r.a.createElement(ne.b,{to:"/pet"},r.a.createElement("button",{className:"go-to-gallery-btn"},"Let's See Some Animals")))),r.a.createElement("div",{className:"about-right"},r.a.createElement("div",{className:"adoption-reasons-box"},r.a.createElement("h3",{className:"adoption-reasons-header"},"Why Should I Adopt?"),r.a.createElement("p",null,"Decrease blood pressure."),r.a.createElement("p",null,"Decrease feelings of loneliness."),r.a.createElement("p",null,"Increase opportunities for exercise and outdoor activities."),r.a.createElement("p",{className:"adoption-reason-last"},"Increase opportunities for socialization.")),r.a.createElement("div",{className:"images-box"},r.a.createElement("img",{className:"img-1",src:a(185),alt:""}),r.a.createElement("img",{className:"img-2",src:a(186),alt:""}),r.a.createElement("img",{className:"img-3",src:a(187),alt:""}))))}}]),n}(n.Component),ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pets:[]},e.loadPets=function(){e.props.loadPets()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.loadPets()}},{key:"render",value:function(){this.props.user;return r.a.createElement("div",null,r.a.createElement(ae,null),r.a.createElement(re,null))}}]),a}(n.Component),se={loadPets:z},oe=Object(m.b)((function(e){return{pets:e.petReducer.pets,user:e.userReducer.loggedInUser}}),se)(ce),ie=a(288),le=a(286),ue=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={lat:0,lng:0},e.setLocToFind=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target.value,console.log("find:",n),t.next=4,e.findLocation(n,e.getLatLng);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findLocation=function(){var e=Object(b.a)(v.a.mark((function e(t,n){var r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a(188),r({key:"AIzaSyDGql0MyVMEQeH89LQj0TtpM66SoLpkAhw"}).find(t,n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),e.getLatLng=function(){var t=Object(b.a)(v.a.mark((function t(a,n){var r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n;case 2:if(!((r=t.sent)&&r.length>0)){t.next=8;break}return t.next=6,e.setState({lat:r[0].location.lat,lng:r[0].location.lng});case 6:c={lat:e.state.lat,lng:e.state.lng},e.props.getGeolocation(c);case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this;return this.state?r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(ie.a,{type:"text",name:"locName",placeholder:"Your Shop Location",onChange:function(t){e.setLocToFind(t),e.props.signupHandleChange(t)}})):r.a.createElement("h1",null,"LOADING...")}}]),n}(r.a.Component),pe={login:function(e){return me.apply(this,arguments)},logout:function(){return he.apply(this,arguments)},signup:function(e){return de.apply(this,arguments)},getUsers:function(){return _("user")},getById:function(e){return _("".concat("/user","/").concat(e))},remove:function(e){return A("".concat("/user","/").concat(e))},update:function(e){return D("user/".concat(e._id),e)}};function me(){return(me=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("".concat("/auth","/login"),t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("user",t);case 2:return a=e.sent,e.abrupt("return",a[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U("".concat("/auth","/logout"));case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ve(){return(ve=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.getById(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",userToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function be(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.login(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Ee(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.signup(e);case 2:n=t.sent,a({type:"SET_USER",user:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ye(){return function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.logout();case 2:t({type:"LOGOUT"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var Oe={query:function(){return we.apply(this,arguments)},getById:function(e){return xe.apply(this,arguments)},getByUserId:function(e){return je.apply(this,arguments)},save:function(e){return Ce.apply(this,arguments)},remove:function(e){return ke.apply(this,arguments)}};function we(){return(we=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/shop"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){return(xe=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/shop","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/shop","/owner/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=4,D("".concat("/shop","/").concat(t._id),t);case 4:return a=e.sent,e.abrupt("return",a);case 8:t.createdAt=new Date(Date.now()).toLocaleString();case 9:return t.pets=[],t.reviews=[],e.next=13,U("".concat("/shop"),t);case 13:return n=e.sent,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat("/shop","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(){return function(){var e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.query();case 2:a=e.sent,t({type:"LOAD_SHOPS",shops:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function Ne(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_SHOP",shopToSave:n}):a({type:"ADD_SHOP",shopToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var Ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={userAdopt:!1,userShop:!1,signupCred:""},e.setUserAdopt=function(){e.setState({userAdopt:!0,userShop:!1})},e.setUserShop=function(){e.setState({userShop:!0,userAdopt:!1})},e.signupHandleChange=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.target,r=n.name,c=n.value,t.next=3,e.setState((function(e){return{signupCred:Object(g.a)(Object(g.a)({},e.signupCred),{},Object(h.a)({},r,c))}}));case 3:console.log("This State:",e.state);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.doSignup=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c,s,o,i,l,u,p,m,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state,n.userAdopt,r=n.userShop,c=e.state.signupCred,s=c.fullName,o=c.username,i=c.password,l=c.address,u=c.email,p=c.phone,s&&o&&i&&l){t.next=5;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 5:return m={fullName:s,username:o,password:i,imgUrl:"https://ui-avatars.com/api/?name=".concat(s.substring(0,1),"+").concat(s.substring(s.indexOf(" ")+1,s.indexOf(" ")+2)),address:l,email:u,phone:p,isOwner:r,isGuest:!1},t.next=8,e.props.signup(m);case 8:return t.next=10,e.props.loadUsers();case 10:d=e.props.users[e.props.users.length-1],console.log("userNow:",d),e.setState({signupCred:{fullName:"",username:"",password:"",address:"",email:"",phone:""}}),r&&e.signUpShop(d),e.props.history.push("/");case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.signUpShop=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c,s,o,i,l,u,p,m,d;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.signupCred,r=n.name,c=n.type,s=n.title,o=n.desc,i=n.locName,l=n.lat,u=n.lng,r&&c&&s&&o&&i){t.next=3;break}return t.abrupt("return",e.setState({msg:"All inputs are required!"}));case 3:return p={_id:a._id,fullName:a.fullName,imgUrl:a.imgUrl},m={name:i,lat:parseFloat(l),lng:parseFloat(u)},d={name:r,type:c,owner:p,title:s,desc:o,location:m},e.props.saveShop(d),a.isOwner=!0,t.next=10,e.props.updateUser(a);case 10:e.setState({signupCred:{name:"",type:"",owner:"",title:"",description:"",location:""}});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getGeolocation=function(t){e.setState({signupCred:Object(g.a)(Object(g.a)({},e.state.signupCred),{},{lat:t.lat,lng:t.lng})})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.userAdopt,n=t.userShop;this.props.loggedInUser;return console.log("this.state.signupCred",this.state.signupCred),r.a.createElement("div",{className:"form-container flex column align-center"},r.a.createElement("h1",null,"We are happy you decided to join us!"),r.a.createElement("p",null,"Do you want to adopt or to find adopters for your animals?"),r.a.createElement("div",{className:"btn-menu flex"},r.a.createElement("button",{onClick:function(){e.setUserAdopt()}},"Adopt"),r.a.createElement("button",{onClick:function(){e.setUserShop()}},"Find Adopters")),r.a.createElement("div",{className:"fields-container flex column align-center"},a?r.a.createElement("h3",null,"New Adopter"):r.a.createElement("h3",null,"Please filled out this form so we will be able to get to know you and your animals"),r.a.createElement("form",{className:"flex column align-center",onSubmit:this.doSignup},r.a.createElement("div",{className:"flex"},r.a.createElement("div",{className:"flex column align-center"},r.a.createElement("br",null),r.a.createElement(ie.a,{type:"text",name:"fullName",placeholder:"Full Name",onChange:this.signupHandleChange,value:this.state.signupCred.fullName}),r.a.createElement(ie.a,{type:"text",name:"username",placeholder:"User Name",onChange:this.signupHandleChange,value:this.state.signupCred.username}),r.a.createElement(ie.a,{type:"password",name:"password",placeholder:"Password",onChange:this.signupHandleChange,value:this.state.signupCred.password}),r.a.createElement(ie.a,{type:"text",name:"address",placeholder:"Personal Address",onChange:this.signupHandleChange,value:this.state.signupCred.address}),r.a.createElement(ie.a,{type:"text",name:"email",placeholder:"Email",onChange:this.signupHandleChange,value:this.state.signupCred.email}),r.a.createElement(ie.a,{type:"text",name:"phone",placeholder:"Phone",onChange:this.signupHandleChange,value:this.state.signupCred.phone})),n&&r.a.createElement("div",{className:"flex column align-center"},r.a.createElement(ie.a,{type:"text",name:"name",placeholder:"Your Shop Name",onChange:this.signupHandleChange}),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"type"},"Shop Type:"),r.a.createElement(y.a,{native:!0,onChange:this.signupHandleChange,inputProps:{name:"type"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"shelter"},"Shelter"),r.a.createElement("option",{value:"volunteer"},"Volunteer"),r.a.createElement("option",{value:"private"},"Private"))),r.a.createElement(ie.a,{type:"text",name:"title",placeholder:"Your shop title/catchFrase",onChange:this.signupHandleChange}),r.a.createElement(ie.a,{id:"standard-textarea",label:"Shop Description:",placeholder:"Your shop short description",multiline:!0,name:"desc",onChange:this.signupHandleChange}),r.a.createElement(ue,{getGeolocation:this.getGeolocation,signupHandleChange:this.signupHandleChange}),r.a.createElement("br",null))),r.a.createElement("button",null,"Signup"))))}}]),a}(n.Component),_e={signup:Ee,login:be,loadUsers:fe,saveShop:Ne,loadShops:Se,getUserById:function(e){return ve.apply(this,arguments)},updateUser:ge},Ue=Object(m.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser,shops:e.shopReducer.shops}}),_e)(Ie),De=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pet:{},isLiked:!1,loveIconClass:"love-icon"},e.onUpdateReaction=function(){var t=Object(b.a)(v.a.mark((function t(a,n){var r,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),r=e.state.pet,c=r.reacts.map((function(t){return t.type===n&&(e.setState({isLiked:!e.state.isLiked}),t.count+=e.state.isLiked?-1:1,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isLiked:!e.state.isLiked}))),t})),t.next=5,e.setState(Object(g.a)(Object(g.a)({},r),{},{reacts:Object(d.a)(c)}));case 5:return t.next=7,JSON.parse(JSON.stringify(e.state.pet));case 7:return s=t.sent,t.next=10,e.props.savePet(s);case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({pet:Object(g.a)({},this.props.pet)});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t==this.props){e.next=3;break}return e.next=3,this.setState({pet:Object(g.a)({},this.props.pet)});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(0===Object.keys(this.state.pet).length?this.props:this.state).pet,a=this.state.isLiked?"love-icon-active":"love-icon";return t&&t.reacts?r.a.createElement(ne.c,{to:"/details/".concat(t._id)},r.a.createElement("div",{className:"pet-preview"},t.isAdopted&&r.a.createElement("div",{class:"ribbon ribbon-top-right"},r.a.createElement("span",null,"Adopted")),r.a.createElement("img",{src:t.imgUrls?t.imgUrls[0]:"",alt:"pet"}),r.a.createElement("div",{className:"card-description"},r.a.createElement("div",{className:"card-description-header"},r.a.createElement("h2",{className:"pet-name"},t.name),"Male"===t.gender&&r.a.createElement(C.a,{className:"pet-gender-male-icon",icon:k.j}),"Male"!==t.gender&&r.a.createElement(C.a,{className:"pet-gender-female-icon",icon:k.q})),r.a.createElement("h4",null,t.summary)),r.a.createElement("div",{className:"shop-container"},t.shop&&r.a.createElement(ne.b,{to:"/shop/".concat(t.shop._id)},t.shop.fullName),r.a.createElement("div",{onClick:function(t){e.onUpdateReaction(t,"love")},className:"pet-rate-box"},r.a.createElement("div",{className:"content"},r.a.createElement("span",null,t.reacts&&"love"===t.reacts[0].type?r.a.createElement("span",{className:a}):""," ")),t.reacts&&"love"===t.reacts[0].type?r.a.createElement("span",{className:"love-count"},t.reacts[0].count):"")))):r.a.createElement("h1",null,"loading...")}}]),a}(n.Component),Ae={savePet:q,loadPets:z},Re=Object(m.b)((function(e){return{}}),Ae)(De);function Te(e){var t=e.pets,a=e.onRemove,n=e.onEdit;return r.a.createElement("div",{className:"pet-list-container"},r.a.createElement("ul",{className:"pet-list"},t.map((function(e){return r.a.createElement(Re,{pet:e,onRemove:a,onEdit:n})}))))}var Pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pets:[],filterBy:{type:""},sortBy:null,isReady:!1},e.resetFitler=Object(b.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.setFilter({type:"",gender:"",breed:"",size:"",txt:""},(function(){return e.loadPets()}));case 2:case"end":return t.stop()}}),t)}))),e.loadPets=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadPets(e.props.filterBy);case 2:return n=e.props.pets,t.next=5,e.setState(Object(g.a)(Object(g.a)({},e.state),{},{pets:n}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.props.removePet(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadPets();case 2:Y.animateScroll.scrollToTop();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.props&&this.setState({isReady:!0}),t.filterBy===this.props.filterBy){e.next=4;break}return e.next=4,this.loadPets();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.resetFitler();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user;return this.state.pets?r.a.createElement("div",{className:"pets-container"},r.a.createElement(ee,null),r.a.createElement("div",{id:"center"}),r.a.createElement(Te,{pets:this.state.pets,onRemove:this.onRemove,user:e})):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),Be={loadPets:z,removePet:W,setFilter:V},Le=Object(m.b)((function(e){return{pets:e.petReducer.pets,filterBy:e.petReducer.filterBy}}),Be)(Pe),Me=a(287),Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pet:{}},e.handleInput=function(t){var a=t.target,n=a.name;if("number"===a.type)var r=+a.value;else r="checkbox"===a.type?a.checked:a.value;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{pet:Object(g.a)(Object(g.a)({},e.pet),{},Object(h.a)({},n,r))})}))},e.onSubmitForm=function(t){t.preventDefault(),e.props.savePet(e.state.pet),e.props.history.push("/")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadPets();case 2:(t=this.props.match.params.id)&&(a=this.props.pets.find((function(e){return e._id===t})),this.setState({pet:Object(g.a)({},a)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(g.a)({},this.state.pet);return 0===Object.keys(t).length?r.a.createElement("h1",null,"LOADING..."):r.a.createElement("form",{className:"form-container fields-container flex column align-center below-nav",onSubmit:function(t){e.onSubmitForm(t)}},t._id?r.a.createElement("h1",null,"Edit Pet Details"):r.a.createElement("h1",null,"Add Your Pet"),r.a.createElement(x.a,{type:"text",name:"name",placeholder:"Pet Name:",value:t.name,onChange:this.handleInput}),r.a.createElement(x.a,{type:"text",name:"type",placeholder:"Pet Type:",value:t.type,onChange:this.handleInput}),r.a.createElement(Me.a,{name:"adoptedAt",label:"Pet Adoption Date",type:"date",defaultValue:new Date(t.adoptedAt).toISOString().substr(0,10),onChange:this.handleInput,InputLabelProps:{shrink:!0}}),r.a.createElement(Me.a,{name:"bDate",label:"Pet Birth Date",type:"date",defaultValue:new Date(t.bDate).toISOString().substr(0,10),onChange:this.handleInput,InputLabelProps:{shrink:!0}}),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"type"},"Pet Gender:"),r.a.createElement(y.a,{native:!0,value:t.gender,onChange:this.handleInput,inputProps:{name:"gender"}},r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"))),r.a.createElement(x.a,{type:"text",name:"breed",placeholder:"Pet Breed:",value:t.breed,onChange:this.handleInput}),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"type"},"Pet Size:"),r.a.createElement(y.a,{native:!0,value:t.size,onChange:this.handleInput,inputProps:{name:"size"}},r.a.createElement("option",{value:"small"},"Small"),r.a.createElement("option",{value:"medium"},"medium"),r.a.createElement("option",{value:"large"},"Large"),r.a.createElement("option",{value:"giant"},"Giant"))),r.a.createElement(le.a,{className:"flex align-center"},r.a.createElement("lable",{htmlFor:"type"}," Is In Risk:",r.a.createElement("input",{type:"checkbox",checked:t.isInRisk?"checked":""})),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(Me.a,{id:"standard-textarea",label:"Pet description:",placeholder:"Your pet short description",multiline:!0,name:"description",value:t.description,onChange:this.handleInput}),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"kids"},"Select pet behavior with kids:"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"kids"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"dogs"},"Select pet behavior with dogs:"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"dogs"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"cats"},"Select pet behavior with cats:"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"cats"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"friendly"},"Friendly"),r.a.createElement("option",{value:"selective"},"Selective"),r.a.createElement("option",{value:"agressive"},"Agressive"))),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"energy"},"Select pet energy level:"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"energy"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"low"},"Low"),r.a.createElement("option",{value:"moderate"},"Moderate"),r.a.createElement("option",{value:"high"},"High"))),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"health"},"Select pet health condition:"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"health"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"helathy"},"Healthy"),r.a.createElement("option",{value:"notHealthy"},"Not Healthy"))),r.a.createElement("button",null,"SAVE"))}}]),a}(n.Component),He={savePet:q,loadPets:z},Ge=Object(m.b)((function(e){return{pets:e.petReducer.pets}}),He)(Fe),ze={query:function(){return qe.apply(this,arguments)},getById:function(e){return We.apply(this,arguments)},getByUserId:function(e){return Ve.apply(this,arguments)},save:function(e){return Ye.apply(this,arguments)},remove:function(e){return Je.apply(this,arguments)}};function qe(){return(qe=Object(b.a)(v.a.mark((function e(){var t,a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},a=c.length>1?c[1]:void 0,!t){e.next=8;break}return n=t?"?".concat(a,"=").concat(t):"",e.next=6,_("".concat("/chat").concat(n),{params:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/chat","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return(Ve=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/chat","/member/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=4,D("".concat("/chat","/").concat(t._id),t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return t.createdAt=new Date(Date.now()).toLocaleString(),e.next=11,U("".concat("/chat"),t);case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(){return(Je=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat("/chat","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return console.log("chatId",e),function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ze.getById(e);case 3:n=t.sent,a({type:"GET_CHAT",chat:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in loadUsers",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function Qe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){t({type:"TOGGLE_CHAT",chatInfo:e})}}var Xe={query:function(){return Ze.apply(this,arguments)},getById:function(e){return $e.apply(this,arguments)},save:function(e){return et.apply(this,arguments)},remove:function(e){return tt.apply(this,arguments)}};function Ze(){return(Ze=Object(b.a)(v.a.mark((function e(){var t,a,n,r,c=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},a=c.length>1?c[1]:void 0,!t){e.next=8;break}return n=t?"?".concat(a,"=").concat(t):"",e.next=6,_("".concat("/order").concat(n),{params:t});case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(b.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("".concat("/order","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(b.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=8;break}return t.updatedAt=new Date(Date.now()).toLocaleString(),e.next=4,D("".concat("/order","/").concat(t._id),t);case 4:return a=e.sent,e.abrupt("return",a);case 8:return t.createdAt=new Date(Date.now()).toLocaleString(),e.next=11,U("".concat("/order"),t);case 11:return n=e.sent,e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(){return(tt=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("".concat("/order","/").concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Xe.query(e,t);case 2:r=a.sent,n({type:"LOAD_ORDERS",orders:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}function nt(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_ORDER",orderToSave:n}):a({type:"ADD_ORDER",orderToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var rt=a(277),ct=a(278),st=a(279),ot=a(280),it=a(281),lt=a(282);var ut=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={pet:{},isOwnerOfPet:!1,adoptButton:"Adopt",currComment:"",AdoptionModalMsg:!1},e.getCurrPet=Object(b.a)(v.a.mark((function t(){var a,n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.loadPets();case 2:a=e.props.match.params.id,n=e.props.pets.find((function(e){return e._id===a})),e.setState({pet:Object(g.a)({},n)});case 5:case"end":return t.stop()}}),t)}))),e.isOwnerOfPet=Object(b.a)(v.a.mark((function t(){var a,n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.loggedInUser,n=e.state.pet,!a||!n.shop){t.next=8;break}return r=n.shop._id,t.next=6,Oe.getById(r);case 6:c=t.sent,e.setState({isOwnerOfPet:a._id===c.owner._id});case 8:case"end":return t.stop()}}),t)}))),e.onAdopt=Object(b.a)(v.a.mark((function t(){var a,n,r,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.props.loggedInUser).isGuest){t.next=3;break}return t.abrupt("return");case 3:return e.setState({AdoptionModalMsg:!e.state.AdoptionModalMsg}),n=e.state.pet,r=n.shop._id,t.next=8,Oe.getById(r);case 8:c=t.sent,s={msg:"Hi, I saw your lovely pet and really wish to adopt it!",buyer:{_id:a._id,fullName:a.fullName,imgUrl:a.imgUrl},shop:{_id:c._id,name:c.name,type:c.type,imgUrl:c.imgUrl},pet:{_id:n._id,name:n.name},status:"Pending"},e.props.saveOrder(s),e.setState({adoptButton:"Request Sent"});case 12:case"end":return t.stop()}}),t)}))),e.onRemovePet=function(e){console.log("petId",e)},e.onToggleChat=Object(b.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getById(e.state.pet.shop._id);case 2:return a=t.sent,t.next=5,e.props.toggleChat({userId:a.owner._id});case 5:case"end":return t.stop()}}),t)}))),e.onUpdateReaction=function(t){var a=e.state.pet;a.reacts.map((function(e){return e.type===t&&e.count++,e})),e.props.savePet(a),e.getCurrPet()},e.handleCommentInput=function(t){var a=t.target.value;e.setState({currComment:a})},e.onComment=Object(b.a)(v.a.mark((function t(){var a,n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.pet,n=e.props.loggedInUser,r={id:"c".concat(100+a.comments.length+1),txt:e.state.currComment,by:{id:n._id,fullName:n.fullName,imgUrl:n.imgUrl}},a.comments.unshift(r),t.next=6,e.props.savePet(a);case 6:e.getComponentData(),e.setState({cuurComment:""});case 8:case"end":return t.stop()}}),t)}))),e.getTimeToString=function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=a+"/"+t+"/"+n},e.getUserId=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.state.pet),t.next=3,Oe.getById(e.state.pet.shop._id);case 3:return n=t.sent,t.next=6,n.owner._id;case 6:r=t.sent,e.setState({ownerId:r});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getComponentData(),Y.animateScroll.scrollToTop();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getComponentData",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrPet();case 2:return e.next=4,this.getUserId();case 4:return e.next=6,this.isOwnerOfPet();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.pet;this.props.loggedInUser;return t?r.a.createElement("section",{className:"pet-details-main-container"},r.a.createElement("div",{className:"pet-details-box"},r.a.createElement("div",{className:"pet-details-header"},r.a.createElement("h2",{className:"pet-details-heading"},t.name),r.a.createElement("div",{className:"share-box"},r.a.createElement(rt.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly",hashtag:"#Friendly"},r.a.createElement(ct.a,{size:30})),r.a.createElement(st.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly"},r.a.createElement(ot.a,{size:30})),r.a.createElement(it.a,{url:"http://www.camperstribe.com",quote:"See this cute pet I saw on Friendly"},r.a.createElement(lt.a,{size:30})))),r.a.createElement("div",{className:"pet-details-img-box"},t.imgUrls?t.imgUrls.map((function(e,t){return r.a.createElement("img",{className:"pet-details-img-".concat(t),src:e})})):""),r.a.createElement("div",null,r.a.createElement("ul",{className:"reactions-list"},t.reacts?t.reacts.map((function(t){if("love"===t.type)return r.a.createElement("li",{className:"react-count"},r.a.createElement(C.a,{onClick:function(){e.onUpdateReaction("love")},className:"heart-icon",icon:k.h})," ","".concat(t.count))})):"")),r.a.createElement("div",{className:"shop-and-pet-info"},r.a.createElement("div",{className:"pet-info"},r.a.createElement("div",{className:"pet-info-up"},r.a.createElement("div",{className:"age info-box"},r.a.createElement(C.a,{className:"age-icon info-icon",icon:k.c}),r.a.createElement("p",null,r.a.createElement("span",null,"Age: "),"".concat(parseFloat((Date.now()-new Date(t.bDate))/31104e6).toFixed(1)))),r.a.createElement("div",{className:"size info-box"},r.a.createElement(C.a,{className:"size-icon info-icon",icon:k.f}),r.a.createElement("p",null,r.a.createElement("span",null,"Size:")," ",t.size))),r.a.createElement("div",{className:"pet-info-down "},r.a.createElement(C.a,{className:"gender-icon info-icon",icon:k.r}),r.a.createElement("div",{className:"gender info-box"},r.a.createElement("p",null,r.a.createElement("span",null,"Gender:")," ",t.gender)),r.a.createElement("div",{className:"breed info-box"},r.a.createElement(C.a,{className:"breed-icon info-icon",icon:k.a}),r.a.createElement("p",null,r.a.createElement("span",null,"Breed:")," ",t.breed)))),r.a.createElement("div",{className:"shop-details"},r.a.createElement("div",{className:"shop-details-up"},t.shop&&r.a.createElement("img",{className:"shop-img",src:"".concat(t.shop.imgUrl),alt:""}),t.shop&&r.a.createElement(ne.b,{to:"/shop/".concat(t.shop._id)},r.a.createElement("p",null,t.shop.fullName))),r.a.createElement("div",{className:"shop-details-bottom"},r.a.createElement("div",{className:"shop-rate-box"},r.a.createElement(C.a,{className:"star-icon",icon:k.n}),t.shop&&r.a.createElement("p",{className:"shop-rate-rating"},t.shop.rate.rating,"  "),t.shop&&r.a.createElement("p",{className:"shop-rate-count"},"(",t.shop.rate.count,")  ")),t.shop&&!this.state.isOwnerOfPet&&r.a.createElement("button",{onClick:this.onToggleChat},"Message ",t.shop.fullName)))),r.a.createElement("div",{className:"tags-and-adopt-btn-box"},r.a.createElement("div",{className:"tags-list-box"},r.a.createElement("ul",{className:"tags-list"},t.tags?t.tags.map((function(e){return r.a.createElement("li",null," ",e," ")})):"")),r.a.createElement("button",{onClick:this.onAdopt,className:"adoption-btn"},"Adopt")),r.a.createElement("hr",null),r.a.createElement("div",{className:"description-box"},r.a.createElement("p",null,t.description)),r.a.createElement("hr",null),r.a.createElement("div",{className:"comments-box"},r.a.createElement("div",{className:"comment-input-box"},r.a.createElement(Me.a,{name:"txt",fullWidth:"true",value:this.state.currComment,placeholder:"Add Comment Here",onChange:this.handleCommentInput}),r.a.createElement("button",{className:"add-comment-btn",onClick:this.onComment},"Add")),r.a.createElement("ul",{className:"comment-list"},t.comments?t.comments.map((function(e){return r.a.createElement("li",{className:"single-comment-box"},r.a.createElement("div",{className:"flex comment-box"},e.by.imgUrl?r.a.createElement("img",{src:e.by.imgUrl,alt:""}):"","guest"===e.by.id?r.a.createElement("img",{src:"https://images.macrumors.com/t/x_zUFqghBUNBxVUZN_dYoKF3D9g=/1600x0/article-new/2019/04/guest-user-250x250.jpg",alt:""}):"",r.a.createElement("p",null,r.a.createElement("span",null,e.by.fullName,":")," "),r.a.createElement("p",null,r.a.createElement("span",null,e.createdAt)," "),r.a.createElement("p",null,e.txt," ")))})):"")))):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),pt={loadPets:z,savePet:q,saveOrder:nt,removePet:W,toggleChat:Qe},mt=Object(m.b)((function(e){return{pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser}}),pt)(ut);function dt(e){var t=e.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-data-main-container"},r.a.createElement("div",{className:"header"},r.a.createElement("h2",null,t.fullName),r.a.createElement("img",{src:t.imgUrl,alt:""})),r.a.createElement("div",{className:"user-data-box"},r.a.createElement("div",{className:"user-profile-details flex column"},t.phone&&r.a.createElement("p",null,r.a.createElement("span",null,"Phone: "),t.phone),t.email&&r.a.createElement("p",null,r.a.createElement("span",null,"Email: "),t.email),t.birthDate&&r.a.createElement("p",null,r.a.createElement("span",null,"Age: "),parseInt((Date.now()-new Date(t.birthDate))/31104e6)),t.familyStatus&&r.a.createElement("p",null,r.a.createElement("span",null,"Family Status: "),t.familyStatus),t.numberOfKds&&r.a.createElement("p",null,r.a.createElement("span",null,"Number of Kids: "),t.numberOfKds),t.residence&&r.a.createElement("p",null,r.a.createElement("span",null,"Recidence Type: "),t.residence),t.petCondition&&r.a.createElement("p",null,r.a.createElement("span",null,"Pet Designated Living conditions: "),t.petCondition),t.currrenPets&&r.a.createElement("p",null,r.a.createElement("span",null,"Current Pets at home: "),t.currrenPets),t.prevExperince&&r.a.createElement("p",null,r.a.createElement("span",null,"Previouse experince with animals: "),t.prevExperince)))))}var ht=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showUserModal:!1,user:null},e.showModal=Object(b.a)(v.a.mark((function t(){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({showUserModal:!e.state.showUserModal}),t.next=3,pe.getById(e.props.order.buyer._id);case 3:return a=t.sent,t.next=6,e.setState({user:a});case 6:case"end":return t.stop()}}),t)}))),e.orderClass=function(){return"accepted"===e.props.order.status?"accepted":"denied"===e.props.order.status?"denied":"pending"},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.onSave,n=e.onRemove,c=e.isShop,s=e.loggedInUser,o=this.state.user;return t?r.a.createElement("div",{className:"order-preview ".concat(this.orderClass)},c&&r.a.createElement("div",{className:"order-preview-details"},r.a.createElement("p",{onClick:this.showModal},t.buyer.fullName," ",r.a.createElement("span",null,"Wants to Adopt")," ",t.pet.name," ")),this.state.showUserModal&&o&&r.a.createElement(dt,{user:o}),!c&&s._id===t.buyer._id&&r.a.createElement("div",null,r.a.createElement(ne.b,{to:"/shop/".concat(t.shop._id)},r.a.createElement("p",null," ",r.a.createElement("span",null,"Request to adopt ")," ",t.pet.name,r.a.createElement("span",null," from:")," ",t.shop.name," ",t.shop.type," "))),r.a.createElement("div",{className:"order-actions-btns-box"},c&&r.a.createElement("button",{className:"accept-order-btn order-btn",onClick:function(){a(t,"accepted")}},"Accept"),c&&r.a.createElement("button",{className:"pending-order-btn order-btn",onClick:function(){a(t,"pending")}},"Pending"),c&&r.a.createElement("button",{className:"reject-order-btn order-btn",onClick:function(){a(t,"denied")}},"Reject"),(c||!c&&s._id===t.buyer._id)&&r.a.createElement("button",{className:"remove-order-btn order-btn",onClick:function(){n(t._id)}},"Remove"))):r.a.createElement("h3",{style:{display:"none"}},"loading...")}}]),a}(n.Component),ft=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={msgDivClass:"hidden"},e.changePetAdoptionStatus=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.props.pets.find((function(e){return e._id===a.pet._id}))).isAdopted=!0,e.props.savePet(n),e.props.history.push("/pet");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSave=function(){var t=Object(b.a)(v.a.mark((function t(a,n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.orders.find((function(e){return"accepted"===e.status&&e.pet._id===a.pet._id}))||"accepted"!==n){t.next=6;break}e.setState({msgDivClass:""}),setTimeout((function(){e.setState({msgDivClass:"hidden"})}),1500),t.next=11;break;case 6:return a.status=n,t.next=9,e.props.saveOrder(a);case 9:e.props.loadOrders(e.props.filterById,e.props.orderFilterName),"accepted"===n&&e.changePetAdoptionStatus(a);case 11:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onRemove=function(t){e.props.removeOrder(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.loadOrders(this.props.filterById,this.props.orderFilterName)}},{key:"render",value:function(){var e=this,t=this.props.orders;return t?r.a.createElement("div",{className:"order-list flex column"},r.a.createElement("div",{className:"doubleAccept ".concat(this.state.msgDivClass)},"Only one approval please."),t.map((function(t){return r.a.createElement(ht,{isShop:e.props.isShop,order:t,loggedInUser:e.props.loggedInUser,onRemove:e.onRemove,onSave:e.onSave})}))):r.a.createElement("h1",null,"LOADING...")}}]),a}(n.Component),vt={loadOrders:at,saveOrder:nt,removeOrder:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe.remove(e);case 2:a({type:"REMOVE_ORDER",orderId:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setFilter:function(e){return function(t){t({type:"SET_FILTER",filterBy:e})}},savePet:q},gt=Object(p.f)(Object(m.b)((function(e){return{pets:e.petReducer.pets,orders:e.orderReducer.orders,loggedInUser:e.userReducer.loggedInUser}}),vt)(ft)),bt=a(60),Et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={lat:32.0853,lng:34.7818,zoom:16,loc:"Info Window"},e.onMarkerClick=function(e,t,a){},e.onMapClicked=function(t,a,n){e.setState({lat:n.latLng.lat(),lng:n.latLng.lng()})},e.onMapPassLoc=function(){e.state({lat:e.props.lat,lng:e.props.lng})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({lat:this.props.lat,lng:this.props.lng,zoom:14,loc:this.props.name})}},{key:"render",value:function(){return r.a.createElement(bt.Map,Object(h.a)({className:"map",initialCenter:this.state,center:this.state,onClick:this.onMapClicked,google:this.props.google,zoom:this.state.zoom},"className","map"),r.a.createElement(bt.Marker,{position:this.state,name:"Current location"}),r.a.createElement(bt.InfoWindow,{position:this.state,visible:!0},r.a.createElement("div",null,r.a.createElement("h4",null,this.state.loc))))}}]),a}(r.a.Component),yt=Object(bt.GoogleApiWrapper)({apiKey:"AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio"})(Et),Ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={shop:{},shopPets:[],shopOwner:"",isOpenReviews:!1,currReview:{txt:"",rate:""}},e.loadShopData=Object(b.a)(v.a.mark((function t(){var a,n,r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.id,t.next=3,e.props.loadPets();case 3:return t.next=5,e.props.getShopById(a);case 5:return e.setState({shop:Object(g.a)({},e.props.currShop)}),t.next=8,pe.getById(e.props.currShop.owner._id);case 8:return n=t.sent,console.log("owner from DB",n),t.next=12,e.setState({shopOwner:Object(g.a)({},n)});case 12:return r=e.props.pets.filter((function(t){if(t.shop)return t.shop._id===e.state.shop._id})),t.next=15,e.setState({shopPets:Object(d.a)(r)});case 15:case"end":return t.stop()}}),t)}))),e.onRemove=function(t){e.props.removePet(t)},e.onEdit=function(){console.log("edit")},e.handleInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return Object(g.a)(Object(g.a)({},e),{},{currReview:Object(g.a)(Object(g.a)({},e.currReview),{},Object(h.a)({},n,r))})}))},e.onAddReview=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=Object(g.a)({},e.state.shop),(r=Object(g.a)({},e.state.currReview)).id="r".concat(100+n.reviews.length+1),c=e.props.loggedInUser,r.by={_id:c._id,fullName:c.fullName,imgUrl:c.imgUrl},n.reviews.unshift(r),t.next=9,e.props.saveShop(n);case 9:e.loadShopData();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleReviewModal=function(){e.setState(Object(g.a)(Object(g.a)({},e.state),{},{isOpenReviews:!e.state.isOpenReviews}))},e.drawStars=function(e){for(var t="",a=0;a<e;a++)t+="\u2b50";return t},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadShopData();case 2:Y.animateScroll.scrollToTop();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.shop,a=this.state.shopOwner;Object.keys(this.state.shop).length>0&&(this.props.loggedInUser._id,this.props.currShop.owner._id);return r.a.createElement("section",null,t.owner&&t.location&&t.reviews?r.a.createElement("div",{className:"shop-details-main-box"},r.a.createElement("div",{className:"shop-details-header"},r.a.createElement("h2",{className:"shop-details-heading"},t.name),r.a.createElement("div",{className:"shop-rate-box"},r.a.createElement(C.a,{className:"star-icon",icon:k.n}),t&&r.a.createElement("p",{className:"shop-rate-rating"},t.rate.rating,"  "),t&&r.a.createElement("p",{className:"shop-rate-count"},"(",t.rate.count,")  "))),r.a.createElement("div",{className:"shop-details-img-box"},t.imgUrls?t.imgUrls.map((function(e,t){return r.a.createElement("img",{className:"shop-details-img-".concat(t),src:e})})):""),r.a.createElement("div",{className:"top-screen-box"},r.a.createElement("div",{className:"shop-details-section"},r.a.createElement("img",{className:"shop-owner-img",src:t.owner.imgUrl}),r.a.createElement("div",{className:"contact-box"},a.gender&&r.a.createElement(C.a,{className:"contact-icon",icon:"Male"===a.gender?k.i:k.g}),r.a.createElement("p",null,t.owner.fullName)),r.a.createElement("div",{className:"contact-box"},r.a.createElement(C.a,{className:"contact-icon",icon:k.k}),r.a.createElement("p",null,t.owner.contact.phone)),r.a.createElement("div",{className:"contact-box"},r.a.createElement(C.a,{className:"contact-icon",icon:k.e}),r.a.createElement("p",null,t.owner.contact.email)),r.a.createElement("div",{className:"shop-description"},r.a.createElement("p",null,t.desc))),r.a.createElement("div",{className:"order-list-box"},this.state.shop.owner._id===this.props.loggedInUser._id&&r.a.createElement(gt,{isShop:!0,orderFilterName:"shop._id",filterById:this.state.shop._id}))),r.a.createElement("div",{className:"bottom-screen-box"},r.a.createElement("div",{className:"reviews-box"},r.a.createElement("h3",null,"What they say about us"),r.a.createElement("button",{className:"open-reviews-btn",onClick:this.onToggleReviewModal},this.state.isOpenReviews?"Close":"Tell Us What You Think"),r.a.createElement("div",{className:this.state.isOpenReviews?"review-modal":"hidden"},r.a.createElement("form",{className:"review-form"},r.a.createElement("div",{className:"flex column"},r.a.createElement(Me.a,{id:"standard-textarea",label:"Your Review",placeholder:"Write your review",multiline:!0,name:"txt",onChange:this.handleInput}),r.a.createElement(le.a,null,r.a.createElement(E.a,{htmlFor:"rate"},"Your rate"),r.a.createElement(y.a,{native:!0,onChange:this.handleInput,inputProps:{name:"rate"}},r.a.createElement("option",{"aria-label":"None",value:""}),r.a.createElement("option",{value:"5"},"5"),r.a.createElement("option",{value:"4"},"4"),r.a.createElement("option",{value:"3"},"3"),r.a.createElement("option",{value:"2"},"2"),r.a.createElement("option",{value:"1"},"1")))),r.a.createElement("button",{className:"add-review-btn",onClick:this.onAddReview},"Publish"))),t.reviews?r.a.createElement("ul",{className:"reviews-list"},t.reviews.map((function(t){return r.a.createElement("li",{className:"review"},r.a.createElement("p",{className:"review-text"},t.txt),r.a.createElement("p",null,r.a.createElement("span",null,"Rate: "),e.drawStars(t.rate)),r.a.createElement("p",null,r.a.createElement("span",null,"From: "),t.by.fullName))}))):r.a.createElement("h1",null,"Loading Reviews...")),r.a.createElement("div",{className:"shop-location-box"},r.a.createElement("div",{className:"map-container"},r.a.createElement(yt,{lat:t.location.lat,lng:t.location.lng,name:t.location.name})),r.a.createElement(C.a,{className:"arrow-icon",icon:k.b}),r.a.createElement("div",{className:"shop-location-name"},r.a.createElement("h2",null,"We are located at ",t.location.name)))),r.a.createElement("div",{className:"pets-box"},r.a.createElement("h2",{className:"our-pets-heading"},"Our Pets"),r.a.createElement(Te,{pets:this.state.shopPets,onRemove:this.onRemove}))):r.a.createElement("h1",null,"Loading..."))}}]),a}(n.Component),wt={getShopById:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Oe.getById(e);case 2:n=t.sent,a({type:"GET_SHOP",shop:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveShop:Ne,loadPets:z,savePet:q},xt=Object(m.b)((function(e){return{currShop:e.shopReducer.currShop,pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser,currChat:e.chatReducer.currChat}}),wt)(Ot),jt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={msg:"",loginCred:{userName:"",password:""},showModal:!1},e.loginHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{loginCred:Object(g.a)(Object(g.a)({},e.loginCred),{},Object(h.a)({},n,r))}}))},e.closeModal=function(){e.props.onNavBarClick()},e.doLogin=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.loginCred,r=n.userName,c=n.password,r&&c){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter user/password"}));case 4:return s={userName:r,password:c},t.next=7,e.props.login(s);case 7:e.props.loggedInUser.chats&&e.props.loggedInUser.chats.forEach(function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.getChatById(a._id);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.setState({loginCred:{userName:"",password:""}}),e.props.onNavBarClick();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(a,[{key:"render",value:function(){var e;return r.a.createElement("div",null,r.a.createElement("div",{className:"login-modal"},r.a.createElement("form",{onSubmit:this.doLogin},r.a.createElement(Me.a,{autoFocus:!0,required:!0,type:"text",name:"userName",value:this.state.loginCred.userName,onChange:this.loginHandleChange,placeholder:"User Name"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Me.a,{required:!0,type:"password",name:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(j.a,(e={onClick:this.doLogin,variant:"text"},Object(h.a)(e,"variant","outlined"),Object(h.a)(e,"color","primary"),e),"Login"))))}}]),a}(n.Component),Ct={login:be,logout:ye,signup:Ee,removeUser:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.remove(e);case 3:a({type:"USER_REMOVE",userId:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.log("UserActions: err in removeUser",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:fe,getChatsByUserId:function(e){return console.log("chatId",e),function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ze.getByUserId(e);case 3:n=t.sent,console.log(n),a({type:"LOAD_CHATS",chat:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("UserActions: err in loadUsers",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getChatById:Ke},kt=Object(m.b)((function(e){return{users:e.userReducer.users,loggedInUser:e.userReducer.loggedInUser}}),Ct)(jt),St=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={chats:null,usersInfo:{}},e.onChatListClicked=function(t){e.props.toggleChat({chatId:t})},e.displayChatDetails=function(t){var a=e.getRecipientId(t.members);if(e.state.usersInfo[a])return r.a.createElement("div",{key:t._id,className:"chat-list-row flex",onClick:function(){return e.onChatListClicked(t._id)}},r.a.createElement("img",{src:e.state.usersInfo[a].img,alt:""}),r.a.createElement("div",null,e.state.usersInfo[a].name))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.props.chats),!this.props.chats){e.next=6;break}return t=[],this.props.loggedInUser.chats.forEach(function(){var e=Object(b.a)(v.a.mark((function e(n){var r,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.getById(n._id);case 2:return r=e.sent,t.push(r),e.next=6,a.getRecipientId(r.members);case 6:return c=e.sent,e.next=9,pe.getById(c);case 9:return s=e.sent,e.next=12,a.setStateWithRecipient(s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,this.setState({chats:this.props.chats});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"setStateWithRecipient",value:function(){var e=Object(b.a)(v.a.mark((function e(t){var a,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(h.a)({},t._id,{img:t.imgUrl,name:t.fullName}),t.imgUrl||(n=t.fullName.split(" "),a[t._id].img="https://ui-avatars.com/api/?name=".concat(n[0],"+").concat(n[1])),!t.isOwner){e.next=7;break}return e.next=5,Oe.getByUserId(t._id);case 5:r=e.sent,a[t._id].name=r.name;case 7:return e.next=9,this.setState({usersInfo:Object(g.a)(Object(g.a)({},this.state.usersInfo),a)});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecipientId",value:function(e){return e[0]===this.props.loggedInUser._id?e[1]:e[0]}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chat-list-container"},this.state.chats&&this.state.chats.map((function(t){return e.displayChatDetails(t)}))||r.a.createElement("div",null,"No chats to load"))}}]),a}(n.Component),Nt={getChatById:Ke,toggleChat:Qe},It=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown,chats:e.chatReducer.chats,currChat:e.chatReducer.currChat,loggedInUser:e.userReducer.loggedInUser}}),Nt)(St),_t=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showLoginModal:!1,showChatsList:!1,shop:"",shopId:"",pathName:""},e.componentDidUpdate=function(){var t=Object(b.a)(v.a.mark((function t(a){var n,r,c,s;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.user||a.user._id===e.props.user._id){t.next=5;break}return t.next=3,e.props.loadShops();case 3:n=e.props.shops,e.props.user&&(r=e.props.user,c=r._id,(s=n.find((function(e){return e.owner._id===c})))&&e.setState({shopId:s._id,shop:s}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onNavBarClick=function(){e.setState({showLoginModal:!e.state.showLoginModal})},e.onLogOut=function(){e.props.logout(),e.props.history.push("/")},e.onToggleChatsList=function(){e.setState({showChatsList:!e.state.showChatsList})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({pathName:this.props.history.location.pathname})}},{key:"render",value:function(){var e=this,t=this.props.user;return r.a.createElement("div",null,r.a.createElement("div",{className:"/"===this.props.history.location.pathname?"main-nav":"main-nav-not-home"},r.a.createElement("div",{className:"left-nav"},r.a.createElement(ne.c,{to:"/"},r.a.createElement("img",{className:"logo-up",src:a(208),alt:"Home"})),r.a.createElement(ne.c,{className:"nav-btn",to:"/pet"},"Gallery"),r.a.createElement(ne.c,{className:"nav-btn",to:"/about"},"About Us")),r.a.createElement("div",{className:"right-nav"},t&&t.isOwner&&this.state.shopId&&r.a.createElement(ne.c,{className:"nav-btn shop-btn",to:"/shop/".concat(this.state.shopId)}," ",r.a.createElement("img",{className:"shop-img",src:this.state.shop.imgUrls[0],alt:""})," ",this.state.shop.name),t&&!t.isOwner&&!t.isGuest&&r.a.createElement(ne.c,{className:"nav-btn",to:"/profile/".concat(t._id)},t.fullName),t&&!t.isGuest&&r.a.createElement("div",{className:"chats-btn nav-btn",onClick:this.onToggleChatsList},r.a.createElement(C.a,{className:"send-icon",icon:k.d})),t&&t.isGuest&&r.a.createElement("button",{className:"login-btn nav-btn",onClick:function(){e.onNavBarClick()}},"Login"),t&&!t.isGuest&&r.a.createElement("button",{className:"logout-btn nav - btn",onClick:function(){e.onLogOut()}},"Logout"),this.state.showLoginModal&&r.a.createElement(kt,{onNavBarClick:this.onNavBarClick}),t&&t.isGuest&&r.a.createElement(ne.c,{className:"nav-btn",to:"/signup"},"Sign Up"))),this.state.showChatsList&&r.a.createElement(It,null))}}]),n}(n.Component),Ut={loadShops:Se,logout:ye},Dt=Object(p.f)(Object(m.b)((function(e){return{user:e.userReducer.loggedInUser,shops:e.shopReducer.shops}}),Ut)(_t)),At=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.getUserOrders=function(){e.props.loadOrders(e.state.user._id,"buyer._id")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,pe.getById(t);case 3:a=e.sent,this.setState({user:Object(g.a)({},a)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,t=this.props.loggedInUser;return e?r.a.createElement("div",{className:"user-profile-box flex column"},r.a.createElement(dt,{user:e}),e._id===t._id&&r.a.createElement("div",{className:"user-profile-adoptions flex column"},r.a.createElement("h2",null,"My Adoption Requests"),r.a.createElement(gt,{isShop:!1,orderFilterName:"buyer._id",filterById:e._id}))):r.a.createElement("h3",null,"Loading...")}}]),a}(n.Component),Rt={loadOrders:at},Tt=Object(m.b)((function(e){return{loggedInUser:e.userReducer.loggedInUser}}),Rt)(At),Pt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer full"},r.a.createElement(ne.c,{to:"/"},r.a.createElement("img",{className:"logo-footer",src:a(209),alt:"Home"})),r.a.createElement("p",null,"Powered By ADA Systems."),r.a.createElement("div",{className:"social"},r.a.createElement("a",{href:"https://www.facebook.com/iHeartDogscom",target:"_blank"},r.a.createElement(ct.a,{size:30})),r.a.createElement("a",{href:"https://twitter.com/AdoptCatsDogs",target:"_blank"},r.a.createElement(lt.a,{size:30})),r.a.createElement("a",{href:"https://www.instagram.com/charlie_retriever/?hl=en",target:"_blank"},r.a.createElement("img",{className:"insta-logo",src:a(210),alt:""}))))}}]),n}(n.Component),Bt=a(131),Lt=a.n(Bt),Mt=function(){var e;return{setup:function(){e=Lt()("")},on:function(t,a){e.on(t,a)},off:function(t,a){e.off(t,a)},emit:function(t,a){console.log("socketservice:",t,"Data",a),e.emit(t,a)},terminate:function(){e=null}}}();window.socketService=Mt;var Ft=Mt;var Ht=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(e=t.call.apply(t,[this].concat(c))).state={chat:{topic:"",members:[],msgs:[]},msg:{authorId:"",createdAt:"",txt:""}},e.setChat=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,a.chats&&a.chats.length>0&&(console.log("userchats",a.chats,"of user",a),n=Object(d.a)(a.chats).find((function(t){return console.log("IN USER CHAT",t),t.topic==="".concat(e.props.loggedInUser._id,"__").concat(e.props.targetId)||t.topic==="".concat(e.props.targetId,"__").concat(e.props.loggedInUser._id)}))),console.log("userChat",n),!n){t.next=10;break}return t.next=6,e.props.getChatById(n._id);case 6:return t.next=8,e.setState({chat:Object(g.a)({},e.props.currChat)});case 8:t.next=12;break;case 10:return t.next=12,e.createChat(e.props.loggedInUser,e.state.targetId);case 12:Ft.setup(),Ft.emit("chat topic",e.state.chat.topic),console.log("TOPIC:",e.state.chat.topic),Ft.on("chat addMsg",e.addMsg);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.createChat=function(){var t=Object(b.a)(v.a.mark((function t(a,n){var r;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={topic:"".concat(a._id,"__").concat(n),members:[a._id,n],msgs:[]},t.next=3,e.props.saveChat(r);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.addMsg=function(){var t=Object(b.a)(v.a.mark((function t(a){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({chat:Object(g.a)(Object(g.a)({},e.state.chat),{},{msgs:[].concat(Object(d.a)(e.state.chat.msgs),[a])})});case 2:e.props.saveChat(e.state.chat),e.props.updateUser(e.props.loggedInUser);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendMsg=function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={authorId:e.props.loggedInUser._id,createdAt:new Date,txt:e.state.msg.txt},t.next=4,e.setState({msg:Object(g.a)({},n)});case 4:e.addMsg(e.state.msg),Ft.emit("chat newMsg",e.state.msg),e.setState({msg:{authorId:"",createdAt:"",txt:""}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.msgHandleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{msg:Object(g.a)(Object(g.a)({},e.msg),{},Object(h.a)({},n,r))}}))},e.onClose=function(){e.props.toggleChat()},e.displayMsg=function(t,a){var n="message-row ",c=new Date(t.createdAt),s=t.authorId===e.props.loggedInUser._id;return n+=s?"sender":"recipient",r.a.createElement("div",{className:n,key:a},!s&&r.a.createElement("img",{src:e.state.targetImg,alt:""}),r.a.createElement("div",{className:"message-content"},r.a.createElement("div",{className:"txt"},t.txt),r.a.createElement("div",{className:"date"},c.getHours()+":"+c.getMinutes())))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){var t,a,n,r,c,s,o,i,l,u,p,m,d;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.props),!this.props.currChatInfo.chatId){e.next=32;break}return e.next=4,ze.getById(this.props.currChatInfo.chatId);case 4:return t=e.sent,e.next=7,this.setState({chat:t});case 7:return e.next=9,t.members[0]===this.props.loggedInUser._id;case 9:if(!e.sent){e.next=13;break}e.t0=t.members[1],e.next=14;break;case 13:e.t0=t.members[0];case 14:return a=e.t0,e.next=17,pe.getById(a);case 17:if(n=e.sent,r=n.fullName,c=n.imgUrl,n.imgUrl||(s=n.fullName.split(" "),c="https://ui-avatars.com/api/?name=".concat(s[0],"+").concat(s[1])),!n.isOwner){e.next=26;break}return e.next=24,Oe.getByUserId(n._id);case 24:o=e.sent,r=o.name;case 26:this.setState({targetId:n._id,targetImg:c,targetName:r}),Ft.setup(),Ft.emit("chat topic",this.state.chat.topic),Ft.on("chat addMsg",this.addMsg),e.next=46;break;case 32:return i=this.props.loggedInUser,console.log("logedIn",i),e.next=36,pe.getById(this.props.currChatInfo.targetId);case 36:if(l=e.sent,u=l.fullName,p=l.imgUrl,l.imgUrl||(m=l.fullName.split(" "),p="https://ui-avatars.com/api/?name=".concat(m[0],"+").concat(m[1])),!l.isOwner){e.next=45;break}return e.next=43,Oe.getByUserId(l._id);case 43:d=e.sent,u=d.name;case 45:this.setState({targetId:l._id,targetImg:p,targetName:u});case 46:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setChatByChatId",value:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze.getChatById(t);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkIfChatExists",value:function(){var e=Object(b.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Ft.off("chat addMsg",this.addMsg),Ft.terminate()}},{key:"render",value:function(){var e=this;return 0===this.state.chat.msgs.length?r.a.createElement("div",{className:"chat-container"},r.a.createElement("h2",null,"Loading")):r.a.createElement("div",{className:"chat-container"},r.a.createElement("section",{className:"chat-title flex space-evenly"},r.a.createElement("span",null,this.state.targetName),r.a.createElement("button",{className:"btn-close btn",onClick:this.onClose},r.a.createElement(C.a,{className:"close-icon",icon:k.o}))),r.a.createElement("section",{className:"msgs-container"},this.state.chat.msgs&&this.state.chat.msgs.slice(0).reverse().map((function(t,a){return e.displayMsg(t,a)}))),r.a.createElement("form",{onSubmit:this.sendMsg},r.a.createElement("section",{className:"input-container flex space-around"},r.a.createElement("input",{type:"text",value:this.state.msg.txt,onChange:this.msgHandleChange,name:"txt",autoComplete:"off",placeholder:"Type Message Here"}),r.a.createElement("button",{className:"btn-send"},r.a.createElement(C.a,{className:"send-icon",icon:k.l})))))}}]),a}(n.Component),Gt={loadPets:z,loadChats:function(e,t){return function(){var a=Object(b.a)(v.a.mark((function a(n){var r;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ze.query(e,t);case 2:r=a.sent,n({type:"LOAD_CHATS",chats:r});case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},saveChat:function(e){return function(){var t=Object(b.a)(v.a.mark((function t(a){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze.save(e);case 2:n=t.sent,e._id?a({type:"EDIT_CHAT",chatToSave:n}):a({type:"ADD_CHAT",chatToSave:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getChatById:Ke,updateUser:ge,toggleChat:Qe},zt=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown,chats:e.chatReducer.chats,currChatInfo:e.chatReducer.currChatInfo,pets:e.petReducer.pets,loggedInUser:e.userReducer.loggedInUser}}),Gt)(Ht),qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isChatShown:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({isChatShown:this.props.isChatShown})}},{key:"componentDidUpdate",value:function(e){e!==this.props&&this.setState({isChatShown:this.props.isChatShown}),console.log(this.props.isChatShown)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(Dt,{onToggleChatsList:this.onToggleChatsList})),r.a.createElement("main",null,this.state.isChatShown&&r.a.createElement(zt,null),r.a.createElement(p.c,null,r.a.createElement(p.a,{component:xt,path:"/shop/:id"}),r.a.createElement(p.a,{component:mt,path:"/details/:id?"}),r.a.createElement(p.a,{component:Ge,path:"/edit/:id?"}),r.a.createElement(p.a,{component:Ue,path:"/signup/:type?"}),r.a.createElement(p.a,{component:Tt,path:"/profile/:id"}),r.a.createElement(p.a,{component:Le,path:"/pet/:filterType?"}),r.a.createElement(p.a,{component:oe,path:"/"}))),r.a.createElement("footer",null,r.a.createElement(Pt,null)))}}]),a}(n.Component),Wt=Object(m.b)((function(e){return{isChatShown:e.chatReducer.isChatShown}}))(qt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Vt=a(49),Yt=a(132),Jt={pets:[],filterBy:{type:"",gender:"",breed:"",size:"",txt:"",distance:{lat:0,lon:0,range:0}}};var Kt={shops:[],currShop:{}};var Qt={_id:"guest",fullName:"guest",isGuest:!0},Xt={loggedInUser:Qt,users:[]};var Zt={orders:[],filterBy:{shop:""}};var $t={isChatShown:!1,currChatInfo:null,chats:[],currChatId:"",filterBy:{}};var ea=Object(Vt.c)({petReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_PETS":return Object(g.a)(Object(g.a)({},e),{},{pets:Object(d.a)(t.pets)});case"ADD_PET":return Object(g.a)(Object(g.a)({},e),{},{pets:[].concat(Object(d.a)(e.pets),[t.petToSave])});case"EDIT_PET":return console.log(t.petToSave),Object(g.a)(Object(g.a)({},e),{},{pets:e.pets.map((function(e){return e._id===t.petToSave._id?t.petToSave:e}))});case"REMOVE_PET":return Object(g.a)(Object(g.a)({},e),{},{pets:e.pets.filter((function(e){return e._id!==t.petId}))});case"SET_FILTER":return console.log(t.filterBy),Object(g.a)(Object(g.a)({},e),{},{filterBy:Object(g.a)(Object(g.a)({},e.filterBy),t.filterBy)});default:return e}},shopReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SHOPS":return Object(g.a)(Object(g.a)({},e),{},{shops:Object(d.a)(t.shops)});case"GET_SHOP":return Object(g.a)(Object(g.a)({},e),{},{currShop:JSON.parse(JSON.stringify(t.shop))});case"ADD_SHOP":return Object(g.a)(Object(g.a)({},e),{},{shops:[].concat(Object(d.a)(e.shops),[t.shopToSave])});case"EDIT_SHOP":return Object(g.a)(Object(g.a)({},e),{},{shops:e.shops.map((function(e){return e._id===t.shopToSave._id?t.shopToSave:e}))});case"REMOVE_SHOP":return Object(g.a)(Object(g.a)({},e),{},{shops:e.shops.filter((function(e){return e._id!==t.shopId}))});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(g.a)(Object(g.a)({},e),{},{loggedInUser:t.user});case"UPDATE_USER":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.map((function(e){return e._id===t.userToSave._id?t.userToSave:e}))});case"USER_REMOVE":return Object(g.a)(Object(g.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.userId}))});case"SET_USERS":return Object(g.a)(Object(g.a)({},e),{},{users:t.users});case"LOGOUT":return Object(g.a)(Object(g.a)({},e),{},{loggedInUser:Qt});default:return e}},orderReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ORDERS":return Object(g.a)(Object(g.a)({},e),{},{orders:Object(d.a)(t.orders)});case"ADD_ORDER":return Object(g.a)(Object(g.a)({},e),{},{orders:[].concat(Object(d.a)(e.orders),[t.orderToSave])});case"EDIT_ORDER":return Object(g.a)(Object(g.a)({},e),{},{orders:e.orders.map((function(e){return e._id===t.orderToSave._id?t.orderToSave:e}))});case"REMOVE_ORDER":return Object(g.a)(Object(g.a)({},e),{},{orders:e.orders.filter((function(e){return e._id!==t.orderId}))});case"SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filterBy:Object(g.a)(Object(g.a)({},e.filterBy),t.filterBy)});default:return e}},chatReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_CHAT":return t.chatInfo?Object(g.a)(Object(g.a)({},e),{},{isChatShown:!0,currChatInfo:Object(g.a)({},t.chatInfo)}):Object(g.a)(Object(g.a)({},e),{},{isChatShown:!1,currChatInfo:Object(g.a)({},t.chatInfo)});case"LOAD_CHATS":return Object(g.a)(Object(g.a)({},e),{},{chats:Object(d.a)(t.chats)});case"GET_CHAT":return console.log(e),Object(g.a)(Object(g.a)({},e),{},{chats:[].concat(Object(d.a)(e.chats),[t.chat])});case"ADD_CHAT":return console.log("IN REDUCER",t.chatToSave),Object(g.a)(Object(g.a)({},e),{},{chats:[].concat(Object(d.a)(e.chats),[t.chatToSave])});case"EDIT_CHAT":return Object(g.a)(Object(g.a)({},e),{},{chats:e.chats.map((function(e){return e._id===t.chatToSave._id?t.chatToSave:e}))});case"REMOVE_CHAT":return Object(g.a)(Object(g.a)({},e),{},{chats:e.chats.filter((function(e){return e._id!==t.chatId}))});case"SET_FILTER":return Object(g.a)(Object(g.a)({},e),{},{filterBy:Object(g.a)(Object(g.a)({},e.filterBy),t.filterBy)});default:return e}}}),ta=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Vt.d,aa=Object(Vt.e)(ea,ta(Object(Vt.a)(Yt.a)));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:aa},r.a.createElement(ne.a,null,r.a.createElement(Wt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[141,1,2]]]);
//# sourceMappingURL=main.31011763.chunk.js.map