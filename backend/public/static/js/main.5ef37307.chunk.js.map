{"version":3,"sources":["assets/img/category sync /^/.*/.png$","assets/img/category/cat.png","assets/img/category/dog.png","assets/img/category/farm.png","assets/img/category/other.png","assets/img/hero1.jpg","assets/img/about1.png","assets/img/about2.png","assets/img/about3.png","assets/img/logo.png","assets/img/logo-with-title.png","assets/img/insta.png","cmps/TagsFilter.jsx","services/httpService.js","services/petService.js","store/actions/petActions.js","cmps/FilterSearch.jsx","cmps/CategoryList.jsx","cmps/PetFilter.jsx","cmps/Hero.jsx","cmps/About.jsx","pages/Home.jsx","cmps/Geolocation.jsx","services/userService.js","store/actions/userActions.js","services/shopService.js","store/actions/shopActions.js","pages/SignUp.jsx","cmps/PetPreview.jsx","cmps/PetList.jsx","pages/PetApp.jsx","pages/PetEdit.jsx","services/orderService.js","store/actions/orderActions.js","services/socketService.js","services/chatService.js","store/actions/chatActions.js","cmps/Chat.jsx","pages/PetDetails.jsx","cmps/OrderPreview.jsx","cmps/OrderList.jsx","cmps/GoogleMap.jsx","pages/ShopDetails.jsx","cmps/LoginModal.jsx","cmps/ChatsList.jsx","cmps/NavBar.jsx","cmps/UserData.jsx","pages/userProfile.jsx","cmps/Footer.jsx","App.jsx","serviceWorker.js","store/reducers/petReducer.js","store/reducers/shopReducer.js","store/reducers/userReducer.js","store/reducers/orderReducer.js","store/reducers/chatReducer.js","store/store.js","index.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","TagsFilter","state","gender","txt","male","female","distance","range","onGenderChange","a","genderDefault","console","log","setState","onDistanceChange","ev","target","value","onShow","props","onToggleFilterModal","onClear","this","tag","index","key","htmlFor","Switch","type","name","className","InputLabel","onClick","icon","faMars","faVenus","FormGroup","displayGenderBtns","Select","native","onChange","handleChange","inputProps","aria-label","Input","min","Button","variant","Component","axios","Axios","create","withCredentials","endpoint","data","ajax","method","url","res","dir","response","status","window","location","assign","petService","query","getPetById","save","remove","filterBy","httpService","params","filtered","filterPets","pet","_id","petId","pets","filteredPets","trim","words","split","length","forEach","word","filter","toLowerCase","includes","size","summary","description","shop","fullName","require","geocoder","computeDistanceBetween","loadPets","dispatch","savePet","petToSave","removePet","setFilter","_FilterSearch","isClearShown","onInputChange","parent","onSearch","keyPress","keyCode","history","push","prevProps","autoComplete","placeholder","onKeyDown","faSearch","faTimesCircle","mapDispatchToProps","FilterSearch","withRouter","connect","petReducer","CategoryList","dog","cat","farm","other","imgClicked","onCategoryChange","classStr","src","alt","displayTypesBtn","_PetFilter","breed","lat","lon","isModalShown","tags","onFilterChange","obj","updateFilterAndLoad","onApplyFilter","resetFilter","onToggleTag","splice","indexOf","navigator","geolocation","getCurrentPosition","position","error","message","PetFilter","Hero","bgImage","bgImageAlt","strength","style","width","About","to","_Home","user","Home","userReducer","loggedInUser","Geolocation","lng","setLocToFind","loc","findLocation","getLatLng","cb","find","err","latLang","getGeolocation","OutlinedInput","event","signupHandleChange","React","login","logout","signup","getUsers","getById","userId","update","userCred","sessionStorage","clear","loadUsers","userService","users","updateUser","userToSave","userCreds","_user","shopService","getByUserId","updatedAt","Date","now","toLocaleString","createdAt","reviews","shopId","loadShops","shops","saveShop","shopToSave","_SignUp","userAdopt","userShop","signupCred","setUserAdopt","setUserShop","prevState","doSignup","preventDefault","username","password","address","email","phone","msg","imgUrl","substring","isOwner","isGuest","lastSignUpUser","signUpShop","currUser","title","desc","locName","owner","parseFloat","signupCreds","latLng","onSubmit","FormControl","label","multiline","getUserById","SignUp","shopReducer","_PetPreview","isLiked","onUpdateReaction","reaction","updatedReacts","reacts","react","count","JSON","parse","stringify","isAdopted","class","imgUrls","faHeart","PetPreview","PetList","onRemove","onEdit","_PetApp","sortBy","isReady","resetFitler","_","scroll","scrollToTop","PetApp","_PetEdit","handleInput","field","checked","onSubmitForm","match","petToEdit","TextField","defaultValue","adoptedAt","toISOString","substr","InputLabelProps","shrink","bDate","isInRisk","PetEdit","orderService","filterName","queryStr","order","orderId","loadOrders","orders","saveOrder","orderToSave","socketService","socket","setup","io","on","eventName","off","emit","terminate","createSocketService","chatService","chat","chatId","getChatById","_Chat","topic","initiate","msgs","senderId","from","setChat","userChat","chats","targetId","currChat","createChat","addMsg","saveChat","chatToAdd","role","newMsg","sendMsg","msgHandleChange","onClose","displayMsg","idx","classTxt","time","isSender","recipient","getHours","getMinutes","faTimes","slice","reverse","faPaperPlane","loadChats","chatToSave","Chat","chatReducer","_PetDetails","isChatOn","isOwnerOfPet","adoptButton","currComment","getCurrPet","petToShow","onAdopt","buyer","onRemovePet","onToggleChat","handleCommentInput","onComment","comment","comments","by","unshift","getComponentData","cuurComment","getTimeToString","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","getUserId","ownerId","FacebookShareButton","quote","hashtag","FacebookIcon","WhatsappShareButton","WhatsappIcon","TwitterShareButton","TwitterIcon","faCalendarAlt","toFixed","faExpandArrowsAlt","faVenusMars","faAlignLeft","faStar","rate","rating","fullWidth","PetDetails","OrderPreview","onSave","isShop","display","_OrderList","msgDivClass","changePetAdoptionStatus","orderCheck","setTimeout","filterById","orderFilterName","removeOrder","OrderList","orderReducer","_GoogleMap","zoom","onMarkerClick","marker","onMapClicked","mapProps","onMapPassLoc","initialCenter","center","google","visible","GoogleMap","GoogleApiWrapper","apiKey","_ShopDetails","shopPets","shopOwner","isOpenReviews","currReview","loadShopData","getShopById","currShop","onAddReview","review","onToggleReviewModal","drawStars","stars","i","faFemale","faMobileAlt","contact","faEnvelope","faAngleDoubleUp","ShopDetails","_LoginModal","loginCred","userName","showModal","loginHandleChange","closeModal","onNavBarClick","doLogin","autoFocus","required","removeUser","LoginModal","_ChatsList","imgs","getChatUserImg","imgForChat","chatImgs","img","displayChatDetails","doLog","fullChat","ChatsList","_NavBar","showLoginModal","showChatsList","pathName","componentDidUpdate","onLogOut","onToggleChatsList","pathname","NavBar","UserData","Fragment","birthDate","parseInt","familyStatus","numberOfKds","residence","petCondition","currrenPets","prevExperince","_userProfile","getUserOrders","userProfile","Footer","href","_App","document","component","path","App","Boolean","hostname","initialState","localLoggedinUser","rootReducer","combineReducers","action","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.5ef37307.chunk.js","sourcesContent":["var map = {\n\t\"./cat.png\": 179,\n\t\"./dog.png\": 180,\n\t\"./farm.png\": 181,\n\t\"./other.png\": 182\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 178;","module.exports = __webpack_public_path__ + \"static/media/cat.269e723b.png\";","module.exports = __webpack_public_path__ + \"static/media/dog.1afb1629.png\";","module.exports = __webpack_public_path__ + \"static/media/farm.976d3f34.png\";","module.exports = __webpack_public_path__ + \"static/media/other.6672fc57.png\";","module.exports = __webpack_public_path__ + \"static/media/hero1.8b5847e5.jpg\";","module.exports = __webpack_public_path__ + \"static/media/about1.679fdfa6.png\";","module.exports = __webpack_public_path__ + \"static/media/about2.18fa0a8f.png\";","module.exports = __webpack_public_path__ + \"static/media/about3.3f0198c1.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.9b0c6cc2.png\";","module.exports = __webpack_public_path__ + \"static/media/logo-with-title.85dfceb8.png\";","module.exports = __webpack_public_path__ + \"static/media/insta.e77ccb90.png\";","import React, { Component } from 'react';\r\n\r\nimport { Input,Button,Switch,FormGroup,InputLabel,Select } from '@material-ui/core';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenus } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nexport class TagsFilter extends Component {\r\n    \r\n    state={\r\n        gender:{\r\n            txt:'',\r\n            male:false,\r\n            female:false\r\n        },\r\n        distance:{\r\n            range:0\r\n        }\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        // this.setState({...this.state)\r\n        console.log(this.props);\r\n    }\r\n\r\n    \r\n    onGenderChange=async (gender)=>{\r\n        let genderDefault={\r\n            male:false,\r\n            female:false\r\n        }\r\n        genderDefault = {...genderDefault,[gender]:!this.state.gender[gender]}\r\n        console.log(genderDefault);\r\n        await this.setState({...this.state,gender:{...genderDefault}})\r\n    }\r\n    onDistanceChange=async (ev)=>{\r\n        const distance=ev.target.value\r\n        console.log(distance);\r\n    }\r\n    \r\n    \r\n    \r\n    onShow=()=>{\r\n        if(this.state.gender.male!==this.gender.female) {\r\n            \r\n        }\r\n        // this.props.onFilterChange({'gender':gender})\r\n        console.log(this.state);\r\n        this.props.onToggleFilterModal();\r\n    }\r\n    onClear=()=>{\r\n\r\n    }\r\n    displayTags(tag,index){\r\n        return (\r\n            <div  key={index}>\r\n                <label htmlFor=\"\">{tag}</label>\r\n                <Switch type=\"checkbox\" name=\"\" value={tag} />\r\n            </div>\r\n        )\r\n    }\r\n    displayGenderBtns(){\r\n        const {gender}=this.state\r\n        return(\r\n            <section className=\"gender\">                    \r\n                <InputLabel htmlFor=\"\">Gender</InputLabel>\r\n                <div className={gender.male?'pet-gender pressed':'pet-gender'} onClick={()=>this.onGenderChange('male')}><FontAwesomeIcon  className=\" pet-gender-male-icon\"  icon={faMars} /></div>\r\n                <div className={gender.female?'pet-gender pressed':'pet-gender'} onClick={()=>this.onGenderChange('female')}><FontAwesomeIcon  className=\" pet-gender-female-icon\"  icon={faVenus} /></div>\r\n            </section>\r\n        )\r\n    }\r\n\r\n    render(){\r\n        const tags = [\"Kids friendly\",\"Healthy\",\"Energetic\",\"Sterilized\"]\r\n\r\n        return (\r\n            <div className=\"tags-modal\">\r\n                <div className=\"container\">\r\n                <FormGroup>\r\n                    {this.displayGenderBtns()}\r\n                    <section>\r\n\r\n                        <InputLabel htmlFor=\"age\">Age</InputLabel>\r\n                            <Select\r\n                                \r\n                                native\r\n                                onChange={this.props.handleChange}\r\n                                inputProps={{\r\n                                    name: 'age',\r\n                                    id: 'age-native-simple',\r\n                                }}\r\n                                >\r\n                                    <option aria-label=\"None\" value=\"\" />\r\n                                    <option value={1}>Puppy</option>\r\n                                    <option value={7}>Grown up</option>\r\n                                    <option value={15}>Old</option>\r\n                            </Select>\r\n                    </section>\r\n                    <section>\r\n                    <InputLabel htmlFor=\"size\">Size</InputLabel>\r\n                            <Select\r\n                                native\r\n                                onChange={this.props.handleChange}\r\n                                inputProps={{\r\n                                    name: 'size',\r\n                                    id: 'age-native-simple',\r\n                                }}\r\n                                >\r\n                                <option aria-label=\"None\" value=\"\" />\r\n                                <option value=\"small\">Small</option>\r\n                                <option value=\"medium\">Medium</option>\r\n                                <option value=\"big\">Big</option>\r\n                            </Select>\r\n\r\n                    </section>\r\n                   \r\n                    <section>\r\n                            <InputLabel htmlFor=\"\">{'Distance(km)'}</InputLabel>\r\n                            <Input type=\"number\" name=\"\" min=\"1\" id=\"\" onChange={this.onDistanceChange}/>\r\n                    </section>\r\n                    {/* <section >\r\n                        {tags.map((tag,index) => displayTags(tag,index))}\r\n                    </section> */}\r\n                    <section className=\"btns-container\"></section>\r\n                        <Button variant=\"contained\" onClick={this.onShow}>Show</Button>\r\n                        <Button variant=\"contained\" onClick={this.onClear}>Clear</Button>\r\n                </FormGroup>  \r\n                </div>  \r\n             </div>\r\n        )\r\n    }\r\n}\r\n","import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api'\r\n    : '//localhost:3002/api'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            window.location.assign('/#/');\r\n        }\r\n        throw err;\r\n    }\r\n}","import httpService from './httpService.js'\r\nconst BASE_URL = '/pet'\r\n\r\nexport const petService = {\r\n    query,\r\n    getPetById,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy) {\r\n    let queryStr = '';\r\n    //todo - change after building backend\r\n    // if (filterBy){\r\n    //     filterBy.type = filterBy.type.charAt(0).toUpperCase()+filterBy.type.slice(1);\r\n    //     queryStr = '?' + Object.keys(filterBy).map(key => key + '=' + filterBy[key]).join('&');\r\n\r\n    // }    \r\n    const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n        params: filterBy\r\n    });\r\n    const filtered = filterPets(res, filterBy);\r\n    return filtered;\r\n}\r\nasync function getPetById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\nasync function save(pet) {\r\n    if (pet._id) {\r\n        // pet.updatedAt = new Date(date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${pet._id}`, pet)\r\n        return res;\r\n    } else {\r\n        // pet.createdAt = new Date(date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, pet)\r\n        return res;\r\n    }\r\n}\r\nasync function remove(petId) {\r\n    await httpService.delete(`${BASE_URL}/${petId}`)\r\n}\r\nfunction filterPets(pets,filterBy){\r\n    if (!filterBy) return pets\r\n\r\n    let filteredPets=pets\r\n    if(filterBy.txt){\r\n        filterBy.txt=filterBy.txt.trim(' ');\r\n        filterBy.txt=filterBy.txt.trim(',');\r\n\r\n        let words = filterBy.txt.split(' ');\r\n        if (words.length=1) words=filterBy.txt.split(',');\r\n\r\n        words.forEach(word=>{\r\n            filteredPets = filteredPets.filter(pet =>{\r\n                if(pet.name.toLowerCase().includes(word) ||\r\n                 pet.type.toLowerCase().includes(word)||\r\n                 pet.gender.toLowerCase().includes(word)||\r\n                 pet.size.toLowerCase().includes(word)||\r\n                 pet.summary.toLowerCase().includes(word)||\r\n                 pet.description.toLowerCase().includes(word)||\r\n                 pet.shop.fullName.toLowerCase().includes(word)) return pet\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    filteredPets = filteredPets.filter(pet => {\r\n        return pet.type.toLowerCase().includes(filterBy.type)\r\n    })\r\n\r\n\r\n    if (filterBy.distance.range){\r\n        const geocoder = require('google-geocoder');\r\n        const geo = geocoder({\r\n            key: 'AIzaSyDGql0MyVMEQeH89LQj0TtpM66SoLpkAhw'\r\n        });\r\n        const distance=geo.computeDistanceBetween()\r\n        filteredPets = filteredPets.filter(pet=>{\r\n            return pet\r\n            })\r\n    }\r\n    return filteredPets\r\n}\r\n\r\n","import { petService } from \"../../services/petService.js\"\r\n\r\nexport function loadPets(filterBy) {\r\n    return async dispatch => {\r\n        const pets = await petService.query(filterBy);\r\n        dispatch({ type: 'LOAD_PETS', pets });\r\n    }\r\n}\r\n\r\nexport function savePet(pet) {\r\n    return async dispatch => {\r\n        const petToSave = await petService.save(pet);\r\n        if (pet._id) dispatch({ type: 'EDIT_PET', petToSave });\r\n        else dispatch({ type: 'ADD_PET', petToSave });\r\n    }\r\n}\r\n\r\nexport function removePet(petId) {\r\n    return async dispatch => {\r\n       await petService.remove(petId);\r\n       dispatch({ type: 'REMOVE_PET', petId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport { setFilter, loadPets } from '../store/actions/petActions.js'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch, faTimesCircle } from '@fortawesome/free-solid-svg-icons'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\n\r\n\r\nclass _FilterSearch extends Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isClearShown: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.setState({ txt: this.props.filterBy.txt });\r\n        await this.setState({ parent: this.props.parent });\r\n        this.setState({ isClearShown: this.state.txt !== '' })\r\n        if (this.props) {\r\n            console.log(this.props);\r\n        }\r\n\r\n    }\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps !== this.props) {\r\n            this.setState({ txt: this.props.filterBy.txt });\r\n            this.setState({ isClearShown: this.state.txt !== '' })\r\n        }\r\n    }\r\n\r\n    onInputChange = async (ev) => {\r\n        console.log(ev.target.value);\r\n        const txt = ev.target.value;\r\n        this.setState({ isClearShown: txt !== '' })\r\n        await this.setState({ txt });\r\n        if (!txt && this.state.parent !== 'hero') await this.onSearch();\r\n    }\r\n    keyPress = (e) => {\r\n        if (e.keyCode == 13) {\r\n            this.onSearch();\r\n\r\n        }\r\n    }\r\n    onClear = async () => {\r\n        this.setState({ txt: '' })\r\n        this.props.setFilter({ txt: '' }, () => this.props.loadPets())\r\n        this.setState({ isClearShown: false })\r\n    }\r\n\r\n    onSearch = async () => {\r\n        await this.props.setFilter({ txt: this.state.txt }, () => this.props.loadPets())\r\n        console.log(this.props)\r\n\r\n        if (this.state.parent === 'hero') this.props.history.push('/pet')\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <section className=\"search-container flex\">\r\n                <div className=\"input-container\">\r\n                    <input className=\"search\"\r\n                        type=\"text\"\r\n                        name=\"search\"\r\n                        value={this.state.txt}\r\n                        autoComplete=\"off\"\r\n                        placeholder=\"Find a friend (i.e. small, cat, puppy)\"\r\n                        onChange={(ev) => this.onInputChange(ev)}\r\n                        onKeyDown={this.keyPress} />\r\n                    <FontAwesomeIcon className=\"search-icon\" icon={faSearch} />\r\n                    <FontAwesomeIcon className={this.state.isClearShown ? 'clear-icon' : 'clear-icon hidden'}\r\n                        onClick={this.onClear} icon={faTimesCircle} />\r\n                </div>\r\n                <div className=\"btn-search\" onClick={this.onSearch}>Search</div>\r\n                {/* <div className=\"icons-container\">\r\n                </div> */}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.petReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setFilter,\r\n    loadPets\r\n}\r\n\r\nexport const FilterSearch = withRouter(connect(mapStateToProps, mapDispatchToProps)(_FilterSearch));\r\n\r\n\r\n","import React, { Component } from 'react'\r\n\r\n\r\nexport class CategoryList extends Component {\r\n    \r\n    state={\r\n        dog:false,\r\n        cat:false,\r\n        farm:false,\r\n        other:false\r\n    }\r\n    \r\n\r\n\r\n    displayTypesBtn(type){\r\n        const classStr=this.state[type]?'pressed':'';\r\n        return(\r\n             <img key={type} src={require(`../assets/img/category/${type}.png`)} className={classStr} alt=\"Category\" onClick={()=>this.imgClicked(type)}/>\r\n        )\r\n    }\r\n     imgClicked=async (type)=>{\r\n         const state= {\r\n            dog:false,\r\n            cat:false,\r\n            farm:false,\r\n            other:false\r\n         }\r\n        if(this.state[type]) {\r\n            await this.setState({...state})\r\n            type='';\r\n        }else await this.setState({...state,[type]:!this.state.type})\r\n        this.props.onCategoryChange({'type':type})\r\n        \r\n    }\r\n    render(){\r\n        \r\n        return (\r\n            <div className=\"category-list anchor\">\r\n                {\r\n                    Object.keys(this.state).map(type=>this.displayTypesBtn(type) )\r\n                }\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\n\r\nimport {TagsFilter}from './TagsFilter'\r\nimport {setFilter,loadPets} from '../store/actions/petActions.js'\r\nimport { FilterSearch } from './FilterSearch';\r\nimport {CategoryList} from  './CategoryList'\r\n// import SearchIcon from '@material-ui/icons/Search';\r\n\r\n  class _PetFilter extends Component {\r\n\r\n    state={\r\n            parent:'',\r\n            filterBy: {\r\n                type:'',\r\n                gender:'',\r\n                breed:'',\r\n                size:'',\r\n                txt:'',\r\n                distance:{\r\n                    lat:0,\r\n                    lon:0,\r\n                    range:0\r\n                }\r\n            },\r\n            isModalShown:false,\r\n            tags:[]\r\n        \r\n    }\r\n\r\n   async componentDidMount(){\r\n       const position= await navigator.geolocation.getCurrentPosition(\r\n        function(position) {\r\n          return position\r\n          const distance={\r\n            lat:position.coords.latitude,\r\n            lon:position.coords.longitude,\r\n            range:0\r\n        }\r\n        this.setState({...this.state.filterBy,distance:distance});\r\n        \r\n        },\r\n        function(error) {\r\n          console.error(\"Error Code = \" + error.code + \" - \" + error.message);\r\n        }\r\n      );\r\n      console.log(position);\r\n      this.setState({...this.state,filterBy:this.props.filterBy})\r\n\r\n   }\r\n    \r\n   componentDidUpdate(){\r\n       console.log(this.props.pets);\r\n   }\r\n    onFilterChange=(obj)=>{\r\n        this.updateFilterAndLoad(obj)\r\n    }\r\n     \r\n    handleChange = (ev) => {\r\n       console.log(ev);\r\n        \r\n    }\r\n    onToggleFilterModal =()=>{\r\n        this.setState({isModalShown:!this.state.isModalShown})\r\n    }\r\n    onApplyFilter=()=>{\r\n        this.onToggleFilterModal()\r\n    }\r\n   \r\n    resetFilter=async()=>{\r\n        \r\n        await this.setState({...this.state.filterBy,\r\n            type:'',\r\n            gender:'',\r\n            breed:'',\r\n            size:'',\r\n            txt:''\r\n        });\r\n        this.props.setFilter(this.state.filterBy,()=>this.props.loadPets())\r\n    }\r\n\r\n    async updateFilterAndLoad(obj){\r\n        await this.props.setFilter({...this.props.filterBy,...obj},()=>this.loadPets())\r\n    }\r\n    onToggleTag=ev=>{\r\n        console.log('toggled:', ev.target.value);\r\n        const tag = ev.target.value;\r\n        let tags = [...this.state.tags]\r\n        if (tags.includes(tag)){\r\n            tags.splice(tags.indexOf(tag),1);\r\n        }else{\r\n            tags.push(tag)\r\n        }\r\n        this.setState({tags})\r\n        console.log(this.state.tags);\r\n    }\r\n\r\n    render() {\r\n        const {isModalShown, parent} = this.state\r\n        // const btnClass=parent==='hero'?'hero-btn more-btn':'gallery-btn more-btn';\r\n        return (\r\n            <div className=\"filter-container flex column align-center\">\r\n                <section className=\"categoty-container\">\r\n                    <CategoryList onCategoryChange={this.onFilterChange}/>\r\n                </section>\r\n                <section>\r\n                    {/* {//more filters: gender and distance} */}\r\n                </section>\r\n                <section className=\"search-container flex space-around\">\r\n                        <FilterSearch parent=\"main\" onInputChange={this.onInputChange}/>\r\n                        {/* { <button className=\"more-btn\"  onClick={this.onToggleFilterModal}>More</button>} */}\r\n                </section>\r\n                {isModalShown   && <TagsFilter filterBy={this.props.filterBy} onToggleTag={this.onToggleTag} onFilterChange={this.onFilterChange} onToggleFilterModal={this.onToggleFilterModal}/>}\r\n              \r\n            <br/>   \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy:state.petReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n   setFilter,\r\n   loadPets\r\n}\r\n\r\n\r\nexport const PetFilter = connect(mapStateToProps, mapDispatchToProps)(_PetFilter)\r\n","import React, { Component } from 'react'\r\nimport { PetFilter } from './PetFilter'\r\nimport { FilterSearch } from './FilterSearch'\r\nimport { CategoryList } from './CategoryList'\r\nimport { Parallax, Background } from 'react-parallax';\r\nexport class Hero extends Component {\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <Parallax\r\n            bgImage={require('../assets/img/hero1.jpg')}\r\n            bgImageAlt=\"the cat\"\r\n            strength={800}\r\n            style={{width:\"100%\"}}\r\n        >\r\n            \r\n            {/* <div style={{ height: '600px' }} /> */}\r\n        \r\n            <div className=\"hero-container full\">\r\n                <div className=\"hero-content\">\r\n                    <h1 className=\"hero-heading-up\"><span className=\"span\">Friendly.</span> Adopt a <span className=\"span\">pet</span> </h1>\r\n                    <h1 className=\"hero-heading\">Discover your next best friend</h1>\r\n                    <FilterSearch parent='hero' />\r\n                    <section className=\"category-container\">\r\n                        {/* <CategoryList/> */}\r\n                    </section>\r\n                </div>\r\n            </div>\r\n            </Parallax>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nexport class About extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"about-main-container full\">\r\n                <div className=\"about-left\">\r\n                    <div className=\"about-headings\">\r\n                        <h1>Friendly connects adoption centers to potential adopters</h1>\r\n                    </div>\r\n                    <div className=\"call-to-action\">\r\n                       <Link to=\"/pet\"><button className=\"go-to-gallery-btn\">Let's See Some Animals</button></Link> \r\n                    </div>\r\n                </div>\r\n                <div className=\"about-right\">\r\n                    <div className=\"adoption-reasons-box\">\r\n                        <h3 className=\"adoption-reasons-header\">Why Should I Adopt?</h3>\r\n                        <p>Decrease blood pressure.</p>\r\n                        <p>Decrease feelings of loneliness.</p>\r\n                        <p>Increase opportunities for exercise and outdoor activities.</p>\r\n                        <p className=\"adoption-reason-last\">Increase opportunities for socialization.</p>\r\n                    </div>\r\n                    <div className=\"images-box\">\r\n                        <img className=\"img-1\" src={require('../assets/img/about1.png')} alt=\"\" />\r\n                        <img className=\"img-2\" src={require('../assets/img/about2.png')} alt=\"\" />\r\n                        <img className=\"img-3\" src={require('../assets/img/about3.png')} alt=\"\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { Hero } from '../cmps/Hero'\r\nimport { loadPets } from '../store/actions/petActions.js'\r\nimport { About } from '../cmps/About'\r\n\r\nclass _Home extends Component {\r\n\r\n    state = {\r\n        pets: [],\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.loadPets()       \r\n    }\r\n    \r\n\r\n    loadPets = () => {\r\n        this.props.loadPets()\r\n    }\r\n\r\n    render() {\r\n        const {user} = this.props\r\n        return (\r\n            <div>\r\n\r\n                <Hero />\r\n                <About />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        user: state.userReducer.loggedInUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadPets\r\n}\r\n\r\nexport const Home = connect(mapStateToProps, mapDispatchToProps)(_Home)","import React from 'react'\r\nimport { OutlinedInput } from '@material-ui/core';\r\n\r\nexport class Geolocation extends React.Component {\r\n\r\n    state = {\r\n        lat: 0,\r\n        lng: 0\r\n    }\r\n\r\n    setLocToFind = async (ev) => {\r\n        const loc = ev.target.value;\r\n        console.log('find:', loc);\r\n        const res = await this.findLocation(loc, this.getLatLng);\r\n    }\r\n\r\n    findLocation = async (loc, cb) => {\r\n        const geocoder = require('google-geocoder');\r\n        const geo = geocoder({\r\n            key: 'AIzaSyDGql0MyVMEQeH89LQj0TtpM66SoLpkAhw'\r\n        });\r\n        geo.find(loc, cb);\r\n    }\r\n\r\n    getLatLng = async (err, res) => {\r\n        const data = await res;\r\n        if (data && data.length > 0) {\r\n            await this.setState({\r\n                lat: data[0].location.lat,\r\n                lng: data[0].location.lng\r\n            })\r\n           const latLang = {\r\n                lat:this.state.lat,\r\n                lng:this.state.lng\r\n            }\r\n            this.props.getGeolocation(latLang);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const latLng = this.state;\r\n        if (!latLng) return <h1>LOADING...</h1>\r\n        return (\r\n            <div className=\"flex column align-center\">\r\n                <OutlinedInput type=\"text\" name=\"locName\" placeholder=\"Your Shop Location\"\r\n                    onChange={(event) => {\r\n                        this.setLocToFind(event);\r\n                        this.props.signupHandleChange(event)\r\n                    }}/>\r\n            </div>\r\n        )\r\n    }\r\n}","import httpService from './httpService'\r\nconst BASE_URL_AUTH = '/auth'\r\nconst BASE_URL_USER = '/user'\r\n\r\nexport default {\r\n    login,\r\n    logout,\r\n    signup,\r\n    getUsers,\r\n    getById,\r\n    remove,\r\n    update\r\n}\r\n\r\nfunction getUsers() {\r\n    return httpService.get('user')\r\n}\r\n\r\nfunction getById(userId) {\r\n    return httpService.get(`${BASE_URL_USER}/${userId}`)\r\n}\r\nfunction remove(userId) {\r\n    return httpService.delete(`${BASE_URL_USER}/${userId}`)\r\n}\r\n\r\nfunction update(user) {\r\n    console.log('This is user',user);\r\n    return httpService.put(`user/${user._id}`, user)\r\n}\r\n\r\nasync function login(userCred) {\r\n    const res = await httpService.post(`${BASE_URL_AUTH}/login`, userCred);\r\n    return res;                              \r\n}\r\n\r\nasync function signup(user) {\r\n    const res = await httpService.post(`user`, user);\r\n    return res[0] \r\n}\r\n\r\nasync function logout() {\r\n    await httpService.post(`${BASE_URL_AUTH}/logout`);\r\n    sessionStorage.clear();\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","import userService from \"../../services/userService\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            const users = await userService.getUsers();\r\n            dispatch({\r\n                type: 'SET_USERS',\r\n                users\r\n            });\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err);\r\n        }\r\n    }\r\n}\r\n\r\nexport async function getUserById(id) {\r\n    const user = await userService.getById(id);\r\n    return user;\r\n}\r\n\r\nexport function removeUser(userId) {\r\n    return async dispatch => {\r\n        try {\r\n            await userService.remove(userId);\r\n            dispatch({\r\n                type: 'USER_REMOVE',\r\n                userId\r\n            });\r\n        } catch (err) {\r\n            console.log('UserActions: err in removeUser', err);\r\n        }\r\n    };\r\n}\r\n\r\nexport function updateUser(user) {\r\n    return async dispatch => {\r\n        const userToSave = await userService.update(user);\r\n        dispatch({\r\n            type: 'UPDATE_USER',\r\n            userToSave\r\n        });\r\n    };\r\n}\r\n\r\nexport function login(userCreds) {\r\n    return async dispatch => {\r\n        const user = await userService.login(userCreds);\r\n        dispatch({\r\n            type: 'SET_USER',\r\n            user\r\n        });\r\n    };\r\n}\r\nexport function signup(_user) {\r\n    return async dispatch => {\r\n        const user = await userService.signup(_user);\r\n        dispatch({\r\n            type: 'SET_USER',\r\n            user\r\n        });\r\n    };\r\n}\r\nexport function logout() {\r\n    return async dispatch => {\r\n        await userService.logout();\r\n        dispatch({\r\n            type: 'LOGOUT'\r\n        });\r\n    };\r\n}","import httpService from './httpService.js'\r\nconst BASE_URL = '/shop'\r\n\r\n\r\nexport const shopService = {\r\n    query,\r\n    getById,\r\n    getByUserId,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query() {\r\n    const res = await httpService.get(`${BASE_URL}`);\r\n    return res;\r\n}\r\n\r\nasync function getById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function getByUserId(id) {\r\n    const res = await httpService.get(`${BASE_URL}/owner/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function save(shop) {\r\n    if (shop._id) {\r\n        shop.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${shop._id}`, shop)\r\n        return res;\r\n\r\n    } else {\r\n        shop.createdAt = new Date(Date.now()).toLocaleString();\r\n    }\r\n    shop.pets = [];\r\n    shop.reviews = [];\r\n    const res = await httpService.post(`${BASE_URL}`, shop)\r\n    return res;\r\n}\r\n\r\n\r\nasync function remove(shopId) {\r\n    await httpService.delete(`${BASE_URL}/${shopId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}","import { shopService } from \"../../services/shopService.js\"\r\n\r\nexport function loadShops() {\r\n    return async dispatch => {\r\n        const shops = await shopService.query();\r\n        dispatch({ type: 'LOAD_SHOPS', shops });\r\n    }\r\n}\r\n\r\nexport function getShopById(shopId) {\r\n    return async dispatch => {\r\n        const shop = await shopService.getById(shopId);\r\n        dispatch({ type: 'GET_SHOP', shop });\r\n    }\r\n}\r\n\r\nexport function saveShop(shop) {\r\n    return async dispatch => {\r\n        const shopToSave = await shopService.save(shop);\r\n        if (shop._id) dispatch({ type: 'EDIT_SHOP', shopToSave });\r\n        else dispatch({ type: 'ADD_SHOP', shopToSave });\r\n    }\r\n}\r\n\r\nexport function removeShop(shopId) {\r\n    return async dispatch => {\r\n       await shopService.remove(shopId);\r\n       dispatch({ type: 'REMOVE_SHOP', shopId })\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\nimport { OutlinedInput } from '@material-ui/core';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Geolocation } from '../cmps/Geolocation';\r\n\r\nimport { signup, getUserById, updateUser, login, loadUsers } from '../store/actions/userActions'\r\nimport { saveShop, loadShops } from '../store/actions/shopActions'\r\n\r\n\r\nexport class _SignUp extends Component {\r\n\r\n    state = {\r\n        userAdopt: false,\r\n        userShop: false,\r\n        signupCred: ''\r\n    }\r\n\r\n    setUserAdopt = () => {\r\n        this.setState({ userAdopt: true, userShop: false })\r\n    }\r\n    setUserShop = () => {\r\n        this.setState({ userShop: true, userAdopt: false })\r\n    }\r\n\r\n    signupHandleChange = async ev => {\r\n        const { name, value } = ev.target;\r\n        await this.setState(prevState => ({\r\n            signupCred: {\r\n                ...prevState.signupCred,\r\n                [name]: value\r\n            }\r\n        }));\r\n        console.log('This State:', this.state);\r\n    };\r\n\r\n    doSignup = async ev => {\r\n        ev.preventDefault();\r\n        const { userAdopt, userShop } = this.state;\r\n        const { fullName, username, password, address, email, phone } = this.state.signupCred;\r\n        if (!fullName || !username || !password || !address) {\r\n            return this.setState({ msg: 'All inputs are required!' });\r\n        }\r\n        const user = {\r\n            fullName: fullName,\r\n            username: username,\r\n            password: password,\r\n            imgUrl: `https://ui-avatars.com/api/?name=${fullName.substring(0, 1)}+${fullName.substring(fullName.indexOf(' ') + 1, fullName.indexOf(' ') + 2)}`,\r\n            address: address,\r\n            email: email,\r\n            phone: phone,\r\n            isOwner: userShop,\r\n            isGuest: false\r\n        };\r\n        await this.props.signup(user);\r\n        await this.props.loadUsers();\r\n        const lastSignUpUser = this.props.users[this.props.users.length - 1]\r\n        console.log('userNow:',lastSignUpUser);\r\n        this.setState({ signupCred: { fullName: '', username: '', password: '', address: '', email: '', phone: '' } });\r\n        if (userShop) {\r\n            this.signUpShop(lastSignUpUser);\r\n        } \r\n        this.props.history.push(`/`);\r\n    }\r\n\r\n    signUpShop = async (currUser) => {\r\n        const { name, type, title, desc, locName, lat, lng } = this.state.signupCred;\r\n        if (!name || !type || !title || !desc || !locName) {\r\n            return this.setState({ msg: 'All inputs are required!' });\r\n        }\r\n\r\n        const owner = {\r\n            _id: currUser._id,\r\n            fullName: currUser.fullName,\r\n            imgUrl: currUser.imgUrl\r\n        }\r\n        const location = {\r\n            name: locName,\r\n            lat: parseFloat(lat),\r\n            lng: parseFloat(lng)\r\n        }\r\n        const signupCreds = { name, type, owner, title, desc, location };\r\n        this.props.saveShop(signupCreds);\r\n        currUser.isOwner = true;\r\n        await this.props.updateUser(currUser)\r\n        this.setState({\r\n            signupCred: {\r\n                name: '', type: '', owner: '', title: '', description: '', location: ''\r\n            }\r\n        });\r\n        // await this.props.loadShops();\r\n        // const shopId = this.props.shops.find(shop => { return shop.owner._id === currUser._id })._id;\r\n        // this.props.history.push(`/shop/${shopId}`)\r\n    }\r\n\r\n    getGeolocation = (latLng) => {\r\n        this.setState({\r\n            signupCred: {\r\n                ...this.state.signupCred,\r\n                lat: latLng.lat,\r\n                lng: latLng.lng\r\n            }\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const { userAdopt, userShop } = this.state\r\n        const { loggedInUser } = this.props\r\n        console.log('this.state.signupCred', this.state.signupCred);\r\n        return (\r\n            <div className=\"form-container flex column align-center\">\r\n                <h1>We are happy you decided to join us!</h1>\r\n                <p>Do you want to adopt or to find adopters for your animals?</p>\r\n                <div className=\"btn-menu flex\">\r\n                    <button onClick={() => { this.setUserAdopt() }}>Adopt</button>\r\n                    <button onClick={() => { this.setUserShop() }}>Find Adopters</button>\r\n                </div>\r\n                <div className=\"fields-container flex column align-center\">\r\n                    {(userAdopt) ? <h3>New Adopter</h3> :\r\n                        <h3>Please filled out this form so we will be able to get to know you and your animals</h3>}\r\n                    <form className=\"flex column align-center\" onSubmit={this.doSignup}>\r\n                        <div className=\"flex\">\r\n                            <div className=\"flex column align-center\">\r\n                                <br />\r\n                                <OutlinedInput type=\"text\" name=\"fullName\" placeholder=\"Full Name\" onChange={this.signupHandleChange} value={this.state.signupCred.fullName}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"username\" placeholder=\"User Name\" onChange={this.signupHandleChange} value={this.state.signupCred.username}></OutlinedInput>\r\n                                <OutlinedInput type=\"password\" name=\"password\" placeholder=\"Password\" onChange={this.signupHandleChange} value={this.state.signupCred.password}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"address\" placeholder=\"Personal Address\" onChange={this.signupHandleChange} value={this.state.signupCred.address}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"email\" placeholder=\"Email\" onChange={this.signupHandleChange} value={this.state.signupCred.email}></OutlinedInput>\r\n                                <OutlinedInput type=\"text\" name=\"phone\" placeholder=\"Phone\" onChange={this.signupHandleChange} value={this.state.signupCred.phone}></OutlinedInput>\r\n                            </div>\r\n                            {userShop &&\r\n                                <div className=\"flex column align-center\">\r\n                                    <OutlinedInput type=\"text\" name=\"name\" placeholder=\"Your Shop Name\"\r\n                                        onChange={this.signupHandleChange}></OutlinedInput>\r\n                                    <FormControl>\r\n                                        <InputLabel htmlFor=\"type\">Shop Type:</InputLabel>\r\n                                        <Select\r\n                                            native\r\n                                            onChange={this.signupHandleChange}\r\n                                            inputProps={{\r\n                                                name: \"type\",\r\n                                            }}>\r\n                                            <option aria-label=\"None\" value=\"\" />\r\n                                            <option value={\"shelter\"}>Shelter</option>\r\n                                            <option value={\"volunteer\"}>Volunteer</option>\r\n                                            <option value={\"private\"}>Private</option>\r\n                                        </Select>\r\n                                    </FormControl>\r\n                                    <OutlinedInput type=\"text\" name=\"title\" placeholder=\"Your shop title/catchFrase\"\r\n                                        onChange={this.signupHandleChange}></OutlinedInput>\r\n                                    <OutlinedInput\r\n                                        id=\"standard-textarea\"\r\n                                        label=\"Shop Description:\"\r\n                                        placeholder=\"Your shop short description\"\r\n                                        multiline\r\n                                        name=\"desc\"\r\n                                        onChange={this.signupHandleChange}\r\n                                    />\r\n                                    <Geolocation getGeolocation={this.getGeolocation}\r\n                                        signupHandleChange={this.signupHandleChange} />\r\n                                    <br />\r\n                                </div>}\r\n                        </div>\r\n                        <button>Signup</button>\r\n                    </form>\r\n                </div >\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.userReducer.users,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n        shops: state.shopReducer.shops\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    login,\r\n    loadUsers,\r\n    saveShop,\r\n    loadShops,\r\n    getUserById,\r\n    updateUser\r\n};\r\n\r\nexport const SignUp = connect(mapStateToProps, mapDispatchToProps)(_SignUp);","import { NavLink, Link } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons'\r\nimport { faMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenus } from '@fortawesome/free-solid-svg-icons'\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { loadPets, savePet } from '../store/actions/petActions';\r\n\r\n\r\nclass _PetPreview extends Component {\r\n\r\n    state = {\r\n        pet: {},\r\n        isLiked: false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.setState({ pet: { ...this.props.pet } })\r\n    }\r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps != this.props) {\r\n            await this.setState({ pet: { ...this.props.pet } })\r\n        }\r\n    }\r\n\r\n    onUpdateReaction = async (ev, reaction) => {\r\n        ev.preventDefault()\r\n        const pet = this.state.pet;\r\n        const updatedReacts = pet.reacts.map(react => {\r\n            if (react.type === reaction) {\r\n\r\n                react.count += this.state.isLiked ? -1 : +1;\r\n                this.setState({ ...this.state, isLiked: !this.state.isLiked })\r\n            }\r\n            return react\r\n        })\r\n        await this.setState({ ...pet, reacts: [...updatedReacts] })\r\n        const petToSave = await JSON.parse(JSON.stringify(this.state.pet));\r\n        await this.props.savePet(petToSave);\r\n    }\r\n\r\n    render() {\r\n        const { pet } = (Object.keys(this.state.pet).length === 0) ? this.props : this.state;\r\n        if (!pet || !pet.reacts) return <h1>loading...</h1>\r\n        return (\r\n            <NavLink to={`/details/${pet._id}`}>\r\n\r\n                <div className=\"pet-preview\">\r\n                {pet.isAdopted && <div class=\"ribbon ribbon-top-right\"><span>Adopted</span></div>}\r\n                <img src={(pet.imgUrls) ? pet.imgUrls[0] : ''} alt=\"pet\" />\r\n                <div className=\"card-description\">\r\n                    <div className=\"card-description-header\">\r\n                        <h2 className=\"pet-name\">{pet.name}</h2>\r\n                        {(pet.gender === 'Male') && <FontAwesomeIcon className=\"pet-gender-male-icon\" icon={faMars} />}\r\n                        {(pet.gender !== 'Male') && <FontAwesomeIcon className=\"pet-gender-female-icon\" icon={faVenus} />}\r\n                    </div>\r\n                    <h4>{pet.summary}</h4>\r\n                </div>\r\n                <div className=\"shop-container\">\r\n                    {pet.shop && <Link to={`/shop/${pet.shop._id}`}>{pet.shop.fullName}</Link>}\r\n                    {/* {pet.shop && <h4>{pet.shop.fullName}</h4>} */}\r\n                    <div onClick={(ev) => { this.onUpdateReaction(ev, 'love') }} className=\"pet-rate-box\">\r\n                        <span>{pet.reacts && pet.reacts[0].type === 'love' ? <FontAwesomeIcon className=\"love-icon\" icon={faHeart} /> : ''} </span>\r\n                        {pet.reacts && pet.reacts[0].type === 'love' ? <span className=\"love-count\">{pet.reacts[0].count}</span> : ''}\r\n\r\n\r\n                        {/* <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                            {pet.shop && <p className=\"shop-rate-rating\">{pet.shop.rate.rating}  </p>}\r\n                            {pet.shop && <p className=\"shop-rate-count\">({pet.shop.rate.count})  </p>} */}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                </div>\r\n            </ NavLink >\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePet,\r\n    loadPets\r\n\r\n}\r\n\r\n\r\nexport const PetPreview = connect(mapStateToProps, mapDispatchToProps)(_PetPreview)\r\n\r\n","import React from 'react'\r\nimport { PetPreview } from './PetPreview'\r\n\r\n\r\nexport function PetList({pets, onRemove,onEdit}) {\r\n    return (\r\n        <div className=\"pet-list-container\">\r\n            <ul className=\"pet-list\">\r\n                {\r\n                  \r\n                   pets.map(pet => <PetPreview pet={pet} onRemove={onRemove} onEdit={onEdit} />)\r\n                }\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { PetFilter } from '../cmps/PetFilter'\r\nimport { PetList } from '../cmps/PetList'\r\nimport { loadPets, removePet,setFilter } from '../store/actions/petActions'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\n\r\nclass _PetApp extends Component {\r\n\r\n    state = {\r\n        pets: [],\r\n        filterBy:{type:''},\r\n        sortBy: null,\r\n        isReady:false\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.loadPets();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n   async  componentDidUpdate(prevProps){\r\n        if (prevProps!==this.props){\r\n            this.setState({isReady:true})\r\n           }\r\n        if(prevProps.filterBy!==this.props.filterBy){\r\n            await this.loadPets();\r\n        }\r\n\r\n    }\r\n    async componentWillUnmount(){\r\n       await this.resetFitler();\r\n    }\r\n\r\n     resetFitler=async()=>{\r\n        await this.props.setFilter({\r\n            type:'',\r\n            gender:'',\r\n            breed:'',\r\n            size:'',\r\n            txt:''\r\n        },()=>this.loadPets())\r\n    }\r\n\r\n    loadPets = async _ => {\r\n        //loading from props with filter and setting the local state\r\n        await this.props.loadPets(this.props.filterBy);\r\n        const pets=this.props.pets;\r\n        await this.setState({...this.state,pets})\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removePet(id)\r\n    }\r\n    \r\n    render() {\r\n        const {  user } = this.props;\r\n        if (!this.state.pets) return <h1>Loading...</h1>\r\n        return (\r\n            <div className=\"pets-container\"> \r\n                <PetFilter/>\r\n                <div id=\"center\"></div>\r\n                <PetList pets={this.state.pets} onRemove={this.onRemove} user={user} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        filterBy:state.petReducer.filterBy \r\n      }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    removePet,\r\n    setFilter\r\n}\r\n\r\nexport const PetApp = connect(mapStateToProps, mapDispatchToProps)(_PetApp)\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { savePet, loadPets } from '../store/actions/petActions.js'\r\nimport { Input } from '@material-ui/core';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\n\r\n\r\nexport class _PetEdit extends Component {\r\n\r\n    state = {\r\n        pet: {}\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.props.loadPets();\r\n        const petId = this.props.match.params.id\r\n        if (petId) {\r\n            const petToEdit = this.props.pets.find(pet => pet._id === petId)\r\n            this.setState({ pet: { ...petToEdit } })\r\n        }\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        if (target.type === 'number') var value = +target.value;\r\n        else if (target.type === 'checkbox') value = (target.checked);\r\n        else value = target.value;\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                pet: {\r\n                    ...prevState.pet,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onSubmitForm = (ev) => {\r\n        ev.preventDefault();\r\n        this.props.savePet(this.state.pet);\r\n        this.props.history.push('/')\r\n    }\r\n\r\n    render() {\r\n        const pet = { ...this.state.pet }\r\n        if (Object.keys(pet).length === 0) return (<h1>LOADING...</h1>)\r\n        return (\r\n            <form className={\"form-container fields-container flex column align-center below-nav\"}\r\n                onSubmit={(event) => { this.onSubmitForm(event) }}>\r\n                {(!pet._id) ? <h1>Add Your Pet</h1> : <h1>Edit Pet Details</h1>}\r\n                <Input type=\"text\" name=\"name\" placeholder=\"Pet Name:\"\r\n                    value={pet.name} onChange={this.handleInput}></Input>\r\n                <Input type=\"text\" name=\"type\" placeholder=\"Pet Type:\"\r\n                    value={pet.type} onChange={this.handleInput}></Input>\r\n                <TextField name=\"adoptedAt\" label=\"Pet Adoption Date\" type=\"date\"\r\n                    defaultValue={new Date(pet.adoptedAt).toISOString().substr(0, 10)}\r\n                    onChange={this.handleInput}\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <TextField name=\"bDate\" label=\"Pet Birth Date\" type=\"date\"\r\n                    defaultValue={new Date(pet.bDate).toISOString().substr(0, 10)}\r\n                    onChange={this.handleInput}\r\n                    InputLabelProps={{ shrink: true }}\r\n                />\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"type\">Pet Gender:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        value={pet.gender}\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"gender\",\r\n                        }}>\r\n                        <option value={\"male\"}>Male</option>\r\n                        <option value={\"female\"}>Female</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <Input type=\"text\" name=\"breed\" placeholder=\"Pet Breed:\"\r\n                    value={pet.breed} onChange={this.handleInput}></Input>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"type\">Pet Size:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        value={pet.size}\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"size\",\r\n                        }}>\r\n                        <option value=\"small\">Small</option>\r\n                        <option value=\"medium\">medium</option>\r\n                        <option value=\"large\">Large</option>\r\n                        <option value=\"giant\">Giant</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl className=\"flex align-center\">\r\n                    <lable htmlFor=\"type\"> Is In Risk:\r\n                    <input type=\"checkbox\" checked={(pet.isInRisk) ? \"checked\" : \"\"} />\r\n                    </lable>\r\n                    <br /><br />\r\n                </FormControl>\r\n                <TextField\r\n                    id=\"standard-textarea\"\r\n                    label=\"Pet description:\"\r\n                    placeholder=\"Your pet short description\"\r\n                    multiline\r\n                    name=\"description\"\r\n                    value={pet.description}\r\n                    onChange={this.handleInput}\r\n                />\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"kids\">Select pet behavior with kids:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"kids\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"dogs\">Select pet behavior with dogs:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"dogs\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"cats\">Select pet behavior with cats:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"cats\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"friendly\">Friendly</option>\r\n                        <option value=\"selective\">Selective</option>\r\n                        <option value=\"agressive\">Agressive</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"energy\">Select pet energy level:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"energy\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"low\">Low</option>\r\n                        <option value=\"moderate\">Moderate</option>\r\n                        <option value=\"high\">High</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel htmlFor=\"health\">Select pet health condition:</InputLabel>\r\n                    <Select\r\n                        native\r\n                        onChange={this.handleInput}\r\n                        inputProps={{\r\n                            name: \"health\",\r\n                        }}>\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"helathy\">Healthy</option>\r\n                        <option value=\"notHealthy\">Not Healthy</option>\r\n                    </Select>\r\n                </FormControl>\r\n                <button>SAVE</button>\r\n            </form >\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    savePet,\r\n    loadPets\r\n}\r\n\r\nexport const PetEdit = connect(mapStateToProps, mapDispatchToProps)(_PetEdit)\r\n","import httpService from './httpService.js'\r\nconst BASE_URL = '/order'\r\n\r\n\r\nexport const orderService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy={}, filterName) {\r\n    if (filterBy) {\r\n        const queryStr = (filterBy) ? `?${filterName}=${filterBy}` : '';\r\n        const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n            params: filterBy\r\n        });\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function getById(id) {\r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function save(order) {\r\n    if (order._id) {\r\n        order.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${order._id}`, order)\r\n        return res;\r\n\r\n    } else {\r\n        order.createdAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, order)\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function remove(orderId) {\r\n    await httpService.delete(`${BASE_URL}/${orderId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n","import { orderService } from \"../../services/orderService.js\"\r\n\r\nexport function loadOrders(filterBy, filterName) {\r\n    return async dispatch => {\r\n        const orders = await orderService.query(filterBy, filterName);\r\n        dispatch({ type: 'LOAD_ORDERS', orders });\r\n    }\r\n}\r\n\r\nexport function saveOrder(order) {\r\n    return async dispatch => {\r\n        const orderToSave = await orderService.save(order);\r\n        if (order._id) dispatch({ type: 'EDIT_ORDER', orderToSave });\r\n        else dispatch({ type: 'ADD_ORDER', orderToSave });\r\n    }\r\n}\r\n\r\nexport function removeOrder(orderId) {\r\n    return async dispatch => {\r\n       await orderService.remove(orderId);\r\n       dispatch({ type: 'REMOVE_ORDER', orderId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n","import io from 'socket.io-client';\r\n\r\nconst baseUrl = (process.env.NODE_ENV === 'production')? '' : '//localhost:3002/'\r\nconst socketService = createSocketService();\r\n// const socketService = createDummySocketService();\r\n\r\nwindow.socketService = socketService;\r\nexport default socketService;\r\n\r\nfunction createSocketService() {\r\n  var socket;\r\n  const socketService = {\r\n    setup() {\r\n      socket = io(baseUrl);\r\n    },\r\n    on(eventName, cb) {\r\n      socket.on(eventName, cb);\r\n    },\r\n    off(eventName, cb) {\r\n      socket.off(eventName, cb);\r\n    },\r\n    emit(eventName, data) {\r\n\r\n      console.log('socketservice:',eventName, 'Data', data);\r\n      socket.emit(eventName, data);\r\n    },\r\n    terminate() {\r\n      socket = null;\r\n    }\r\n  }\r\n  return socketService;\r\n}\r\n\r\nfunction createDummySocketService() {\r\n  var listenersMap = {}\r\n  const socketService = {\r\n    setup() {\r\n      listenersMap = {}\r\n      window.listenersMap = listenersMap;\r\n    },\r\n    terminate() {\r\n      listenersMap = {}\r\n    },\r\n    on(eventName, cb) {\r\n      listenersMap[eventName] = [...(listenersMap[eventName]) || [], cb]\r\n    },\r\n    off(eventName, cb) {\r\n      listenersMap[eventName] = listenersMap[eventName].filter(l => l !== cb)\r\n    },\r\n    emit(eventName, data) {\r\n      if (!listenersMap[eventName]) return;\r\n      listenersMap[eventName].forEach(listener => {\r\n        listener(data)\r\n      });\r\n    },\r\n    debugMsg() {\r\n      this.emit('chat addMsg', {from: 'Someone', txt: 'Aha it worked!'})\r\n    },\r\n  }\r\n  return socketService;\r\n}\r\n\r\n\r\n// Basic Tests\r\n// function cb(x) {console.log(x)}\r\n// socketService.on('baba', cb)\r\n// socketService.emit('baba', 'DATA')\r\n// socketService.off('baba', cb)\r\n","import httpService from './httpService.js'\r\nconst BASE_URL = '/chat'\r\n\r\n\r\nexport const chatService = {\r\n    query,\r\n    getById,\r\n    save,\r\n    remove\r\n}\r\n\r\nasync function query(filterBy={}, filterName) {\r\n    if (filterBy) {\r\n        const queryStr = (filterBy) ? `?${filterName}=${filterBy}` : '';\r\n        const res = await httpService.get(`${BASE_URL}${queryStr}`, {\r\n            params: filterBy\r\n        });\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function getById(id) {    \r\n    const res = await httpService.get(`${BASE_URL}/${id}`);\r\n    return res;\r\n}\r\n\r\nasync function save(chat) {\r\n    if (chat._id) {\r\n        chat.updatedAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.put(`${BASE_URL}/${chat._id}`, chat)\r\n        return res;\r\n\r\n    } else {\r\n        chat.createdAt = new Date(Date.now()).toLocaleString();\r\n        const res = await httpService.post(`${BASE_URL}`, chat)\r\n        return res;\r\n    }\r\n}\r\n\r\nasync function remove(chatId) {\r\n    await httpService.delete(`${BASE_URL}/${chatId}`)\r\n}\r\n\r\n\r\nfunction _makeId(length = 6) {\r\n    var txt = '';\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    for (var i = 0; i < length; i++) {\r\n        txt += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return txt;\r\n}\r\n","import { chatService } from \"../../services/chatService.js\"\r\n\r\nexport function loadChats(filterBy, filterName) {\r\n    return async dispatch => {\r\n        const chats = await chatService.query(filterBy, filterName);\r\n        dispatch({ type: 'LOAD_CHATS', chats });\r\n    }\r\n}\r\n\r\nexport function getChatById(chatId) {\r\n    console.log('chatId',chatId);\r\n    return async dispatch => {\r\n        try {\r\n            const chat = await chatService.getById(chatId);\r\n            dispatch({ type: 'GET_CHAT', chat });\r\n        } catch (err) {\r\n            console.log('UserActions: err in loadUsers', err);\r\n        }  \r\n    }\r\n}\r\n\r\nexport function saveChat(chat) {\r\n    return async dispatch => {\r\n        const chatToSave = await chatService.save(chat);\r\n        if (chat._id) dispatch({ type: 'EDIT_CHAT', chatToSave });\r\n        else dispatch({ type: 'ADD_CHAT', chatToSave });\r\n    }\r\n}\r\n\r\nexport function removeChat(chatId) {\r\n    return async dispatch => {\r\n       await chatService.remove(chatId);\r\n       dispatch({ type: 'REMOVE_CHAT', chatId })\r\n    }\r\n}\r\n\r\nexport function setFilter(filterBy){\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filterBy })\r\n    }\r\n}\r\n","\r\nimport React, { Component } from 'react'\r\nimport socketService from '../services/socketService'\r\nimport { connect } from 'react-redux';\r\nimport { loadPets } from '../store/actions/petActions.js';\r\nimport { loadChats, saveChat, getChatById } from '../store/actions/chatActions.js';\r\nimport { updateUser } from '../store/actions/userActions.js';\r\nimport userService from '../services/userService.js'\r\nimport { shopService } from '../services/shopService.js'\r\nimport { chatService } from '../services/chatService.js'\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nimport { faTimes, faPaperPlane } from '@fortawesome/free-solid-svg-icons'\r\n\r\n\r\nclass _Chat extends Component {\r\n\r\n    state = {\r\n        chat: {\r\n            topic: '',\r\n            initiate: {\r\n                _id: '',\r\n                fullName: ''\r\n            },\r\n            target: {\r\n                _id: '',\r\n                fullName: ''\r\n            },\r\n            msgs: []\r\n        },\r\n        msg: {\r\n            senderId: '',\r\n            from: '',\r\n            createdAt: '',\r\n            txt: ''\r\n        },\r\n        target: '',\r\n    }\r\n\r\n    async componentDidMount() {\r\n\r\n        if(this.props.chatId)console.log('got chat id:',this.props.chatId);\r\n\r\n\r\n        var initiate = this.props.loggedInUser;\r\n        console.log('logedIn', initiate);\r\n        var target = await userService.getById(this.props.targetId);\r\n        this.setState({ target })\r\n        this.setChat(this.props.loggedInUser);\r\n    }\r\n\r\n    setChat = async (user) => {\r\n        let userChat = null;\r\n        if (user.chats && user.chats.length > 0) {\r\n            console.log('userchats', user.chats, 'of user', user);\r\n            userChat = [...user.chats].find(chat => {\r\n                console.log('IN USER CHAT', chat);\r\n                return chat.topic === `${this.props.loggedInUser._id}__${this.props.targetId}`\r\n                    || chat.topic === `${this.props.targetId}__${this.props.loggedInUser._id}`;\r\n            })\r\n        }\r\n        console.log('userChat', userChat);\r\n        if (userChat) {\r\n            await this.props.getChatById(userChat._id)\r\n            await this.setState({ chat: { ...this.props.currChat } })\r\n        }\r\n        else {\r\n            await this.createChat(this.props.loggedInUser, this.state.target);\r\n        }\r\n\r\n        socketService.setup();\r\n        socketService.emit('chat topic', this.state.chat.topic);\r\n        socketService.on('chat addMsg', this.addMsg);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socketService.off('chat addMsg', this.addMsg);\r\n        socketService.terminate();\r\n    }\r\n\r\n    createChat = async (initiate, target) => {\r\n        const chat = {\r\n            topic: `${initiate._id}__${target._id}`,\r\n            initiate: {\r\n                _id: initiate._id,\r\n                fullName: initiate.fullName\r\n            },\r\n            target: {\r\n                _id: target._id,\r\n                fullName: target.fullName\r\n            }, msgs: []\r\n        }\r\n        await this.props.saveChat(chat);\r\n\r\n        const users = [initiate, target];\r\n        users.forEach(async user => {\r\n            if (!user.chats) {\r\n                user.chats = [];\r\n            }\r\n\r\n            if (this.props.currChat._id) {\r\n                const chatToAdd = {\r\n                    _id: this.props.currChat._id,\r\n                    topic: this.props.currChat.topic,\r\n                    role: (user._id === this.props.loggedInUser) ? 'initiate' : 'target'\r\n                };\r\n                user.chats.push(chatToAdd);\r\n            }\r\n            await this.props.updateUser(user);\r\n            await this.setState({ chat: { ...this.props.currChat } });\r\n        })\r\n    }\r\n\r\n    addMsg = async newMsg => {\r\n        await this.setState({\r\n            chat: {\r\n                ...this.state.chat,\r\n                msgs: [...this.state.chat.msgs, newMsg]\r\n            }\r\n        });\r\n        this.props.saveChat(this.state.chat);\r\n        this.props.updateUser(this.props.loggedInUser);\r\n    }\r\n\r\n    sendMsg = async (ev) => {\r\n        ev.preventDefault();\r\n        const msg = {\r\n            senderId: this.props.loggedInUser._id,\r\n            from: this.props.loggedInUser.fullName,\r\n            createdAt: new Date(),\r\n            txt: this.state.msg.txt\r\n        }\r\n        await this.setState({ msg: { ...msg } });\r\n        this.addMsg(this.state.msg);\r\n        socketService.emit('chat addMsg', this.state.msg);\r\n        this.setState({ msg: { senderId: '', from: '', createdAt: '', txt: '' } });\r\n    }\r\n\r\n    msgHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => {\r\n            return {\r\n                msg: {\r\n                    ...prevState.msg,\r\n                    [name]: value\r\n                }\r\n            };\r\n        });\r\n    }\r\n\r\n    onClose = () => {\r\n        this.props.onClose();\r\n    }\r\n\r\n    displayMsg = (msg, idx) => {\r\n        console.log(msg);\r\n        let classTxt = 'message-row ';\r\n        const time=new Date(msg.createdAt);\r\n        const isSender=msg.senderId === this.props.loggedInUser._id;\r\n        classTxt += isSender ? 'sender' : 'recipient';\r\n        return (\r\n            <div className={classTxt} key={idx}>\r\n                {!isSender && <img src={this.state.recipient.imgUrl} alt=\"\"/>}\r\n                <div className=\"message-content\">\r\n                    <div className=\"txt\">{msg.txt}</div>\r\n                    <div className=\"date\" >{time.getHours()+':'+time.getMinutes()}</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"chat-container\">\r\n                <section className=\"chat-title flex space-evenly\">\r\n                    <span>{this.state.recipient.fullName}</span>\r\n                    <button className=\"btn-close btn\" onClick={this.onClose}><FontAwesomeIcon className=\"close-icon\" icon={faTimes} /></button>\r\n                </section>\r\n                <section className=\"msgs-container\">\r\n                    {this.state.chat.msgs && this.state.chat.msgs.slice(0).reverse().map((msg, idx) => (\r\n                        this.displayMsg(msg, idx))\r\n                    )}\r\n                </section>\r\n                <form onSubmit={this.sendMsg}>\r\n                    <section className=\"input-container flex space-around\">\r\n                        <input\r\n                            type=\"text\"\r\n                            value={this.state.msg.txt}\r\n                            onChange={this.msgHandleChange}\r\n                            name=\"txt\"\r\n                            autoComplete=\"off\"\r\n                            placeholder=\"Type Message Here\"\r\n                        />\r\n                        <button className=\"btn-send\"><FontAwesomeIcon className=\"send-icon\" icon={faPaperPlane} /></button>\r\n                    </section>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        chats: state.chatReducer.chats,\r\n        currChat: state.chatReducer.currChat,\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    loadChats,\r\n    saveChat,\r\n    getChatById,\r\n    updateUser\r\n}\r\n\r\nexport const Chat = connect(mapStateToProps, mapDispatchToProps)(_Chat)","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { shopService } from '../services/shopService.js';\r\nimport { loadPets, savePet, removePet } from '../store/actions/petActions.js';\r\nimport { saveOrder } from '../store/actions/orderActions.js';\r\nimport { Chat } from '../cmps/Chat.jsx'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHeart } from '@fortawesome/free-solid-svg-icons'\r\nimport { Link } from 'react-router-dom';\r\nimport { faStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { faCalendarAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { faExpandArrowsAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { faVenusMars } from '@fortawesome/free-solid-svg-icons'\r\nimport { faAlignLeft } from '@fortawesome/free-solid-svg-icons'\r\nimport { TextField } from '@material-ui/core';\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport { WhatsappShareButton, WhatsappIcon, FacebookShareButton, FacebookIcon, TwitterShareButton, TwitterIcon } from 'react-share'\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass _PetDetails extends Component {\r\n\r\n    state = {\r\n        pet: {},\r\n        isChatOn: false,\r\n        isOwnerOfPet: false,\r\n        adoptButton: 'Adopt',\r\n        currComment: ''\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.getComponentData();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n    async getComponentData() {\r\n        await this.getCurrPet();\r\n        await this.getUserId();\r\n        await this.isOwnerOfPet();\r\n    }\r\n\r\n    getCurrPet = async () => {\r\n        await this.props.loadPets();\r\n        const petId = this.props.match.params.id\r\n        const petToShow = this.props.pets.find(pet => pet._id === petId)\r\n        this.setState({ pet: { ...petToShow } });\r\n    }\r\n\r\n    isOwnerOfPet = async () => {\r\n        const { loggedInUser } = this.props\r\n        const pet = this.state.pet\r\n        if (loggedInUser && pet.shop) {\r\n            const shopId = pet.shop._id\r\n            const shop = await shopService.getById(shopId)\r\n            this.setState({ isOwnerOfPet: loggedInUser._id === shop.owner._id })\r\n        }\r\n    }\r\n\r\n    onAdopt = async () => {\r\n        const { loggedInUser } = this.props\r\n        if (loggedInUser.isGuest) return\r\n\r\n        const pet = this.state.pet\r\n        const shopId = pet.shop._id\r\n        const shop = await shopService.getById(shopId)\r\n        const order = {\r\n            msg: \"Hi, I saw your lovely pet and really wish to adopt it!\",\r\n            buyer: {\r\n                _id: loggedInUser._id,\r\n                fullName: loggedInUser.fullName,\r\n                imgUrl: loggedInUser.imgUrl\r\n            },\r\n            shop: {\r\n                _id: shop._id,\r\n                name: shop.name,\r\n                type: shop.type,\r\n                imgUrl: shop.imgUrl\r\n            },\r\n            pet: {\r\n                _id: pet._id,\r\n                name: pet.name,\r\n            },\r\n            status: \"Pending\",\r\n        }\r\n        this.props.saveOrder(order)\r\n        this.setState({ adoptButton: 'Request Sent' })\r\n    }\r\n\r\n    onRemovePet = (petId) => {\r\n        console.log('petId', petId);\r\n        // this.props.removePet(petId)\r\n    }\r\n\r\n\r\n    onToggleChat = () => {\r\n        this.setState({ isChatOn: !this.state.isChatOn })\r\n    }\r\n\r\n    onUpdateReaction = (reaction) => {\r\n        const pet = this.state.pet;\r\n        pet.reacts.map(react => {\r\n            if (react.type === reaction) react.count++\r\n            return react\r\n        })\r\n        this.props.savePet(pet)\r\n        this.getCurrPet()\r\n    }\r\n\r\n    handleCommentInput = ({ target }) => {\r\n        const value = target.value;\r\n        this.setState({ currComment: value })\r\n    }\r\n\r\n    onComment = async () => {\r\n        const pet = this.state.pet;\r\n        const user = this.props.loggedInUser\r\n        const comment = {\r\n            id: `c${100 + pet.comments.length + 1}`,\r\n            txt: this.state.currComment,\r\n            by: {\r\n                id: user._id,\r\n                fullName: user.fullName,\r\n                imgUrl: user.imgUrl\r\n            },\r\n        }\r\n\r\n        pet.comments.unshift(comment);\r\n        await this.props.savePet(pet);\r\n        this.getComponentData();\r\n        this.setState({ cuurComment: '' })\r\n    }\r\n\r\n    getTimeToString = () => {\r\n        var time = new Date();\r\n        var dd = String(time.getDate()).padStart(2, '0');\r\n        var mm = String(time.getMonth() + 1).padStart(2, '0');\r\n        var yyyy = time.getFullYear();\r\n\r\n        time = mm + '/' + dd + '/' + yyyy;\r\n        return time\r\n    }\r\n\r\n    getUserId = async _ => {\r\n        console.log(this.state.pet);\r\n        const shop = await shopService.getById(this.state.pet.shop._id);\r\n        const ownerId = await shop.owner._id;\r\n        this.setState({ ownerId })\r\n    }\r\n\r\n    render() {\r\n        const pet = this.state.pet;\r\n        const loggedInUser = this.props.loggedInUser\r\n\r\n        if (!pet) return <h1>Loading...</h1>\r\n        return (\r\n            <section className=\"pet-details-main-container\">\r\n                <div className=\"pet-details-box\">\r\n                    <div className=\"pet-details-header\">\r\n                        <h2 className=\"pet-details-heading\">{pet.name}</h2>\r\n                        <div className=\"share-box\">\r\n                            {/* <h4 className=\"share-heading\">Share {pet.name} With Your Friends</h4> */}\r\n                            <FacebookShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}\r\n                                hashtag=\"#Friendly\">\r\n                                <FacebookIcon size={30} />\r\n                            </FacebookShareButton>\r\n                            <WhatsappShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}>\r\n                                <WhatsappIcon size={30} />\r\n                            </WhatsappShareButton>\r\n                            <TwitterShareButton\r\n                                url={\"http://www.camperstribe.com\"}\r\n                                quote={\"See this cute pet I saw on Friendly\"}>\r\n                                <TwitterIcon size={30} />\r\n                            </TwitterShareButton>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"pet-details-img-box\">\r\n                        {\r\n                            (pet.imgUrls) ?\r\n                                pet.imgUrls.map((imgUrl, index) => {\r\n                                    return <img className={`pet-details-img-${index}`} src={imgUrl} />\r\n                                })\r\n                                : ''\r\n                        }\r\n                    </div>\r\n                    <div>\r\n                        <ul className=\"reactions-list\">\r\n                            {\r\n                                (pet.reacts) ?\r\n                                    pet.reacts.map(react => {\r\n                                        if (react.type === 'love') {\r\n                                            return <li className=\"react-count\"><FontAwesomeIcon onClick={() => { this.onUpdateReaction('love') }}\r\n                                                className=\"heart-icon\" icon={faHeart} /> {`${react.count}`}</li>\r\n                                        }\r\n                                        // else if ((react.type === 'feed')) return <li><FontAwesomeIcon onClick={() => { this.onUpdateReaction('feed') }}\r\n                                        //     className=\"bone-icon\" icon={faBone} /> ({`${react.count}`})</li>\r\n                                        // else if ((react.type === 'pet')) return <li><FontAwesomeIcon onClick={() => { this.onUpdateReaction('pet') }}\r\n                                        //     className=\"hand-sparkles-icon\" icon={faHandSparkles} /> ({`${react.count}`})</li>\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"shop-and-pet-info\">\r\n\r\n\r\n                        <div className=\"pet-info\">\r\n                            <div className=\"pet-info-up\">\r\n                                <div className=\"age info-box\">\r\n                                    <FontAwesomeIcon className=\"age-icon info-icon\" icon={faCalendarAlt} />\r\n\r\n                                    <p><span>Age: </span>\r\n                                        {`${parseFloat((Date.now() - new Date(pet.bDate)) / (1000 * 60 * 60 * 24 * 30 * 12)).toFixed(1)}`}\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"size info-box\">\r\n                                    <FontAwesomeIcon className=\"size-icon info-icon\" icon={faExpandArrowsAlt} />\r\n                                    <p><span>Size:</span> {pet.size}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"pet-info-down \">\r\n                                <FontAwesomeIcon className=\"gender-icon info-icon\" icon={faVenusMars} />\r\n                                <div className=\"gender info-box\">\r\n\r\n                                    <p><span>Gender:</span> {pet.gender}</p>\r\n                                </div>\r\n                                <div className=\"breed info-box\">\r\n                                    <FontAwesomeIcon className=\"breed-icon info-icon\" icon={faAlignLeft} />\r\n                                    <p><span>Breed:</span> {pet.breed}</p>\r\n                                </div>\r\n                            </div>\r\n                            {/* <h4> {pet.summary}</h4> */}\r\n                        </div>\r\n\r\n\r\n\r\n                        <div className=\"shop-details\">\r\n                            <div className=\"shop-details-up\">\r\n                                {pet.shop && <img className=\"shop-img\" src={`${pet.shop.imgUrl}`} alt=\"\" />}\r\n                                {pet.shop && <Link to={`/shop/${pet.shop._id}`}><p>{pet.shop.fullName}</p></Link>}\r\n                            </div>\r\n                            <div className=\"shop-details-bottom\">\r\n                                <div className=\"shop-rate-box\">\r\n                                    <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                                    {pet.shop && <p className=\"shop-rate-rating\">{pet.shop.rate.rating}  </p>}\r\n                                    {pet.shop && <p className=\"shop-rate-count\">({pet.shop.rate.count})  </p>}\r\n                                </div>\r\n                                {pet.shop && <button onClick={this.onToggleChat}>Message {pet.shop.fullName}</button>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"tags-and-adopt-btn-box\">\r\n\r\n                        <div className=\"tags-list-box\">\r\n                            <ul className=\"tags-list\">\r\n                                {\r\n                                    (pet.tags) ?\r\n                                        pet.tags.map(tag => {\r\n                                            return <li> {tag} </li>\r\n                                        })\r\n                                        : ''\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n\r\n                        <button onClick={this.onAdopt} className=\"adoption-btn\">Adopt</button>\r\n\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"description-box\">\r\n                        <p>{pet.description}</p>\r\n                    </div>\r\n                    <hr />\r\n                    <div className=\"comments-box\">\r\n                        <div className=\"comment-input-box\">\r\n                            <TextField name=\"txt\" fullWidth=\"true\" value={this.state.currComment} placeholder=\"Add Comment Here\" onChange={this.handleCommentInput} />\r\n\r\n                            <button className=\"add-comment-btn\" onClick={this.onComment}>Add</button>\r\n                        </div>\r\n                        <ul className=\"comment-list\">\r\n                            {\r\n                                (pet.comments) ?\r\n                                    pet.comments.map(comment => {\r\n                                        return <li className=\"single-comment-box\">\r\n                                            <div className=\"flex comment-box\">\r\n                                                {(comment.by.imgUrl) ? <img src={comment.by.imgUrl} alt=\"\" /> : \"\"}\r\n\r\n                                                {(comment.by.id === 'guest') ? <img src={\"https://images.macrumors.com/t/x_zUFqghBUNBxVUZN_dYoKF3D9g=/1600x0/article-new/2019/04/guest-user-250x250.jpg\"} alt=\"\" /> : \"\"}\r\n\r\n                                                <p><span>{comment.by.fullName}:</span> </p>\r\n                                                <p><span>{comment.createdAt}</span> </p>\r\n                                                <p>{comment.txt} </p>\r\n                                            </div>\r\n                                        </li>\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"actions-box\">\r\n                    {\r\n                        this.state.isOwnerOfPet ?\r\n                            <div className=\"actions-box-edit\">\r\n                                <Link to={`/edit/${pet._id}`}><button onClick={this.onGoToEdit} className=\"edit-btn\">Edit Pet</button></Link>\r\n                                <button onClick={() => { this.onRemovePet(pet._id) }} className=\"remove-btn\">Delete Pet</button>\r\n                            </div>\r\n                            :\r\n                            <div className=\"actions-box-adopt\">\r\n                                <h3>Reasons To Adopt</h3>\r\n                                <p>You save a life. </p>\r\n                                <p>You adopt a pet, and find a friend.</p>\r\n                                <p>You help stop cruelty in mass breeding facilities.</p>\r\n                                <button onClick={this.onAdopt} className=\"adopt-btn\">{this.state.adoptButton}</button>\r\n                            </div>\r\n\r\n                    }\r\n\r\n\r\n                </div> */}\r\n                {this.state.isChatOn && < Chat  targetId={this.state.ownerId}\r\n                    onClose={this.onToggleChat} />}\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadPets,\r\n    savePet,\r\n    saveOrder,\r\n    removePet\r\n\r\n}\r\n\r\n\r\nexport const PetDetails = connect(mapStateToProps, mapDispatchToProps)(_PetDetails)","import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\n\r\nexport function OrderPreview({ order, onSave, onRemove, isShop, loggedInUser }) {\r\n\r\n    function orderClass() {\r\n        let orderClass;\r\n        if (order.status === 'accepted') orderClass = 'accepted';\r\n        else if (order.status === 'denied') orderClass = 'denied';\r\n        else orderClass = 'pending';\r\n        return orderClass;\r\n    }\r\n\r\n\r\n\r\n    if (!order) return <h3 style={{ display: 'none' }}>loading...</h3>\r\n    // <img className=\"order-loading\" src={require('../assets/img/loading.gif')} />\r\n    return (\r\n        <div className={`order-preview ${orderClass()}`}>\r\n            {\r\n                isShop && <div className=\"order-preview-details\">\r\n                    <Link to={`/profile/${order.buyer._id}`}>  <p>{order.buyer.fullName} <span>Wants to Adopt</span> {order.pet.name} </p></Link>\r\n                    {/* <p><span>Wants to Adopt</span> {order.pet.name} </p> */}\r\n                </div>\r\n\r\n            }\r\n\r\n            {!isShop && loggedInUser._id === order.buyer._id &&\r\n                <div>\r\n                    <Link to={`/shop/${order.shop._id}`}>\r\n                        {<p> <span>Request to adopt </span> {order.pet.name}\r\n                            <span> from:</span> {order.shop.name} {order.shop.type} </p>}\r\n                    </Link>\r\n                </div>\r\n            }\r\n\r\n            <div className=\"order-actions-btns-box\">\r\n                {isShop && <button className=\"accept-order-btn order-btn\" onClick={() => { onSave(order, 'accepted') }}>Accept</button>}\r\n                {isShop && <button className=\"pending-order-btn order-btn\" onClick={() => { onSave(order, 'pending') }}>Pending</button>}\r\n                {isShop && <button className=\"reject-order-btn order-btn\" onClick={() => { onSave(order, 'denied') }}>Reject</button>}\r\n                {(isShop || (!isShop && loggedInUser._id === order.buyer._id)) &&\r\n                    <button className=\"remove-order-btn order-btn\" onClick={() => { onRemove(order._id) }}>Remove</button>}\r\n            </div>\r\n        </div >\r\n    )\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { OrderPreview } from './OrderPreview'\r\nimport { withRouter } from 'react-router-dom'\r\nimport {\r\n    loadOrders,\r\n    saveOrder,\r\n    removeOrder,\r\n    setFilter\r\n} from '../store/actions/orderActions';\r\nimport { savePet } from '../store/actions/petActions';\r\n\r\n\r\n\r\nclass _OrderList extends Component {\r\n\r\n    state = {\r\n        msgDivClass: 'hidden'\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.loadOrders(this.props.filterById, this.props.orderFilterName);\r\n    }\r\n\r\n    changePetAdoptionStatus = async (order) => {\r\n        const pet = this.props.pets.find(pet => pet._id === order.pet._id)\r\n        pet.isAdopted = true\r\n        this.props.savePet(pet)\r\n        this.props.history.push('/pet')\r\n    }\r\n\r\n    onSave = async (order, status) => {\r\n        const isAcceptedStat = this.props.orders.find(orderCheck => {\r\n            return (orderCheck.status === 'accepted' && orderCheck.pet._id === order.pet._id)\r\n        })\r\n\r\n        if (isAcceptedStat && status === 'accepted') {\r\n            this.setState({ msgDivClass: '' })\r\n            setTimeout(() => { this.setState({ msgDivClass: 'hidden' }) }, 1500);\r\n        } else {\r\n            order.status = status;\r\n            await this.props.saveOrder(order);\r\n            this.props.loadOrders(this.props.filterById, this.props.orderFilterName);\r\n            if (status === 'accepted') {\r\n                this.changePetAdoptionStatus(order)\r\n            }\r\n        }\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removeOrder(id);\r\n    }\r\n\r\n    render() {\r\n        const orders = this.props.orders;\r\n        return (!orders) ? <h1>LOADING...</h1> :\r\n            (\r\n                <div className=\"order-list flex column\" >\r\n\r\n                    <div className={`doubleAccept ${this.state.msgDivClass}`}>Only one approval please.</div>\r\n                    {orders.map(order =>\r\n                        <OrderPreview isShop={this.props.isShop} order={order} loggedInUser={this.props.loggedInUser}\r\n                            onRemove={this.onRemove} onSave={this.onSave} />)}\r\n                </div>\r\n            )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        pets: state.petReducer.pets,\r\n        orders: state.orderReducer.orders,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadOrders,\r\n    saveOrder,\r\n    removeOrder,\r\n    setFilter,\r\n    savePet\r\n}\r\n\r\nexport const OrderList = withRouter(connect(mapStateToProps, mapDispatchToProps)(_OrderList))\r\n// export const NavBar = withRouter(connect(mapStateToProps, mapDispatchToProps)(_NavBar))","import React from 'react'\r\nimport { GoogleApiWrapper, Map, Marker, InfoWindow } from 'google-maps-react';\r\n\r\n\r\nclass _GoogleMap extends React.Component {\r\n\r\n    state = {\r\n        lat: 32.0853,\r\n        lng: 34.7818,\r\n        zoom: 16,\r\n        loc: 'Info Window'\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState(\r\n            {\r\n                lat: this.props.lat,\r\n                lng: this.props.lng,\r\n                zoom: 14,\r\n                loc: this.props.name\r\n            }\r\n        )\r\n    }\r\n\r\n    onMarkerClick = (props, marker, event) => {\r\n    }\r\n\r\n    onMapClicked = (mapProps, map, ev) => {\r\n        this.setState({ lat: ev.latLng.lat(), lng: ev.latLng.lng() })\r\n    }\r\n\r\n    onMapPassLoc = () => {\r\n        this.state({ lat: this.props.lat, lng: this.props.lng })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Map className=\"map\" initialCenter={this.state} center={this.state} onClick={this.onMapClicked}\r\n                google={this.props.google} zoom={this.state.zoom} className=\"map\" >\r\n\r\n                <Marker position={this.state}\r\n                    name={'Current location'} />\r\n\r\n                <InfoWindow position={this.state} visible={true}  >\r\n                    <div>\r\n                        <h4>{this.state.loc}</h4>\r\n                    </div>\r\n                </InfoWindow>\r\n            </Map>\r\n        );\r\n    }\r\n}\r\n\r\nexport const GoogleMap = GoogleApiWrapper({\r\n    apiKey: ('AIzaSyA7wFxeGayDFtxLfft53sDr7sMu9cj7Vio')\r\n})(_GoogleMap)","\r\nimport React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { PetList } from '../cmps/PetList';\r\nimport { OrderList } from '../cmps/OrderList';\r\nimport { getShopById, saveShop } from '../store/actions/shopActions.js';\r\nimport { savePet, loadPets } from '../store/actions/petActions.js'\r\nimport { GoogleMap } from '../cmps/GoogleMap';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faAngleDoubleUp, faEnvelope, faFemale, faMobileAlt, faStar } from '@fortawesome/free-solid-svg-icons'\r\nimport { animateScroll as scroll } from \"react-scroll\";\r\nimport userService from '../services/userService.js';\r\n\r\n\r\nclass _ShopDetails extends Component {\r\n\r\n    state = {\r\n        shop: {},\r\n        shopPets: [],\r\n        shopOwner: '',\r\n        isOpenReviews: false,\r\n        currReview: {\r\n            txt: '',\r\n            rate: ''\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        await this.loadShopData();\r\n        scroll.scrollToTop();\r\n    }\r\n\r\n    loadShopData = async () => {\r\n        const shopId = this.props.match.params.id;\r\n        await this.props.loadPets();\r\n        await this.props.getShopById(shopId);\r\n        this.setState({ shop: { ...this.props.currShop } });\r\n        const owner = await userService.getById(this.props.currShop.owner._id);\r\n        console.log('owner from DB', owner);\r\n\r\n        await this.setState({ shopOwner: { ...owner } });\r\n        const shopPets = this.props.pets.filter(pet => {\r\n            if (pet.shop) return pet.shop._id === this.state.shop._id\r\n\r\n        })\r\n        await this.setState({\r\n            shopPets: [...shopPets]\r\n        })\r\n    }\r\n\r\n    onRemove = (id) => {\r\n        this.props.removePet(id)\r\n    }\r\n\r\n    onEdit = () => {\r\n        console.log('edit');\r\n    }\r\n\r\n    handleInput = ({ target }) => {\r\n        const field = target.name;\r\n        const value = target.value;\r\n        this.setState(prevState => {\r\n            return {\r\n                ...prevState,\r\n                currReview: {\r\n                    ...prevState.currReview,\r\n                    [field]: value\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    onAddReview = async (ev) => {\r\n        ev.preventDefault();\r\n        const shop = { ...this.state.shop };\r\n        const review = { ...this.state.currReview };\r\n        review.id = `r${100 + shop.reviews.length + 1}`\r\n        const user = this.props.loggedInUser;\r\n        review.by = {\r\n            _id: user._id,\r\n            fullName: user.fullName,\r\n            imgUrl: user.imgUrl\r\n        }\r\n        console.log('review', review);\r\n        shop.reviews.push(review);\r\n        await this.props.saveShop(shop);\r\n        this.loadShopData();\r\n    }\r\n\r\n    onToggleReviewModal = () => {\r\n        this.setState(\r\n            {\r\n                ...this.state,\r\n                isOpenReviews: !this.state.isOpenReviews\r\n            }\r\n        )\r\n    }\r\n\r\n\r\n    drawStars = (rate) => {\r\n        var stars = '';\r\n        for (var i = 0; i < rate; i++) {\r\n            stars = stars + ''\r\n        }\r\n        return stars;\r\n    }\r\n\r\n    render() {\r\n        const shop = this.state.shop;\r\n        const isUserOwner = (Object.keys(this.state.shop).length > 0\r\n            && this.props.loggedInUser._id === this.props.currShop.owner._id)\r\n        // console.log('chats in shop ccc', this.props.loggedInUser.chats);\r\n\r\n        return (\r\n            <section>\r\n                {(!shop.owner || !shop.location || !shop.reviews) ? <h1>LOADING Shop....</h1> :\r\n\r\n                    <div className=\"shop-details-main-box\">\r\n                        <div className=\"shop-details-header\">\r\n                            <h2 className=\"shop-details-heading\">{shop.name}</h2>\r\n                            <div className=\"shop-rate-box\">\r\n                                <FontAwesomeIcon className=\"star-icon\" icon={faStar} />\r\n                                {shop && <p className=\"shop-rate-rating\">{shop.rate.rating}  </p>}\r\n                                {shop && <p className=\"shop-rate-count\">({shop.rate.count})  </p>}\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"shop-details-img-box\">\r\n                            {\r\n                                (shop.imgUrls) ?\r\n                                    shop.imgUrls.map((imgUrl, index) => {\r\n                                        return <img className={`shop-details-img-${index}`} src={imgUrl} />\r\n                                    })\r\n                                    : ''\r\n                            }\r\n                        </div>\r\n                        <div className=\"top-screen-box\">\r\n                            <div className=\"shop-details-section\">\r\n\r\n                                <img className=\"shop-owner-img\" src={shop.owner.imgUrl} />\r\n\r\n                                <div className=\"contact-box\">\r\n                                    <FontAwesomeIcon className=\"contact-icon\" icon={faFemale} />\r\n                                    <p>{shop.owner.fullName}</p>\r\n                                </div>\r\n\r\n                                <div className=\"contact-box\">\r\n                                    <FontAwesomeIcon className=\"contact-icon\" icon={faMobileAlt} />\r\n                                    <p>{shop.owner.contact.phone}</p>\r\n                                </div>\r\n\r\n                                <div className=\"contact-box\">\r\n                                    <FontAwesomeIcon className=\"contact-icon\" icon={faEnvelope} />\r\n                                    <p>{shop.owner.contact.email}</p>\r\n                                </div>\r\n\r\n\r\n                                < div className=\"shop-description\">\r\n                                    <p>{shop.desc}</p>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"order-list-box\">\r\n                                {this.state.shop.owner._id === this.props.loggedInUser._id &&\r\n                                    <OrderList isShop={true} orderFilterName={\"shop._id\"} filterById={this.state.shop._id} />}\r\n                            </div>\r\n\r\n\r\n                        </div>\r\n                        <div className=\"bottom-screen-box\">\r\n\r\n                            <div className=\"reviews-box\">\r\n                                <h3>What they say about us</h3>\r\n                                <button className=\"open-reviews-btn\" onClick={this.onToggleReviewModal}>\r\n                                    {(!this.state.isOpenReviews) ? 'Tell Us What You Think' : `Close review form`}\r\n                                </button>\r\n                                <div className={(this.state.isOpenReviews) ? `review-modal` : `hidden`}>\r\n                                    <form className=\"review-form\">\r\n                                        <div className=\"flex column\">\r\n                                            <TextField\r\n                                                id=\"standard-textarea\"\r\n                                                label=\"Shelter/Owner Review:\"\r\n                                                placeholder=\"write your review:\"\r\n                                                multiline\r\n                                                name=\"txt\"\r\n                                                onChange={this.handleInput}\r\n                                            />\r\n                                            <FormControl>\r\n                                                <InputLabel htmlFor=\"rate\">Please add your rate:</InputLabel>\r\n                                                <Select\r\n                                                    native\r\n                                                    onChange={this.handleInput}\r\n                                                    inputProps={{\r\n                                                        name: \"rate\",\r\n                                                    }}>\r\n                                                    <option aria-label=\"None\" value=\"\" />\r\n                                                    <option value=\"5\">5</option>\r\n                                                    <option value=\"4\">4</option>\r\n                                                    <option value=\"3\">3</option>\r\n                                                    <option value=\"2\">2</option>\r\n                                                    <option value=\"1\">1</option>\r\n                                                </Select>\r\n                                            </FormControl>\r\n                                        </div>\r\n                                        <button className=\"add-review-btn\" onClick={this.onAddReview}>Publish</button>\r\n                                    </form>\r\n                                </div>\r\n                                {(!shop.reviews) ? <h1>Loading Reviews...</h1> :\r\n                                    <ul className=\"reviews-list\">\r\n                                        {shop.reviews.map(review => {\r\n                                            return <li className=\"review\">\r\n                                                <p className=\"review-text\">{review.txt}</p>\r\n                                                <p><span>Rate: </span>{this.drawStars(review.rate)}</p>\r\n                                                <p><span>From: </span>{review.by.fullName}</p>\r\n                                            </li>\r\n                                        }\r\n\r\n                                        )}\r\n                                    </ul>}\r\n                            </div>\r\n                            <div className=\"shop-location-box\">\r\n\r\n                                <div className=\"map-container\">\r\n                                    <GoogleMap lat={shop.location.lat} lng={shop.location.lng} name={shop.location.name} />\r\n                                </div>\r\n                                <FontAwesomeIcon className=\"arrow-icon\" icon={faAngleDoubleUp} />\r\n                                <div className=\"shop-location-name\">\r\n                                    <h2>We are located at {shop.location.name}</h2>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        </div>\r\n                        <div className=\"pets-box\" >\r\n                                <h2 className=\"our-pets-heading\">Our Pets</h2>\r\n                                <PetList pets={this.state.shopPets} onRemove={this.onRemove} />\r\n                            </div>\r\n                    </div>\r\n\r\n                }\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        currShop: state.shopReducer.currShop,\r\n        pets: state.petReducer.pets,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n        currChat: state.chatReducer.currChat\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    getShopById,\r\n    saveShop,\r\n    loadPets,\r\n    savePet\r\n}\r\n\r\nexport const ShopDetails = connect(mapStateToProps, mapDispatchToProps)(_ShopDetails);","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux';\r\n\r\nimport { Button, TextField } from '@material-ui/core';\r\nimport {\r\n    loadUsers,\r\n    removeUser,\r\n    login,\r\n    logout,\r\n    signup\r\n} from '../store/actions/userActions';\r\n\r\nclass _LoginModal extends Component {\r\n\r\n    state = {\r\n        msg: '',\r\n        loginCred: {\r\n            userName: '',\r\n            password: ''\r\n        },\r\n        showModal: false\r\n    }\r\n\r\n    loginHandleChange = ev => {\r\n        const { name, value } = ev.target;\r\n        this.setState(prevState => ({\r\n            loginCred: {\r\n                ...prevState.loginCred,\r\n                [name]: value\r\n            }\r\n        }));\r\n    };\r\n\r\n    closeModal = () => {\r\n        this.props.onNavBarClick()\r\n    }\r\n\r\n    doLogin = async ev => {\r\n        ev.preventDefault();\r\n        const { userName, password } = this.state.loginCred;\r\n        if (!userName || !password) {\r\n            return this.setState({ msg: 'Please enter user/password' });\r\n        }\r\n        const userCreds = { userName, password };\r\n        this.props.login(userCreds);\r\n        this.setState({ loginCred: { userName: '', password: '' } });\r\n        this.props.onNavBarClick()\r\n\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {/* <div onClick={()=>{this.props.onNavBarClick()}} className=\"modal-screen\">heyyyyyyyy</div> */}\r\n                <div className=\"login-modal\">\r\n                    <form onSubmit={this.doLogin}>\r\n                        <TextField\r\n                            autoFocus={true}\r\n                            required={true}\r\n                            type=\"text\"\r\n                            name=\"userName\"\r\n                            value={this.state.loginCred.userName}\r\n                            onChange={this.loginHandleChange}\r\n                            placeholder=\"User Name\"\r\n                        />\r\n                        <br />\r\n                        <br />\r\n\r\n                        <TextField\r\n                            required={true}\r\n                            type=\"password\"\r\n                            name=\"password\"\r\n                            value={this.state.loginCred.password}\r\n                            onChange={this.loginHandleChange}\r\n                            placeholder=\"Password\"\r\n                        />\r\n                        <br />\r\n                        <br />\r\n\r\n                        <Button onClick={this.doLogin} variant=\"text\" variant=\"outlined\" color=\"primary\" >Login</Button>\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        users: state.userReducer.users,\r\n        // loggedInUser: state.userReducer.loggedInUser,\r\n    };\r\n};\r\nconst mapDispatchToProps = {\r\n    login,\r\n    logout,\r\n    signup,\r\n    removeUser,\r\n    loadUsers\r\n};\r\n\r\n\r\n\r\nexport const LoginModal = connect(mapStateToProps, mapDispatchToProps)(_LoginModal);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { chatService } from \"../services/chatService.js\"\r\nimport userService from '../services/userService.js';\r\nimport { getChatById } from '../store/actions/chatActions.js';\r\nimport { Chat } from './Chat.jsx';\r\n\r\n\r\nclass _ChatsList extends Component {\r\n\r\nstate={\r\n    chats:null,\r\n    imgs:{}\r\n}  \r\n \r\n async componentDidMount(){\r\n    if (this.props.loggedInUser.chats){ \r\n      \r\n        let chats=[];\r\n        let imgs;\r\n        this.props.loggedInUser.chats.forEach(async chat=>{\r\n            const fullChat = await chatService.getById(chat._id);\r\n            chats.push(fullChat);\r\n            const id = await fullChat.target._id;\r\n            const user = await userService.getById(id);\r\n            let img;\r\n            \r\n            if (user.imgUrl){\r\n                 img  =  {[fullChat.target._id]:user.imgUrl}\r\n                 await this.setState({imgs:{...this.state.imgs,img}})\r\n            }else{\r\n                const name=user.fullName.split(' ');\r\n                img = await {[fullChat.target._id]:`https://ui-avatars.com/api/?name=${name[0]}+${name[1]}`}\r\n            }\r\n            await this.setState({imgs:{...this.state.imgs,...img}})\r\n        })\r\n        await this.setState({chats})\r\n    }\r\n\r\n}\r\n\r\nasync componentDidUpdate(prevProps){\r\n\r\n    // if (prevProps!==this.props ){\r\n    //     if (this.props.loggedInUser.chats){\r\n\r\n    //         let chats=[];\r\n    //         await this.props.loggedInUser.chats.map(chat=>{\r\n    //             chats.push(chatService.getById(chat._id));\r\n    //         })\r\n    //         this.setState({chats})\r\n    \r\n    //     } \r\n    // }\r\n}\r\ngetChatUserImg = (id) => {\r\n    const images = this.state.chatImgs;\r\n    const imgForChat = images.find(img => {\r\n        return img.id === id;\r\n    })\r\n    if (imgForChat) return imgForChat.img;\r\n    return imgForChat;\r\n}\r\n\r\n// getChatImgs = async () => {\r\n//     const chats = this.state.chats;\r\n//     if (chats && chats.length > 0) {\r\n//         chats.forEach(async chat => {\r\n//             const id = chat.topic.substring(0, chat.topic.indexOf('_'));\r\n//             const user = await userService.getById(id);\r\n//             const userImg = { id: chat._id, img: user.imgUrl }\r\n//             this.setState({ chatImgs: [...this.state.chatImgs, userImg] })\r\n//         })\r\n//     }\r\n// }\r\n\r\ndisplayChatDetails= (chat)=>{\r\n       return (\r\n            <div key={chat._id}>   \r\n                <div onClick={<Chat chatId={chat._id}/>} >{chat._id}</div>\r\n            </div>\r\n        )\r\n}\r\n\r\ndoLog=(chat)=>{\r\n    return(\r\n        <div>{chat._id}</div>\r\n    )\r\n    \r\n}\r\n    render() {\r\n     \r\n        return (\r\n            <div className=\"chat-list-container\">\r\n                {(this.state.chats && this.state.chats.map(chat=>this.doLog(chat)))|| <div>No chats to load</div> }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        chats: state.chatReducer.chats,\r\n        currChat: state.chatReducer.currChat,\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    getChatById\r\n}\r\n\r\nexport const ChatsList = connect(mapStateToProps, mapDispatchToProps)(_ChatsList)\r\n\r\n\r\n{/* <div className={\"chat-box flex\"}>\r\n{(isUserOwner && this.props.loggedInUser.chats && this.props.loggedInUser.chats.length > 0) ?\r\n    this.props.loggedInUser.chats.map(chat => {\r\n        // console.log('Chat in shop', chat);\r\n        return (\r\n            <div>\r\n                <img className=\"chat-user-img\"\r\n                    src={this.getChatUserImg(chat._id)}\r\n                    alt=\"CHAT\"\r\n                    onClick={() => { this.onToggleChat(chat._id) }} />\r\n                {this.state.chatIdOn === chat._id &&\r\n                    currChat && <Chat targetId={currChat.initiate._id}\r\n                        onClose={() => { this.onToggleChat(chat._id) }} />}\r\n            </div>)\r\n    }) : \"\"}\r\n</div> */}","import React, { Component } from 'react'\r\nimport { NavLink, Router, withRouter } from 'react-router-dom'\r\nimport { LoginModal } from './LoginModal'\r\nimport { connect } from 'react-redux';\r\nimport { loadShops } from '../store/actions/shopActions'\r\nimport { logout } from '../store/actions/userActions';\r\nimport { ChatsList } from './ChatsList';\r\n\r\n\r\n\r\nclass _NavBar extends Component {\r\n\r\n    state = {\r\n        showLoginModal: false,\r\n        showChatsList:false,\r\n        shop: '',\r\n        shopId: '',\r\n        pathName: ''\r\n    }\r\n    componentDidMount() {\r\n        this.setState({pathName: this.props.history.location.pathname})\r\n        \r\n    }\r\n    componentDidUpdate = async (prevProps) => {\r\n        if (this.props.user && prevProps.user._id !== this.props.user._id) {\r\n            await this.props.loadShops()\r\n            const shops = this.props.shops\r\n            if (this.props.user) {\r\n                const { user } = this.props\r\n                const userId = user._id\r\n                const userShop = shops.find(shop => shop.owner._id === userId)\r\n                if (userShop) this.setState({ shopId: userShop._id, shop: userShop })\r\n            }\r\n        }\r\n    }\r\n\r\n    onNavBarClick = () => {\r\n        this.setState({ showLoginModal: !this.state.showLoginModal });\r\n    }\r\n\r\n    onLogOut = () => {\r\n        this.props.logout();\r\n        this.props.history.push('/');\r\n    }\r\n    onToggleChatsList=()=>{\r\n        this.setState({showChatsList:!this.state.showChatsList})\r\n      }\r\n\r\n    render() {\r\n        const { user } = this.props\r\n        console.log('LOGED IN USER IS:',user );\r\n        return (\r\n        <div>\r\n       \r\n            <div className={this.props.history.location.pathname === '/' ? 'main-nav' : 'main-nav-not-home'}>\r\n                <div className=\"left-nav\">\r\n                    <NavLink to=\"/\"><img className=\"logo-up\" src={require('../assets/img/logo.png')} alt=\"Home\" /></NavLink>\r\n                    <NavLink className=\"nav-btn\" to=\"/pet\">Gallery</NavLink>\r\n                    <NavLink className=\"nav-btn\" to=\"/about\">About Us</NavLink>\r\n                </div>\r\n                <div className=\"right-nav\">\r\n                    {user && user.isOwner && this.state.shopId && <NavLink className=\"nav-btn\" to={`/shop/${this.state.shopId}`}> <img className=\"shop-img\" src={this.state.shop.imgUrls[0]} alt=\"\"/> {this.state.shop.name}</NavLink>}\r\n\r\n                    {user && !user.isOwner && !user.isGuest && <NavLink className=\"nav-btn\" to={`/profile/${user._id}`}>{user.fullName}</NavLink>}\r\n\r\n                    {user && !user.isGuest && <button className=\"chats-btn nav - btn\" onClick={this.onToggleChatsList}>Chat</button>}\r\n\r\n                    {user && user.isGuest && <button className=\"login-btn nav-btn\" onClick={() => { this.onNavBarClick() }}>Login</button>}\r\n                    {user && !user.isGuest && <button className=\"logout-btn nav - btn\" onClick={() => { this.onLogOut() }}>Logout</button>}\r\n\r\n                    {this.state.showLoginModal && <LoginModal onNavBarClick={this.onNavBarClick} />}\r\n\r\n                    {user && user.isGuest && <NavLink className=\"nav-btn\" to=\"/signup\">Sign Up</NavLink>}\r\n                </div>\r\n            </div>\r\n                {this.state.showChatsList && <ChatsList/>}\r\n        </div>   \r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userReducer.loggedInUser,\r\n        shops: state.shopReducer.shops\r\n\r\n    };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n    loadShops,\r\n    logout\r\n}\r\n\r\n\r\nexport const NavBar = withRouter(connect(mapStateToProps, mapDispatchToProps)(_NavBar))\r\n\r\n// export const Header = withRouter(connect(mapStateToProps, mapDispatchToProps)(_Header)","import React from 'react'\r\n\r\n\r\nexport function UserData({ user }) {\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <h1>{user.fullName}</h1>\r\n            <div className=\"user-data-box\">\r\n                <img src={user.imgUrl} alt=\"\" />\r\n                <div className=\"user-profile-details flex column\">\r\n                    {user.phone && <p><span>Phone: </span>{user.phone}</p>}\r\n                    {user.email && <p><span>Email: </span>{user.email}</p>}\r\n                    {user.birthDate && <p><span>Age: </span>\r\n                        {parseInt((Date.now() - new Date(user.birthDate)) / (1000 * 60 * 60 * 24 * 30 * 12))}</p>}\r\n                    {user.familyStatus && <p><span>Family Status: </span>{user.familyStatus}</p>}\r\n                    {user.numberOfKds && <p><span>Number of Kids: </span>{user.numberOfKds}</p>}\r\n                    {user.residence && <p><span>Recidence Type: </span>{user.residence}</p>}\r\n                    {user.petCondition && <p><span>Pet Designated Living conditions: </span>{user.petCondition}</p>}\r\n                    {user.currrenPets && <p><span>Current Pets at home: </span>{user.currrenPets}</p>}\r\n                    {user.prevExperince && <p><span>Previouse experince with animals: </span>{user.prevExperince}</p>}\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { OrderList } from '../cmps/OrderList.jsx';\r\nimport { UserData } from '../cmps/UserData.jsx';\r\nimport userService from '../services/userService.js';\r\nimport { loadOrders } from '../store/actions/orderActions.js'\r\n\r\n\r\nexport class _userProfile extends Component {\r\n\r\n\r\n    state = {\r\n        user: null\r\n    }\r\n\r\n    async componentDidMount() {\r\n        const userId = this.props.match.params.id\r\n        const user = await userService.getById(userId)\r\n        this.setState({ user: { ...user } });\r\n\r\n    }\r\n\r\n    getUserOrders = () => {\r\n\r\n        const orders = this.props.loadOrders(this.state.user._id, 'buyer._id')\r\n    }\r\n\r\n    render() {\r\n\r\n        const { user } = this.state;\r\n        const loggedInUser = this.props.loggedInUser;\r\n        if (!user) return <h3>Loading...</h3>\r\n        return (\r\n            <div className=\"user-profile-box flex column\">\r\n                <UserData user={user}/>\r\n                { user._id === loggedInUser._id &&\r\n                    <div className=\"user-profile-adoptions flex column\">\r\n                        <h2>My Adoption Requests</h2>\r\n                        <OrderList isShop={false} orderFilterName={\"buyer._id\"} filterById={user._id} />\r\n                    </div>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedInUser: state.userReducer.loggedInUser,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadOrders\r\n\r\n}\r\n\r\n\r\nexport const userProfile = connect(mapStateToProps, mapDispatchToProps)(_userProfile)","import React, { Component } from 'react'\r\nimport { NavLink } from 'react-router-dom'\r\nimport {  FacebookIcon, TwitterIcon } from 'react-share'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\n\r\nexport class Footer extends Component {\r\n\r\n    \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"footer full\">\r\n                <NavLink to=\"/\"><img className=\"logo-footer\" src={require('../assets/img/logo-with-title.png')} alt=\"Home\" /></NavLink>\r\n                <p>Powered By ADA Systems.</p>\r\n                <div className=\"social\">\r\n                <a href=\"https://www.facebook.com/iHeartDogscom\" target=\"_blank\"><FacebookIcon size={30} /></a>\r\n                <a href=\"https://twitter.com/AdoptCatsDogs\" target=\"_blank\"><TwitterIcon size={30} /></a>\r\n                <a href=\"https://www.instagram.com/charlie_retriever/?hl=en\" target=\"_blank\"><img className=\"insta-logo\" src={require('../assets/img/insta.png')} alt=\"\"/></a>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { Home } from './pages/Home';\r\nimport { SignUp } from './pages/SignUp';\r\nimport { About } from './cmps/About';\r\nimport { PetApp } from './pages/PetApp';\r\nimport { PetEdit } from './pages/PetEdit';\r\nimport { PetDetails } from './pages/PetDetails';\r\nimport { ShopDetails } from './pages/ShopDetails';\r\nimport { NavBar } from './cmps/NavBar';\r\nimport { userProfile } from './pages/userProfile';\r\nimport { Footer } from './cmps/Footer';\r\n\r\n class _App extends Component {\r\n\r\n\r\n  componentDidMount(){\r\n    document.title = \"Friendly\"\r\n  }\r\n\r\n\r\n  render() {\r\n   \r\n    \r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <header >\r\n          <NavBar  onToggleChatsList={this.onToggleChatsList}/>\r\n        </header>\r\n        <main>\r\n          <Switch>\r\n            <Route component={ShopDetails} path=\"/shop/:id\" />\r\n            <Route component={PetDetails}  path=\"/details/:id?\" />\r\n            <Route component={PetEdit} path=\"/edit/:id?\" />\r\n            <Route component={SignUp} path=\"/signup/:type?\" />\r\n            {/* <Route component={About} path=\"/about\" /> */}\r\n            <Route component={userProfile} path=\"/profile/:id\" />\r\n            <Route component={PetApp} path=\"/pet/:filterType?\" />\r\n            <Route component={Home} path=\"/\" /> \r\n          {/* {this.state.isChatsList && <Route component={ChatsList} />}  */}\r\n          </Switch>\r\n        </main>\r\n        <footer>\r\n          <Footer />\r\n        </footer>\r\n      </div >\r\n    );\r\n  }\r\n  \r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n  }\r\n}\r\n\r\nexport const App = connect(mapStateToProps)(_App)","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","const initialState = {\r\n    pets: [],\r\n    filterBy: {\r\n        type:'',\r\n        gender:'',\r\n        breed:'',\r\n        size:'',\r\n        txt:'',\r\n        distance:{\r\n            lat:0,\r\n            lon:0,\r\n            range:0\r\n        }\r\n    }\r\n}\r\n\r\nexport function petReducer(state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n        case 'LOAD_PETS':\r\n            return {\r\n                ...state,\r\n                pets: [...action.pets]\r\n            }\r\n        case 'ADD_PET':\r\n            return {\r\n                ...state,\r\n                pets: [...state.pets, action.petToSave]\r\n            }\r\n        case 'EDIT_PET':\r\n            console.log(action.petToSave);\r\n            return {\r\n                ...state,\r\n                pets: state.pets.map(pet => {\r\n                    if (pet._id === action.petToSave._id)  return action.petToSave\r\n                    return pet\r\n                })\r\n            }\r\n        case 'REMOVE_PET':\r\n            return {\r\n                ...state,\r\n                pets: state.pets.filter(pet => pet._id !== action.petId)\r\n            }\r\n        case 'SET_FILTER':\r\n            console.log(action.filterBy);\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","const initialState = {\r\n    shops: [],\r\n    currShop: {}\r\n}\r\n\r\nexport function shopReducer(state = initialState, action) {\r\n\r\n    switch (action.type) {\r\n        case 'LOAD_SHOPS':\r\n            return {\r\n                ...state,\r\n                shops: [...action.shops]\r\n            }\r\n        case 'GET_SHOP':\r\n            return {\r\n                ...state,\r\n                currShop: JSON.parse(JSON.stringify(action.shop))\r\n            }\r\n        case 'ADD_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: [...state.shops, action.shopToSave]\r\n            }\r\n        case 'EDIT_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: state.shops.map(shop => {\r\n                    if (shop._id === action.shopToSave._id) return action.shopToSave;\r\n                    return shop;\r\n                })\r\n            }\r\n        case 'REMOVE_SHOP':\r\n            return {\r\n                ...state,\r\n                shops: state.shops.filter(shop => shop._id !== action.shopId)\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n\r\n}","let localLoggedinUser = {_id: 'guest', fullName: 'guest', isGuest: true};\r\n\r\nconst initialState = {\r\n    loggedInUser: localLoggedinUser,\r\n    users: []\r\n};\r\n\r\nexport function userReducer(state = initialState, action = {}) {\r\n    switch (action.type) {\r\n        case 'SET_USER':\r\n            // console.log('action.user', action.user);\r\n            return {\r\n                ...state, loggedInUser: action.user\r\n            };\r\n        case 'UPDATE_USER':\r\n            return {\r\n                ...state,\r\n                users: state.users.map(user => {\r\n                    if (user._id === action.userToSave._id) return action.userToSave;\r\n                    return user;\r\n                })\r\n            }\r\n        case 'USER_REMOVE':\r\n            return {\r\n                ...state,\r\n                users: state.users.filter(user => user._id !== action.userId)\r\n            };\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state, users: action.users\r\n            };\r\n        case 'LOGOUT':\r\n            return {\r\n                ...state, loggedInUser: localLoggedinUser\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}","const initialState = {\r\n    orders: [],\r\n    filterBy: {\r\n        shop:''\r\n    }\r\n}\r\n\r\nexport function orderReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'LOAD_ORDERS':\r\n            return {\r\n                ...state,\r\n                orders: [...action.orders]\r\n            }\r\n        case 'ADD_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: [...state.orders, action.orderToSave]\r\n            }\r\n        case 'EDIT_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: state.orders.map(order => {\r\n                    if (order._id === action.orderToSave._id) return action.orderToSave;\r\n                    return order;\r\n                })\r\n            }\r\n        case 'REMOVE_ORDER':\r\n            return {\r\n                ...state,\r\n                orders: state.orders.filter(order => order._id !== action.orderId)\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","const initialState = {\r\n    chats: [],\r\n    currChat:'',\r\n    filterBy: {}\r\n}\r\n\r\nexport function chatReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'LOAD_CHATS':\r\n            return {\r\n                ...state,\r\n                chats: [...action.chats]\r\n            }\r\n        case 'GET_CHAT':\r\n            return {\r\n                ...state,\r\n                currChat: {...action.chat}\r\n            }\r\n        case 'ADD_CHAT':\r\n            console.log('IN REDUCER',action.chatToSave);\r\n            return {\r\n                ...state,\r\n                chats: [...state.chats, action.chatToSave],\r\n                currChat:{...action.chatToSave}\r\n            }\r\n        case 'EDIT_CHAT':\r\n            return {\r\n                ...state,\r\n                chats: state.chats.map(chat => {\r\n                    if (chat._id === action.chatToSave._id) return action.chatToSave;\r\n                    return chat;\r\n                }),\r\n                currChat:{...action.chatToSave}\r\n            }\r\n        case 'REMOVE_CHAT':\r\n            return {\r\n                ...state,\r\n                chats: state.chats.filter(chat => chat._id !== action.chatId)\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: { ...state.filterBy, ...action.filterBy }\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { petReducer } from './reducers/petReducer';\r\nimport { shopReducer } from './reducers/shopReducer';\r\nimport { userReducer } from './reducers/userReducer'\r\nimport { orderReducer } from './reducers/orderReducer'\r\nimport { chatReducer } from './reducers/chatReducer';\r\n// import { reviewReducer } from './reducers/reviewReducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    petReducer,\r\n    shopReducer,\r\n    userReducer,\r\n    orderReducer,\r\n    chatReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './assets/scss/global.scss'\r\nimport { App } from './App.jsx';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {Provider} from 'react-redux'\r\nimport {store} from './store/store'\r\nimport {HashRouter as Router} from 'react-router-dom'\r\n\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}> \r\n    <Router>\r\n    <App />\r\n    </Router>\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}